<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tag: javascript | 三水清</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="三水清">
<meta property="og:url" content="http://js8.in/tags/javascript/page/4/index.html">
<meta property="og:site_name" content="三水清">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="三水清">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="三水清" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://tp4.sinaimg.cn/2037334587/180/5626160002/1" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">三水清</a></h1>
		</hgroup>

		
		<p class="header-subtitle">程序媛鼓励师</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/about">关于</a></li>
				        
							<li><a href="/slide">分享PPT</a></li>
				        
							<li><a href="/welicai">微理财</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="//github.com/ksky521" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="//weibo.com/sanshuiqing" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
								<a class="mail" target="_blank" href="mailto:ksky521@gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/CocoaPods/" style="font-size: 10px;">CocoaPods</a> <a href="/tags/DOM/" style="font-size: 11.11px;">DOM</a> <a href="/tags/IE/" style="font-size: 10px;">IE</a> <a href="/tags/IE6/" style="font-size: 11.11px;">IE6</a> <a href="/tags/Node/" style="font-size: 13.33px;">Node</a> <a href="/tags/Nodejs/" style="font-size: 13.33px;">Nodejs</a> <a href="/tags/PPT/" style="font-size: 13.33px;">PPT</a> <a href="/tags/Promise/" style="font-size: 11.11px;">Promise</a> <a href="/tags/Rem/" style="font-size: 10px;">Rem</a> <a href="/tags/SSR/" style="font-size: 10px;">SSR</a> <a href="/tags/VPS/" style="font-size: 10px;">VPS</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/ajax/" style="font-size: 14.44px;">ajax</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/audio/" style="font-size: 11.11px;">audio</a> <a href="/tags/a标签/" style="font-size: 10px;">a标签</a> <a href="/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/tags/chrome/" style="font-size: 12.22px;">chrome</a> <a href="/tags/css/" style="font-size: 16.67px;">css</a> <a href="/tags/debug/" style="font-size: 10px;">debug</a> <a href="/tags/eAccelerator/" style="font-size: 10px;">eAccelerator</a> <a href="/tags/ecmascript/" style="font-size: 12.22px;">ecmascript</a> <a href="/tags/escape/" style="font-size: 10px;">escape</a> <a href="/tags/event/" style="font-size: 10px;">event</a> <a href="/tags/express/" style="font-size: 10px;">express</a> <a href="/tags/fis/" style="font-size: 10px;">fis</a> <a href="/tags/fisp/" style="font-size: 10px;">fisp</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/handleEvent/" style="font-size: 10px;">handleEvent</a> <a href="/tags/html5/" style="font-size: 12.22px;">html5</a> <a href="/tags/hybrid/" style="font-size: 13.33px;">hybrid</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/iframe/" style="font-size: 10px;">iframe</a> <a href="/tags/ios/" style="font-size: 10px;">ios</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jssdk/" style="font-size: 10px;">jssdk</a> <a href="/tags/kindle/" style="font-size: 11.11px;">kindle</a> <a href="/tags/linux/" style="font-size: 14.44px;">linux</a> <a href="/tags/livereload/" style="font-size: 10px;">livereload</a> <a href="/tags/livestyle/" style="font-size: 10px;">livestyle</a> <a href="/tags/memcached/" style="font-size: 10px;">memcached</a> <a href="/tags/mixjs/" style="font-size: 10px;">mixjs</a> <a href="/tags/mysql/" style="font-size: 11.11px;">mysql</a> <a href="/tags/name/" style="font-size: 10px;">name</a> <a href="/tags/nginx/" style="font-size: 11.11px;">nginx</a> <a href="/tags/nodejs/" style="font-size: 15.56px;">nodejs</a> <a href="/tags/php/" style="font-size: 17.78px;">php</a> <a href="/tags/session/" style="font-size: 10px;">session</a> <a href="/tags/storage/" style="font-size: 10px;">storage</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/this/" style="font-size: 10px;">this</a> <a href="/tags/ueditor/" style="font-size: 10px;">ueditor</a> <a href="/tags/uglifyjs/" style="font-size: 10px;">uglifyjs</a> <a href="/tags/vps/" style="font-size: 10px;">vps</a> <a href="/tags/webapp/" style="font-size: 13.33px;">webapp</a> <a href="/tags/webbench/" style="font-size: 10px;">webbench</a> <a href="/tags/websocket/" style="font-size: 10px;">websocket</a> <a href="/tags/web前端开发/" style="font-size: 14.44px;">web前端开发</a> <a href="/tags/windows7技巧/" style="font-size: 10px;">windows7技巧</a> <a href="/tags/wordpress/" style="font-size: 12.22px;">wordpress</a> <a href="/tags/xss/" style="font-size: 12.22px;">xss</a> <a href="/tags/严格模式/" style="font-size: 10px;">严格模式</a> <a href="/tags/位运算/" style="font-size: 10px;">位运算</a> <a href="/tags/作用域/" style="font-size: 12.22px;">作用域</a> <a href="/tags/前端优化/" style="font-size: 10px;">前端优化</a> <a href="/tags/前端工具/" style="font-size: 14.44px;">前端工具</a> <a href="/tags/加速器/" style="font-size: 10px;">加速器</a> <a href="/tags/劫持/" style="font-size: 10px;">劫持</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/压力测试/" style="font-size: 10px;">压力测试</a> <a href="/tags/右键/" style="font-size: 10px;">右键</a> <a href="/tags/安全/" style="font-size: 11.11px;">安全</a> <a href="/tags/工作/" style="font-size: 10px;">工作</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/性能/" style="font-size: 12.22px;">性能</a> <a href="/tags/性能优化/" style="font-size: 11.11px;">性能优化</a> <a href="/tags/手机开发/" style="font-size: 11.11px;">手机开发</a> <a href="/tags/执行环境/" style="font-size: 10px;">执行环境</a> <a href="/tags/技巧/" style="font-size: 10px;">技巧</a> <a href="/tags/抓取/" style="font-size: 11.11px;">抓取</a> <a href="/tags/抓站/" style="font-size: 10px;">抓站</a> <a href="/tags/播放器/" style="font-size: 10px;">播放器</a> <a href="/tags/效率/" style="font-size: 10px;">效率</a> <a href="/tags/数组/" style="font-size: 10px;">数组</a> <a href="/tags/架构/" style="font-size: 13.33px;">架构</a> <a href="/tags/标签/" style="font-size: 10px;">标签</a> <a href="/tags/模块化/" style="font-size: 11.11px;">模块化</a> <a href="/tags/渲染模式/" style="font-size: 12.22px;">渲染模式</a> <a href="/tags/游戏/" style="font-size: 11.11px;">游戏</a> <a href="/tags/移动前端/" style="font-size: 12.22px;">移动前端</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/练手/" style="font-size: 11.11px;">练手</a> <a href="/tags/经验/" style="font-size: 11.11px;">经验</a> <a href="/tags/网络技术/" style="font-size: 18.89px;">网络技术</a> <a href="/tags/虚拟主机/" style="font-size: 10px;">虚拟主机</a> <a href="/tags/解耦/" style="font-size: 10px;">解耦</a> <a href="/tags/语法限制/" style="font-size: 10px;">语法限制</a> <a href="/tags/资源管理/" style="font-size: 12.22px;">资源管理</a> <a href="/tags/越狱/" style="font-size: 11.11px;">越狱</a> <a href="/tags/跨域/" style="font-size: 13.33px;">跨域</a> <a href="/tags/路径/" style="font-size: 10px;">路径</a> <a href="/tags/软件心得/" style="font-size: 12.22px;">软件心得</a> <a href="/tags/重构/" style="font-size: 10px;">重构</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a> <a href="/tags/面试/" style="font-size: 11.11px;">面试</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.welefen.com/">welefen</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.woiweb.net/">我爱互联网</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">三水清，前端从业者，先后就职于微博、腾讯、百度</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">三水清</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://tp4.sinaimg.cn/2037334587/180/5626160002/1" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">三水清</h1>
			</hgroup>
			
			<p class="header-subtitle">程序媛鼓励师</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
					<li><a href="/slide">分享PPT</a></li>
		        
					<li><a href="/welicai">微理财</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="//github.com/ksky521" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="//weibo.com/sanshuiqing" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="mail" target="_blank" href="mailto:ksky521@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-javascript事件：获取事件对象getevent函数" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/07/13/javascript事件：获取事件对象getevent函数/" class="article-date">
  	<time datetime="2011-07-12T20:11:59.000Z" itemprop="datePublished">2011年7月13日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/07/13/javascript事件：获取事件对象getevent函数/">javascript事件：获取事件对象getEvent函数</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在<strong>javascript</strong>开发中我们会经常获取页面中的事件对象，然后来处理这些事件，例如下面的<strong>getEvent</strong>函数就是获取javascript下的页面事件对象。</p>
<pre><code class="javascript">
function getEvent(event){
    return event || window.event;
}
</code></pre>
<p>我们使用getEvent的时候可以这样调用。</p>
<pre><code class="javascript">
function foo(event){
    var evt = getEvent(event);
    alert(evt);
}
</code></pre>
<p>并且把foo函数绑定到一个onclick事件上。<br>但是常用的是foo函数不会有参数，或者第一个参数没有传入，我们可以通过<code>arguments[0]</code>来获取第一个参数。<br>在IE中event是一个全局变量，即<code>window.event</code>，而在Firefox等浏览器，事件会作为第一个参数传入foo函数，所以getEvent可以改为：</p>
<pre><code class="javascript">
function getEvent(event){
    return arguments[0] || window.event;
}
</code></pre>
<p>这时在一些版本的浏览器，例如Firefox 中会出现获取不到event对象的问题，其实我们可以看成事件的触发是下面的方式：</p>
<pre><code class="javascript">
function onclick(event) {
    foo();
}
</code></pre>
<p>这样，第一个函数是onclick，即event会默认作为第一个参数传入，而foo函数没有将event作为参数传入，这样严重限制了getEvent的灵活性，所以我们需要修改下<strong>getEvent</strong>函数。<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/07/13/javascript事件：获取事件对象getevent函数/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-javascript继承的写法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/06/20/javascript继承的写法/" class="article-date">
  	<time datetime="2011-06-19T20:38:21.000Z" itemprop="datePublished">2011年6月20日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/06/20/javascript继承的写法/">javascript继承的写法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>严格来说<strong>javascript</strong>是基于对象而不是面向对象的语言，因为javascript没有像java语言那么丰富的类、继承、封装，但是javascript是基于原型（prototype）的面向对象开发，是一种动态、弱类型、基于原型的语言。前几天看了阿里UED的《重温<strong>javascript继承</strong>机制》，今天重新看了，很有感触，特地转载了重要的部分，记录一下，下次有需要的时候还要重新看一下！的确是不错的一篇文章。</p>
<h3 id="继承的演变">继承的演变</h3><h4 id="1、采用new关键字生成实例">1、采用new关键字生成实例</h4><p>处理表单验证这样简单功能脚本语言显然是不需要”继承”机制的，然而如果Javascript里面都是对象，就需要有一种办法来把所有对象联系起来。最后，Brendan Eich还是设计了”继承”。只是，他并没有引入”类”（class）的概念，因为一旦有了”类”，Javascript就是一种完整的面向对象编程语言了，<br>这好像有点太正式了，与设计初衷也远了，同时增加了初学者的入门难度。<br>参照到C++和Java语言都使用new命令来生成实例：</p>
<p>C++这样写：</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; ClassName *object = new ClassName(param);
</code></pre>
<p>Java这样写：</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; Foo foo = new Foo();
</code></pre>
<p>那么，也可以把new命令引入了Javascript，用来从原型对象生成一个实例对象。但是，<strong>Javascript</strong>中没有”类”的话，怎样表示原型对象呢？<br>依然是参照C++和Java使用new命令时，都会调用”类”的构造函数（constructor）。Brendan Eich简化了设计，在Javascript语言中，new命令后面跟的是构造函数，不再是类。<br>我们举个例子来说，现在有一个叫做WD构造函数，表示前端开发（web-developper）对象的原型。</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; function WD(skill){
&gt;     this.skill = skill;
&gt; }
</code></pre>
<p>对这个构造函数使用new关键字，就会生成一个前端开发对象的实例。</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; var WD1 = new WD(&#39;html&#39;);
&gt; console.log(WD1.skill); // html
</code></pre>
<p>在构造函数中的this关键字，它其实代表的是新创建的实例对象。</p>
<h4 id="2、new_出来对象的缺陷">2、new 出来对象的缺陷</h4><p>采用new关键字，用构造函数生成实例对象无法共享属性和方法。<br>比如，在WD对象的构造函数中，设置一个实例对象的共有属性skill。</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; function WD(skill){
&gt;     this.skill = skill;
&gt;     this.sex = &#39;男&#39;;
&gt; }
</code></pre>
<p>然后，生成两个实例对象：</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; var WD1 = new WD(&#39;html&#39;);
&gt; var WD2 = new WD(&#39;css&#39;);
</code></pre>
<p>这两个对象的skill属性是独立的，修改其中一个，不会影响到另一个。</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; WD1.skill= &#39;Javascript&#39;;
&gt; console.log(WD2.skill);//“css”，不受WD1的影响
</code></pre>
<p>每一个实例对象，都有自己的属性和方法的副本。这不仅无法做到数据共享，也是极大的资源浪费。</p>
<h4 id="3、引入prototype属性">3、引入prototype属性</h4><p>为了实现属性和方法的共享，Brendan Eich决定为构造函数设置一个prototype属性。<br>这个属性包含一个对象（以下简称”prototype对象”），所有实例对象需要共享的属性和方法，都放在这个对象里面；那些不需要共享的属性和方法，就放在构造函数里面。<br>实例对象一旦创建，将自动引用prototype对象的属性和方法。也就是说，实例对象的属性和方法，分成两种，一种是本地的，另一种是引用的。<br>还是以WD构造函数为例，现在用prototype属性进行改写：</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; function WD(skill){
&gt;     this.skill = skill;
&gt; }
&gt; 
&gt; WD.prototype = { sex : &#39;男&#39; };
&gt; 
&gt; var WD1 = new WD(&#39;html&#39;);
&gt; var WD2 = new WD(&#39;css&#39;);
&gt; 
&gt; console.log(WD1.sex); // 男
&gt; console.log(WD2.sex); // 男
</code></pre>
<p>现在，sex属性放在prototype对象里，是两个实例对象共享的。只要修改了prototype对象，就会同时影响到两个实例对象。</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; WD.prototype.sex = &#39;女&#39;;
&gt; console.log(WD1.sex); //女
&gt; console.log(WD2.sex); // 女
</code></pre>
<p>由于所有的实例对象共享同一个prototype对象，那么从外界看起来，prototype对象就好像是实例对象的原型，而实例对象则好像”继承”了prototype对象一样。这就是Javascript继承机制的设计思想。</p>
<h3 id="三、构造函数如何实现继承">三、构造函数如何实现继承</h3><p>现在有一个”MED”对象的构造函数（MED:Marketing Experience Design,营销体验设计）</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; function MED(){
&gt;     this.aim = &quot;营销体验设计&quot;;
&gt; }
</code></pre>
<p>依然是”WD”对象的构造函数，</p>
<blockquote>
</blockquote>
<pre><code class="javascript">
&gt; function WD(skill,sex){
&gt;     this.skill = skill;
&gt;     this.sex = sex;
&gt; }
</code></pre>
<p>怎样才能使”WD”继承”MED”呢？<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web前端开发/">web前端开发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/06/20/javascript继承的写法/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-nodelist集合跟array数组的区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/05/20/nodelist集合跟array数组的区别/" class="article-date">
  	<time datetime="2011-05-20T09:27:16.000Z" itemprop="datePublished">2011年5月20日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/05/20/nodelist集合跟array数组的区别/">NodeList集合跟Array数组的区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>首先来看看什么是<strong>NodeList</strong>，NodeList跟arguments都不是普通的数组，他们有数组的一些基本属性但是又不完全是数组。下面是在<a href="https://developer.mozilla.org/En/DOM/NodeList">Mozilla</a>上面找到的定义：</p>
<blockquote>
<p>This is a commonly used type which is a collection of nodes returned by getElementsByTagName, getElementsByTagNameNS, and Node.childNodes. The list is live, so changes to it internally or externally will cause the items they reference to be updated as well. Unlike NamedNodeMap, NodeList maintains a particular order (document order). The nodes in a NodeList are indexed starting with zero, similarly to JavaScript arrays, but a NodeList is not an array.<br>由字面意思来看<strong>NodeList</strong>是DOM操作（getElementsByTagName等）取出来的集合，是集合而不是普通的数组，但是他们有数组的一些属性，例如length、下标索引，但是他们也有自己的属性，例如item，另外NodeList最大的特点就是时效性（live）。</p>
</blockquote>
<h3 id="NodeList的时效性">NodeList的时效性</h3><p>我们来看下面的代码：</p>
<pre><code class="html">

*   index0
*   index1
*   index2
*   index3
*   index4
</code></pre>
<p>javascript代码如下：</p>
<pre><code class="javascript">
var myUl = document.getElementById(&#39;nodelist&#39;);
var lis = myUl.getElementsByTagName(&#39;li&#39;);
</code></pre>
<p>lis是一个NodeList集合，具有时效性，所谓的时效性就是我们在修改li的同时，会反映到lis上来，这与array是不同的，例如我们把第一个li插入到ul的底部，那么lis也会发生相应的变化：</p>
<pre><code class="javascript">
//把第一个li插入的ul的底部
myUl.appendChild(myUl.getElementsByTagName(&#39;li&#39;).item(0));
console.log(lis[0]);//输出的是原来ul的第二个li
</code></pre>
<p>所以我们应该在写代码的时候注意<strong>NodeList</strong>的时效性，不然就会犯一些错误，
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/05/20/nodelist集合跟array数组的区别/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-ie6下javascript不能隐藏select标签的bug" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/05/13/ie6下javascript不能隐藏select标签的bug/" class="article-date">
  	<time datetime="2011-05-13T15:50:57.000Z" itemprop="datePublished">2011年5月13日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/05/13/ie6下javascript不能隐藏select标签的bug/">IE6下javascript不能隐藏select标签的bug</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>昨天做了一个简单的项目，要求有三级联动的select菜单，可是伤不起的IE6下就出现了<strong>不能隐藏select</strong>的bug，之前我也介绍过IE6下select层高的问题，可以通过隐藏select或者<a href="http://js8.in/553.html" title="解决IE6 select z-index无效，遮挡div的bug">使用iframe遮挡</a>的方式来解决，今天的bug不同以前，大家如果在用js控制select显示隐藏的时候可能会经常遇到，调试一下午终于找到了解决的方案，特此记录一下。</p>
<h3 id="IE6不能隐藏select重现代码">IE6不能隐藏select重现代码</h3><p>建立两个关联的select，通过javascript控制第一个select 发生变化后，第二个select根据第一个value重新添加options，如果为空则隐藏第二个select（示例中判断除第一个之外都隐藏），则由第一个select的第三个value切换到第二个value则第二个select就不会隐藏。<br>具体效果见下面的实例：</p>
<p><a href="//js8.in/mywork/ie6selectbug.html">IE6 select隐藏bug</a></p>
<h3 id="IE6下不能隐藏select标签解决方案">IE6下不能隐藏select标签解决方案</h3><ol>
<li>可以通过先设置select为显示，后设置为none的方式</li>
<li>通过给select添加class来控制显示<br>具体方法，见示例代码源码注释的地方。</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web前端开发/">web前端开发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-使用javascript将xml解析为json" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/04/22/使用javascript将xml解析为json/" class="article-date">
  	<time datetime="2011-04-22T08:18:17.000Z" itemprop="datePublished">2011年4月22日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/04/22/使用javascript将xml解析为json/">使用javascript将XML解析为JSON</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天看了<a href="http://davidwalsh.name/">David Walsh</a>一篇把XML格式转换为JSON格式的文章，感觉不错，简单的转载了过来。<br>下面是神奇的<strong>XML转JSON</strong>的javascript代码：</p>
<pre><code class="javascript">
    // Changes XML to JSON
function xmlToJson(xml) {

    // Create the return object
    var obj = {};

    if (xml.nodeType == 1) { // element
        // do attributes
        if (xml.attributes.length &gt; 0) {
        obj[&quot;@attributes&quot;] = {};
            for (var j = 0; j &lt; xml.attributes.length; j++) {
                var attribute = xml.attributes.item(j);
                obj[&quot;@attributes&quot;][attribute.nodeName] = attribute.nodeValue;
            }
        }
    } else if (xml.nodeType == 3) { // text
        obj = xml.nodeValue;
    }

    // do children
    if (xml.hasChildNodes()) {
        for(var i = 0; i &lt; xml.childNodes.length; i++) {
            var item = xml.childNodes.item(i);
            var nodeName = item.nodeName;
            if (typeof(obj[nodeName]) == &quot;undefined&quot;) {
                obj[nodeName] = xmlToJson(item);
            } else {
                if (typeof(obj[nodeName].length) == &quot;undefined&quot;) {
                    var old = obj[nodeName];
                    obj[nodeName] = [];
                    obj[nodeName].push(old);
                }
                obj[nodeName].push(xmlToJson(item));
            }
        }
    }
    return obj;
};
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/04/22/使用javascript将xml解析为json/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-最短的domready代码" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/03/20/最短的domready代码/" class="article-date">
  	<time datetime="2011-03-20T09:39:31.000Z" itemprop="datePublished">2011年3月20日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/03/20/最短的domready代码/">最短的DOMReady代码</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>自己的<a href="http://js8.in/677.html" title="一个轻量级的js框架">js框架YQ</a>还没有添加<strong>DOMReady</strong>代码，今天看到国外js牛人Dustin Diaz的<a href="http://dustindiaz.com/smallest-domready-ever">文章</a>，得到了一份最短的DOMReady代码，分享出来：</p>
<pre><code class="javascript">
function r(f){/in/.test(document.readyState)?setTimeout(&#39;r(&#39;+f+&#39;)&#39;,9):f()}
</code></pre>
<p>Dustin Diaz放弃了使用IE的<code>document.documentElement.doScroll(&#39;left&#39;)</code>（这也是多数框架的方法，<a href="http://javascript.nwbox.com/IEContentLoaded/">详细介绍</a>）。使用了setTimeout来定时检测<code>document.readyState</code>，<code>document.readyState</code>有以下五种状态：<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web前端开发/">web前端开发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/03/20/最短的domready代码/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/" class="article-date">
  	<time datetime="2011-03-17T13:10:00.000Z" itemprop="datePublished">2011年3月17日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/">WinHttp.WinHttpRequest.5.1—可以用作抓取的msxml 4.0底层对象</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>前些日子在博客园上看到的一篇文章（现在搜索不到了，尽转载的），介绍了下WinHttp.WinHttpRequest.5.1。自己也查了一些资料，写了个vbscript脚本，来添加<a href="http://js8.in/634.html" title="Sina App Engine开发实例：天气预报的定时短信（二）">新浪微博</a>好友。<strong>WinHttp.WinHttpRequest</strong>的介绍可以去微软官方查看，也有个介绍的网站：<a href="http://www.neilstuff.com/winhttp/。感兴趣的可以移步去围观一下。">http://www.neilstuff.com/winhttp/。感兴趣的可以移步去围观一下。</a></p>
<p>简单看一下我改的博客园文章的代码，用于新浪微博自动添加好友，因为是前些日子写的。<a href="http://js8.in/resume.html" title="_blank">申请离职</a>之后，害怕自己的以前的一些代码丢失，特发到网上来备案一下。简单解释在代码中，加上之前的php的<a href="http://js8.in/379.html">curl函数</a>，WinHttp.WinHttpRequest.5.1应该对以后一些研究会有帮助。而且WinHttp.WinHttpRequest也可以设置refer，cookie，user-agent，proxy……，关键是他可以在cmd里面跑，感觉比较酷（当然php也可以做到，但是不熟悉php的可以用js写出来代替curl）。不废话了，直接上代码。</p>
<pre><code class="javascript">
function RemoteCall(method, url, param, header){  
    var obj = new ActiveXObject(&quot;WinHttp.WinHttpRequest.5.1&quot;);  
    obj.Open(method||&quot;GET&quot;, url, false);  
    obj.Option(4) = 13056;  
    obj.Option(6) = false;  
    obj.setRequestHeader(&quot;Cookie&quot;, &quot;string&quot;);//先设置一个cookie，防止出错，见官方文档
    obj.setRequestHeader(&quot;Cookie&quot;,&quot;你的新浪微博cookie&quot;);
    obj.setRequestHeader(&quot;Host&quot;,&quot;t.sina.com.cn&quot;);
    obj.setRequestHeader(&quot;Accept&quot;,&quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;);
    obj.setRequestHeader(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 QQDownload/1.7 FirePHP/0.5&quot;);
    obj.Send(param);  
    return obj;  
}
function post(url,param){
    var obj = new ActiveXObject(&quot;WinHttp.WinHttpRequest.5.1&quot;);  
    obj.Open(&quot;POST&quot;, url, false);  
    obj.Option(4) = 13056;  
    obj.Option(6) = false;  
    obj.setRequestHeader(&quot;Cookie&quot;, &quot;string&quot;);
    obj.setRequestHeader(&quot;Cookie&quot;,&quot;你的新浪微博cookie&quot;);
    obj.setRequestHeader(&quot;Host&quot;,&quot;t.sina.com.cn&quot;);
    obj.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;);
    obj.setRequestHeader(&quot;Accept&quot;,&quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;);
    obj.setRequestHeader(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 QQDownload/1.7 FirePHP/0.5&quot;);
    obj.Send(param);  
    return obj; 
}

</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web前端开发/">web前端开发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-自己写的一个轻量级javascript框架的设计模式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/" class="article-date">
  	<time datetime="2011-03-13T17:15:39.000Z" itemprop="datePublished">2011年3月14日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/">自己写的一个轻量级javascript框架的设计模式</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>公司一直使用jQuery框架，一些小的项目还是觉得jQuery框架太过于强大了，于是自己周末有空琢磨着写个自己的框架。谈到js的设计模式，不得不说说js的类继承机制，javascript不同于PHP可以轻松的实现类继承，不过javascript的类继承方法还是有的，常见的有构建函数、原型扩展、综合……，也有一些专门写类的函数，例如jQuery的作者有个类继承函数。关于类继承写法可以简单看看<a href="http://kevlindev.com/tutorials/javascript/inheritance/index.htm">这篇文章</a>。</p>
<p>我自己写的框架也不知道叫什么名字，刚开始写的时候随手写了个W（姓拼音，之前写过jQuery弹出框插件<a href="http://js8.in/wbox-jquery">wBox</a>），现在写这篇文章重新整理了一下思想，换了YQ（名字拼音，你懂的~）。</p>
<h3 id="核心代码">核心代码</h3><p>框架设计的时候尽量做到了支持链式写法，也就是返回<code>this</code>，可以$(selector).handler1().handler2()……无限写下去，只要不是有返回值的就可以继续。包括了event，dom，css，还有fadeIn，fadeOut动画（因为再重构<a href="http://love.js8.in">爱墙</a>[html5+css3]版，所有顺手加上了这个功能）。如果配合sizzle选择器就更牛了！</p>
<p>下面说说框架的核心代码，等完善了之后跟新版html5爱墙一起放出，主要的代码如下：<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-如何写出高质量的javascript代码" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/03/03/如何写出高质量的javascript代码/" class="article-date">
  	<time datetime="2011-03-03T08:22:42.000Z" itemprop="datePublished">2011年3月3日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/03/03/如何写出高质量的javascript代码/">如何写出高质量的Javascript代码</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>优秀的Stoyan Stefanov在他的新书中（《<strong>Javascript</strong> Patterns》）介绍了很多编写高质量代码的技巧，比如避免使用全局变量，使用单一的var关键字，循环式预存长度等等。</p>
<p>这篇文章不仅仅从代码本身来考虑如何优化编码，也从代码的设计阶段来考虑，包括书写API文档，同事的review，使用JSLint。这些习惯都能帮助你编写更加<strong>高质量</strong>的、更易于理解的、可维护的代码（让你的代码在多年之后仍使你引以为傲）。</p>
<h3 id="编写可维护的代码">编写可维护的代码</h3><p>软件的BUG修复需要花费大量的精力。尤其当代码已经发布之后，随着时间的增长，维护的成本愈发的高。当你一发现BUG的时候，就立即去修复，这时候你的代码还是热乎的，你也不需要回忆，因为就是刚刚写好的。但是当你做了其他任务，几乎完全忘记了这份代码，这时候就需要：</p>
<ol>
<li>重新学习和理解问题</li>
<li>理解代码是如何解决问题的<br>另外一个问题是，在大项目或者大公司里面，经常是解决BUG的人不是产生BUG的人，而且也不是发现BUG的人。所以减少理解代码的时间就是最重要的问题，无论这个代码是你自己以前写的还是团队中的其他成员写的，因为我们都想去搞搞新的有意思的东西，而不是去维护那些个陈旧的代码。</li>
</ol>
<p>还有一个开发中的普遍问题就是，往往读代码的时间比写代码的时间还要多。有时候你钻研一个问题，可以花整整一个下午的时间来考虑代码的编写。这个代码当时是可以工作的，但是随着开发的进行，其他东西发生了很大的变化，这时候也就需要你自己来重新审查修改编写代码。比如：</p>
<ol>
<li>还有BUG没有解决</li>
<li>添加了新的功能</li>
<li>程序需要在新的环境中运行（比如一个新上市的浏览器）</li>
<li>代码有问题</li>
<li>代码需要重写因为修改了架构甚至要使用另一个语言<br>因为这些原因，也许你当时一个下午写好的代码，后面需要花费几周的时间来阅读。所以编写可维护的代码对于软件的成功至关重要。</li>
</ol>
<p>可维护的代码包括：</p>
<ol>
<li>可读性</li>
<li>连续性</li>
<li>预见性</li>
<li>看起来是一个人写的</li>
<li>有文档</li>
<li>最少化全局变量<br>Javascript使用函数来约定作用域。一个在函数内部声明的变量在外部是不可见的。所以，全局变量也就是声明在任何函数之外的或者没有被声明的变量。</li>
</ol>
<p><strong>Javascript</strong>中，在任何函数之外有个可访问的全局对象，每一个你创建的全局变量都是这个对象的一个属性。在浏览器中，为了方便，通常用window来指代这个全局变量。下面的代码就是说明如何创建一个全局变量：</p>
<blockquote>
</blockquote>
<pre><code class="javascript">myglobal = &quot;hello&quot;; // antipattern
&gt; console.log(myglobal); // &quot;hello&quot;
&gt; console.log(window.myglobal); // &quot;hello&quot;
&gt; console.log(window[&quot;myglobal&quot;]); // &quot;hello&quot;
&gt; console.log(this.myglobal); // &quot;hello
</code></pre>
<h3 id="全局变量的问题">全局变量的问题</h3><p>全局变量的问题在于，他在你的所有代码或者一个页面中都共享。他们在同一个命名空间下面，这通常会造成变量名冲突–两个同名的变量，但是确实不同的用处。</p>
<p>通常在一些页面中需要引入一些其他人的代码，比如：</p>
<ol>
<li>第三方的JS库</li>
<li>广告伙伴的脚本</li>
<li>第三方的用户行为分析或者统计脚本</li>
<li>不同的组件、按钮等等<br>加入其中一个第三方组件定义了一个全局变量：result。然后在你的程序中，也定义了一个全局变量result。最后的这个result会覆盖点之前的result，这样第三方的脚本就会停止工作。</li>
</ol>
<p>所以，为了对其他的脚本友好，在一个页面中使用越少的全局变量越好。在后面会有一些方法来告诉你如何减少全局变量，比如使用命名空间，或者自执行的匿名函数，但是最好的避免全局变量的方法就是使用var关键字来声明变量。<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/03/03/如何写出高质量的javascript代码/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
    <article id="post-使用navigator-geolocation来获取用户的地理位置信息" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2011/01/26/使用navigator-geolocation来获取用户的地理位置信息/" class="article-date">
  	<time datetime="2011-01-26T15:25:05.000Z" itemprop="datePublished">2011年1月26日</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2011/01/26/使用navigator-geolocation来获取用户的地理位置信息/">使用navigator.geolocation来获取用户的地理位置信息</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>W3C 中新添加了一个名为 <strong>Geolocation</strong>的 API 规范，Geoloaction API的作用就是通过浏览器获取用户的地理位置。我们可以使用<code>navigator.geolocation</code>来简单的获取用户的地理位置信息。本文中将简单介绍下W3C的Geolocation。</p>
<p>Geolocation在javascript的navigator 对象中，我们可以通过 navigator.geolocation 来使用它。不支持 geolocation 的浏览器并不包含这一对象，那么可以通过下面的代码来做能力检测，对不同的浏览器做不同的处理。</p>
<pre><code class="javascript">if (navigator.geolocation) {
        alert( &#39; 浏览器支持 geolocation &#39; );
}else{
        alert( &#39; 浏览器不支持 geolocation &#39; );
}
</code></pre>
<p>在访问 geolocation 对象时，即调用 geolocation 下面的方法时，浏览器会弹出提示，询问用户是否许可网站提供的位置服务，只有在得到用户许可过后，服务才会继续，否则将被停止，在稍后你将会了解到，我们能够捕获到用户拒绝服务的动作。下面这张图分别是 Chrome , Firefox 和 Opera 在初次访问 geolocation 时，给用户的提示：</p>
<p><a href="http://js8.in/672.html/geolocation-warn-2"><img src="/uploads/2011/01/geolocation-warn1-300x186.png" alt="初次使用geolocation时的警告框" title="初次使用geolocation时的警告框"></a></p>
<p>常用的navigator.geolocation对象有以下三种方法：</p>
<ol>
<li>获取当前地理位置：<strong>navigator.geolocation.getCurrentPosition</strong>(success_callback_function, error_callback_function, position_options)</li>
<li>持续获取地理位置：<strong>navigator.geolocation.watchPosition</strong>(success_callback_function, error_callback_function, position_options)</li>
<li><p>清除持续获取地理位置事件：<strong>navigator.geolocation.clearWatch</strong>(watch_position_id)<br>其中success_callback_function为成功之后处理的函数，error_callback_function为失败之后返回的处理函数，参数position_options是配置项，由JSON格式传入：</p>
</li>
<li><p>enableHighAccuracy：true/false，它将告诉浏览器是否启用高精度设备，所谓的高精度设备包含但不局限于前面所提到的 GPS 和 WIFI，值为 true 的时候，浏览器会尝试启用这些设备，默认指为 true，在这种情况下，浏览器会尽可能地进行更为精确的查询，简单地说，如果用户有可用的 GPS 设备，会返回 GPS 设备的查询结果，IP 是最后的选择，对于移动设备来说，网络接入点(基站)或许成为另一个选择，对此我还没有完全了解，但根据测试，即时没有任何额外功能的手机，也能够得到更为精确的查询结果。</p>
</li>
<li>maximumAge：单位毫秒，告诉设备缓存时间，主要用于设备的省电或者节省带宽方面。</li>
<li>timeout：单位毫秒，超时事件，获取位置信息时超出设定的这个时长，将会触发错误，捕获错误的函数将被调用，并且错误码指向TIMEOUT。</li>
</ol>
<p>例如下面的代码：</p>
<pre><code class="javascript">
var geo=navigator.geolocation.getCurrentPosition(geo_success, geo_error, {enableHighAccuracy:true, 
    maximumAge:30000, 
    timeout:27000});
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络技术/">网络技术</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/前端开发/">前端开发</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2011/01/26/使用navigator-geolocation来获取用户的地理位置信息/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    

    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/tags/javascript/page/3/">&laquo; Prev</a><a class="page-number" href="/tags/javascript/">1</a><a class="page-number" href="/tags/javascript/page/2/">2</a><a class="page-number" href="/tags/javascript/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/tags/javascript/page/5/">5</a><a class="page-number" href="/tags/javascript/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/tags/javascript/page/9/">9</a><a class="extend next" rel="next" href="/tags/javascript/page/5/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2019 三水清
    	</div>
      	<div class="footer-right">
      		<a href="//hexo.io/" target="_blank">Hexo</a>  Theme <a href="//github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    

<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: false,
		isArchive: false,
		isTag: true,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="//7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>

<script src="/js/main.js" type="text/javascript"></script>


  <script src="/fancybox/jquery.fancybox.js" type="text/javascript"></script>




    <link rel="stylesheet" href="/css/share.min.css">
    <script src="/js/share.min.js"></script>









<!--设置代码高亮-->
<link rel="stylesheet" href="/css/github.css">
<script src="/js/highlight.js"></script>

<script type="text/javascript">
$(document).ready(function(){
   $('pre code').each(function(i, v){
        var $t = $(v);
        var lang = $t.attr('class');
        try{
            lang = lang==='shell'?'bash':lang;
            var data = hljs.highlight(lang, $t[0].textContent);
        }catch(e){
            var data = hljs.highlightAuto($t[0].textContent);
        }
        var lines = data.value.split('\n');
        var numbers = [];
        for (var i = 0, len = lines.length; i < len; i++){
            if(i===len-1&&$.trim(lines[i])===''){
                break;
            }
            numbers.push('<li>'+(i+1)+'</li>');
        }
        if(numbers.length){
            numbers = '<ul class="hljs-line-number">'+numbers.join('')+'</ul>'
        }
        $t.addClass('hljs')[0].innerHTML = numbers+data.value;
    })
});
</script>

  </div>
</body>
</html>