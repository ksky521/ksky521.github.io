<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>新浪微博jsSDK操作指南 - 三水清</title>
  <meta name="author" content="三水清">
  
  <meta name="description" content="新浪微博的开放平台提供了jsSDK的方法，但是很多人反映不会使用，这里最关键的一点是不会放跨域文件。的确，我也承认开放平台的开发文档写的不是很详细，比如对于一些接口是使用REST的，要人云里雾里，而对于REST的介绍却很隐晦，我也是尝试了几次才找到的方法（例如删除微博接口）。下面简单说说jsSDK的操作。
放置跨域文件
为了实现跨域请求api的接口，我们需要在自己的域名下放置一个xd.html的文件，这个文件可以理解成在你网站做代理的，通过它才可以请求道api.t.sina.com.cn的内容。感兴趣的童靴可以研究下这种跨域的实现方式，国内的人人、腾讯，国外的facebook都是这种跨域方式。
基本原理是通过html5的postMessage和window.name来实现跨域。其实如果进一步研究是完全可以不要这个跨域文件的！相信下一个版本的JSSDK不会出现跨域文件来误导大家。跨域文件放置要点

放置来应用的同域名下，例如你的应用网址是js8.in，则你的xd.html文件就要放在js8.in域名下
不一定是根目录下，因为可以通过jsSDK中的xdpath来传入xd.html路径，默认是根目录，即js8.in/xd.html">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="新浪微博jsSDK操作指南"/>
  <meta property="og:site_name" content="三水清"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="atom.xml" title="三水清" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">三水清</a></h1>
  <h2><a href="/">专注前端开发,分享Javascript/CSS/PHP等Web前端开发技巧</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="https://github.com/ksky521">Github</a></li>
    
      <li><a href="http://weibo.com/sanshuiqing">新浪微博</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon icon-black"></div>
      
      
  
    <h1 class="title">新浪微博jsSDK操作指南</h1>
  

      <time datetime="2011-07-07T12:32:41.000Z"><a href="/2011/07/07/新浪微博jssdk操作指南/">2011年7月7日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>新浪微博</strong>的开放平台提供了<strong>jsSDK</strong>的方法，但是很多人反映不会使用，这里最关键的一点是不会放跨域文件。<br>的确，我也承认开放平台的开发文档写的不是很详细，比如对于一些接口是使用REST的，要人云里雾里，而对于REST的介绍却很隐晦，我也是尝试了几次才找到的方法（例如删除微博接口）。<br>下面简单说说jsSDK的操作。</p>
<h3>放置跨域文件</h3>
<p>为了实现跨域请求api的接口，我们需要在自己的域名下放置一个xd.html的文件，这个文件可以理解成在你网站做代理的，通过它才可以请求道api.t.sina.com.cn的内容。感兴趣的童靴可以研究下这种跨域的实现方式，国内的人人、腾讯，国外的facebook都是这种跨域方式。</p>
<p>基本原理是通过html5的postMessage和window.name来实现跨域。其实如果进一步研究是完全可以不要这个跨域文件的！相信下一个版本的JSSDK不会出现跨域文件来误导大家。<br><strong>跨域文件</strong>放置要点</p>
<ol>
<li>放置来应用的同域名下，例如你的应用网址是js8.in，则你的xd.html文件就要放在js8.in域名下</li>
<li>不一定是根目录下，因为可以通过jsSDK中的<code>xdpath</code>来传入xd.html路径，默认是根目录，即js8.in/xd.html<a id="more"></a>

</li>
</ol>
<h3>api的get接口可以jsonp</h3>
<p>据我研究，api的一些get接口可以通过jsonp的方式来访问(《<a href="http://js8.in/548.html">通过JSONP实现完美跨域</a>》)，这样就大大的提高了接口的可用性，即使不使用jsSDK我们也可以自己调用接口。例如使用jQuery的getJSON方法。</p>
<h3>jsSDk常用操作打包</h3>
<p>下面的代码是我写的基于jQuery的jsSKD常用操作的一些方法，希望对即将开发微博应用的同学有用：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
</pre></td><td class="code"><pre>
<span class="keyword">var</span> $api_url = <span class="string">"http://api.t.sina.com.cn/"</span>,
	$app_key = <span class="string">'你的key'</span>;
<span class="comment">//载入JS-SDK</span>
WB.core.load([<span class="string">'connect'</span>, <span class="string">'client'</span>], <span class="keyword">function</span>() {
    <span class="keyword">var</span> cfg = {
        key: $app_key,
        xdpath: <span class="string">'http://'</span>+location.host+<span class="string">'/xd.html'</span>
    };
    WB.connect.init(cfg);
    WB.client.init(cfg);
});
(<span class="keyword">function</span>(){
	<span class="keyword">var</span> uid = <span class="number">0</span>;
	<span class="comment">/**
	 * 登陆函数
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> login=<span class="keyword">function</span>(back){
		back = back|| <span class="keyword">function</span>(){};
		WB.connect.login(<span class="keyword">function</span>(){
			back();
		});
	};
	<span class="comment">/**
	 * 退出函数
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> logout = <span class="keyword">function</span>(back){
		WB.connect.logout(<span class="keyword">function</span>(){
			location.reload();
		});
	};
	<span class="comment">/**
	 * 添加粉丝
	 * @param {Object} uid 用户id
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> addFans = <span class="keyword">function</span>(uid,back){
		back = back || <span class="keyword">function</span>(){};
		WB.client.parseCMD(<span class="string">"/friendships/create.json"</span>, <span class="keyword">function</span>(o, s){
			<span class="keyword">if</span> (s) {
				back.call({},o);
			}
		}, {user_id:uid});

	};
	<span class="comment">/**
	 * 取消一个关注函数
	 * @param {Object} uid 用户id
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> delFollow = <span class="keyword">function</span>(uid,back){
		back = back || <span class="keyword">function</span>(){};
		WB.client.parseCMD(<span class="string">"/friendships/destroy.json"</span>, <span class="keyword">function</span>(o, s){
			<span class="keyword">if</span> (s) {
				back.call({},o);
			}
		}, {user_id:uid});
	};
	<span class="comment">/**
	 * 删除一条微博
	 * @param {Object} id 微博id
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> delWeibo = <span class="keyword">function</span>(id,back){
		back = back || <span class="keyword">function</span>(){};
		WB.client.parseCMD(<span class="string">"/statuses/destroy/"</span>+id+<span class="string">".json"</span>, <span class="keyword">function</span>(sResult, bStatus){
			<span class="keyword">if</span> (bStatus) {
				back.call({},sResult);
			}

		}, {id:id});
	};
	<span class="comment">/**
	 * 根据uid获取用户信息
	 * @param {Object} uid 用户ID
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> getUserInfo = <span class="keyword">function</span>(uid,back){
		back = back || <span class="keyword">function</span>(){};
		$.getJSON($api_url+<span class="string">"users/show.json?callback=?"</span>, {source:$app_key,user_id:uid}, <span class="keyword">function</span>(o){
			back.call({},o);
		});
	};
	<span class="comment">/**
	 * 获取用户认证函数
	 * 登陆后使用
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> verfiy = <span class="keyword">function</span>(back){
		back = back || <span class="keyword">function</span>(){};
		$.getJSON($api_url+<span class="string">"account/verify_credentials.json?callback=?"</span>, {source:$app_key}, <span class="keyword">function</span>(o){
			uid = o.id;
			back.call({},o);
		});
	};
	<span class="comment">/**
	 * 是否登陆
	 * 登陆return true
	 */</span>
	<span class="keyword">var</span> isLogin = <span class="keyword">function</span>(){
		<span class="keyword">return</span> WB.connect.checkLogin();
	};
	<span class="comment">/**
	 * 是否接口访问是否受限
	 * 受限return true
	 */</span>
	<span class="keyword">var</span> isLimit = <span class="keyword">function</span>(){
		$.getJSON($api_url+<span class="string">"account/rate_limit_status.json?callback=?"</span>, {source:$app_key}, <span class="keyword">function</span>(o){
			<span class="comment">//超出限制</span>
			<span class="keyword">if</span>(!o || o.remaining_hits &lt;=<span class="number">5</span>){
				<span class="keyword">return</span> <span class="literal">true</span>;
			}
			<span class="keyword">return</span> <span class="literal">false</span>;
		});
	};
	<span class="comment">/**
	 * 根据uid获取用户发的微博
	 * @param {Object} uid 用户ID
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> getWeibo = <span class="keyword">function</span>(uid,count,page,back){
		count = count||<span class="number">20</span>;
		page = page || <span class="number">1</span>;
		back = back||<span class="keyword">function</span>(){};
		$.getJSON($api_url+<span class="string">"statuses/user_timeline.json?callback=?"</span>, {source:$app_key,page:page,count:count,user_id:uid}, <span class="keyword">function</span>(json){
			back.call({},json);
		});
	};
	<span class="comment">/**
	 * 根据uid获取用户的粉丝及其最新的微博
	 * @param {Object} uid 用户uid
	 * @param {Object} count 条数
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> getFollower = <span class="keyword">function</span>(uid,count,back){
		back = back||<span class="keyword">function</span>(){};
		count = count || <span class="number">20</span>;
		$.getJSON($api_url+<span class="string">"statuses/followers.json?callback=?"</span>, {source:$app_key,user_id:uid,count:count}, <span class="keyword">function</span>(json){
			back.call({},json);
		});
	};
	<span class="comment">/**
	 * 根据uid获取用户的关注列表包括最新的微博
	 * @param {Object} uid 用户uid
	 * @param {Object} count 条数
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> getFriends = <span class="keyword">function</span>(uid,count,back){
		back = back||<span class="keyword">function</span>(){};
		count = count || <span class="number">20</span>;
		$.getJSON($api_url+<span class="string">"statuses/friends.json?callback=?"</span>, {source:$app_key,user_id:uid,count:count}, <span class="keyword">function</span>(json){
			back.call({},json);
		});
	};
	<span class="comment">/**
	 * 发布一条微博
	 * @param {Object} msg 微博内容
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> publish = <span class="keyword">function</span>(msg,back){
		back = back || <span class="keyword">function</span>(){};
		WB.client.parseCMD(<span class="string">"/statuses/update.json"</span>, <span class="keyword">function</span>(o, s) {	<span class="comment">//开始发表</span>
			<span class="keyword">if</span>(s){
				back.call({},o);
			}
		}, {status:encodeURIComponent(msg)});
	};
	<span class="comment">/**
	 * 获取public timeline
	 * @param {Object} count 条数
	 * @param {Object} back callback函数
	 * @param {Object} base_app 是否为本应用的
	 */</span>
	<span class="keyword">var</span> getTimeLine = <span class="keyword">function</span>(count,back,base_app){
		back = back||<span class="keyword">function</span>(){};
		count = count || <span class="number">20</span>;
		base_app = base_app || <span class="number">0</span>;
		$.getJSON($api_url+<span class="string">"statuses/public_timeline.json?callback=?"</span>, {source:$app_key,base_app:base_app,count:count}, <span class="keyword">function</span>(json){
			back.call({},json);
		});
	};
	<span class="comment">/**
	 * 根据uid获取关注用户的uid数组
	 * @param {Object} uid 用户uid
	 * @param {Object} count 条数
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> getFriendUids = <span class="keyword">function</span>(uid,count,back){
		back = back||<span class="keyword">function</span>(){};
		count = count || <span class="number">20</span>;
		base_app = base_app || <span class="number">0</span>;
		$.getJSON($api_url+<span class="string">"friends/ids.json?callback=?"</span>, {source:$app_key,user_id:uid,count:count}, <span class="keyword">function</span>(json){
			back.call({},json);
		});
	};
	<span class="comment">/**
	 * 根据uid 获取粉丝的uid数组
	 * @param {Object} uid 用户的uid
	 * @param {Object} count 条数
	 * @param {Object} back callback函数
	 */</span>
	<span class="keyword">var</span> getFollowerUids = <span class="keyword">function</span>(uid,count,back){
		back = back||<span class="keyword">function</span>(){};
		count = count || <span class="number">20</span>;
		base_app = base_app || <span class="number">0</span>;
		$.getJSON($api_url+<span class="string">"followers/ids.json?callback=?"</span>, {source:$app_key,user_id:uid,count:count}, <span class="keyword">function</span>(json){
			back.call({},json);
		});
	};
})();
</pre></td></tr></table></figure>

<h3>关于新浪微博开发的其他资源</h3>
<ol>
<li>《<a href="http://js8.in/627.html">新浪微博应用开发之一：授权机制介绍</a>》</li>
<li>《<a href="http://js8.in/633.html">Sina App Engine开发实例：天气预报的定时短信（一）</a>》</li>
<li>《<a href="http://js8.in/634.html">Sina App Engine开发实例：天气预报的定时短信（二）</a>》</li>
<li>《<a href="http://js8.in/634.html">天气预报的定时短信（二）</a>》</li>
</ol>

      
    </div>
    <footer>
      
        


        
<div id="bdshare" class="bdshare_t bds_tools get-codes-bdshare">
<span class="bds_more">分享到：</span>
<a class="bds_tsina">新浪微博</a>
<a class="bds_qzone">QQ空间</a>
<a class="bds_tqq">腾讯微博</a>
<a class="bds_renren">人人网</a>
<a class="bds_douban">豆瓣网</a>
<a class="bds_bdhome">百度首页</a>
<a class="bds_youdao">有道云笔记</a>
<a class="bds_copy">复制网址</a>
</div>
<script>
var bds_config = {
    wbUid:'2037334587',
    tsina: '61439547',
    pic:''
};
</script>



        <div class="pagepart clearfix">
 
	<a href="/2011/07/13/javascript事件：获取事件对象getevent函数/" class="prev" title="javascript事件：获取事件对象getEvent函数">javascript事件：获取事件对象getEvent函数</a>
 
 
	<a href="/2011/06/20/javascript继承的写法/" class="next" title="javascript继承的写法">javascript继承的写法</a>
 
</div>
      
      
<div class="border"></div>
<section class="comment">
    <p class="title ico-comment">文章评论<a name="comments"></a></p>
    <div class="ds-thread" data-title="新浪微博jsSDK操作指南"></div>
</section>


      <div class="clearfix"></div>
    </footer>
  </div>
</article>


</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/乱七八糟/">乱七八糟</a><small>30</small></li>
  
    <li><a href="/categories/前端开发/">前端开发</a><small>117</small></li>
  
    <li><a href="/categories/后端运维/">后端运维</a><small>27</small></li>
  
    <li><a href="/categories/王婆卖瓜/">王婆卖瓜</a><small>4</small></li>
  
    <li><a href="/categories/读书笔记/">读书笔记</a><small>5</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签</h3>
  <ul class="entry clearfix">
  
    <li><a href="/tags/DOM/">DOM<sup>2</sup></a></li>
  
    <li><a href="/tags/IE/">IE<sup>1</sup></a></li>
  
    <li><a href="/tags/IE6/">IE6<sup>2</sup></a></li>
  
    <li><a href="/tags/PPT/">PPT<sup>3</sup></a></li>
  
    <li><a href="/tags/VPS/">VPS<sup>1</sup></a></li>
  
    <li><a href="/tags/ajax/">ajax<sup>5</sup></a></li>
  
    <li><a href="/tags/apache/">apache<sup>1</sup></a></li>
  
    <li><a href="/tags/audio/">audio<sup>2</sup></a></li>
  
    <li><a href="/tags/a标签/">a标签<sup>1</sup></a></li>
  
    <li><a href="/tags/canvas/">canvas<sup>1</sup></a></li>
  
    <li><a href="/tags/chrome/">chrome<sup>3</sup></a></li>
  
    <li><a href="/tags/css/">css<sup>15</sup></a></li>
  
    <li><a href="/tags/eAccelerator/">eAccelerator<sup>1</sup></a></li>
  
    <li><a href="/tags/ecmascript/">ecmascript<sup>3</sup></a></li>
  
    <li><a href="/tags/escape/">escape<sup>1</sup></a></li>
  
    <li><a href="/tags/event/">event<sup>1</sup></a></li>
  
    <li><a href="/tags/express/">express<sup>1</sup></a></li>
  
    <li><a href="/tags/fis/">fis<sup>1</sup></a></li>
  
    <li><a href="/tags/fisp/">fisp<sup>1</sup></a></li>
  
    <li><a href="/tags/grunt/">grunt<sup>1</sup></a></li>
  
    <li><a href="/tags/handleEvent/">handleEvent<sup>1</sup></a></li>
  
    <li><a href="/tags/html5/">html5<sup>3</sup></a></li>
  
    <li><a href="/tags/iframe/">iframe<sup>1</sup></a></li>
  
    <li><a href="/tags/iptables/">iptables<sup>1</sup></a></li>
  
    <li><a href="/tags/javascript/">javascript<sup>79</sup></a></li>
  
    <li><a href="/tags/linux/">linux<sup>4</sup></a></li>
  
    <li><a href="/tags/livereload/">livereload<sup>1</sup></a></li>
  
    <li><a href="/tags/memcached/">memcached<sup>1</sup></a></li>
  
    <li><a href="/tags/mixjs/">mixjs<sup>1</sup></a></li>
  
    <li><a href="/tags/mysql/">mysql<sup>2</sup></a></li>
  
    <li><a href="/tags/name/">name<sup>1</sup></a></li>
  
    <li><a href="/tags/nginx/">nginx<sup>2</sup></a></li>
  
    <li><a href="/tags/nodejs/">nodejs<sup>7</sup></a></li>
  
    <li><a href="/tags/php/">php<sup>19</sup></a></li>
  
    <li><a href="/tags/session/">session<sup>1</sup></a></li>
  
    <li><a href="/tags/storage/">storage<sup>1</sup></a></li>
  
    <li><a href="/tags/svn/">svn<sup>1</sup></a></li>
  
    <li><a href="/tags/this/">this<sup>1</sup></a></li>
  
    <li><a href="/tags/ueditor/">ueditor<sup>1</sup></a></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs<sup>1</sup></a></li>
  
    <li><a href="/tags/webbench/">webbench<sup>1</sup></a></li>
  
    <li><a href="/tags/websocket/">websocket<sup>1</sup></a></li>
  
    <li><a href="/tags/web前端开发/">web前端开发<sup>5</sup></a></li>
  
    <li><a href="/tags/windows7技巧/">windows7技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/wordpress/">wordpress<sup>3</sup></a></li>
  
    <li><a href="/tags/xss/">xss<sup>3</sup></a></li>
  
    <li><a href="/tags/严格模式/">严格模式<sup>1</sup></a></li>
  
    <li><a href="/tags/位运算/">位运算<sup>1</sup></a></li>
  
    <li><a href="/tags/作用域/">作用域<sup>3</sup></a></li>
  
    <li><a href="/tags/前端优化/">前端优化<sup>1</sup></a></li>
  
    <li><a href="/tags/前端工具/">前端工具<sup>5</sup></a></li>
  
    <li><a href="/tags/加速器/">加速器<sup>1</sup></a></li>
  
    <li><a href="/tags/压力测试/">压力测试<sup>1</sup></a></li>
  
    <li><a href="/tags/右键/">右键<sup>1</sup></a></li>
  
    <li><a href="/tags/安全/">安全<sup>1</sup></a></li>
  
    <li><a href="/tags/性能/">性能<sup>3</sup></a></li>
  
    <li><a href="/tags/我也八卦/">我也八卦<sup>1</sup></a></li>
  
    <li><a href="/tags/执行环境/">执行环境<sup>1</sup></a></li>
  
    <li><a href="/tags/技巧/">技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/播放器/">播放器<sup>1</sup></a></li>
  
    <li><a href="/tags/数组/">数组<sup>1</sup></a></li>
  
    <li><a href="/tags/标签/">标签<sup>1</sup></a></li>
  
    <li><a href="/tags/模块化/">模块化<sup>2</sup></a></li>
  
    <li><a href="/tags/算法/">算法<sup>1</sup></a></li>
  
    <li><a href="/tags/网络技术/">网络技术<sup>73</sup></a></li>
  
    <li><a href="/tags/虚拟主机/">虚拟主机<sup>1</sup></a></li>
  
    <li><a href="/tags/解耦/">解耦<sup>1</sup></a></li>
  
    <li><a href="/tags/语法限制/">语法限制<sup>1</sup></a></li>
  
    <li><a href="/tags/跨域/">跨域<sup>3</sup></a></li>
  
    <li><a href="/tags/路径/">路径<sup>1</sup></a></li>
  
    <li><a href="/tags/软件心得/">软件心得<sup>3</sup></a></li>
  
  </ul>
</div>



  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 三水清
  
</div>
<div class="clearfix"></div></footer>
  <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


    
        <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6635976" ></script>
        <script type="text/javascript" id="bdshell_js"></script>
        <script type="text/javascript">
        document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
        </script>
    
    
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"ksky521"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = 'http://static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1c76f5cc8274a56106b13b9c9b1fb046' type='text/javascript'%3E%3C/script%3E"));
    </script>


</body>
</html>