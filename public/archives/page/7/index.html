<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 7 页 - 归档 - 三水清</title>
  <meta name="author" content="三水清">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="三水清"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="atom.xml" title="三水清" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">三水清</a></h1>
  <h2><a href="/">专注前端开发,分享Javascript/CSS/PHP等Web前端开发技巧</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="https://github.com/ksky521">Github</a></li>
    
      <li><a href="http://weibo.com/sanshuiqing">新浪微博</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">归档</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/08/05/ie的fireevent方法/">IE的fireEvent方法</a></h1>
  

      <time datetime="2011-08-04T19:51:20.000Z"><a href="/2011/08/05/ie的fireevent方法/">2011年8月5日</a></time>
    </header>
    <div class="entry">
      
        <p>在IE中提供了一个<strong>fireEvent</strong>方法，顾名思义就是触发某个事件发生的意思。刚开始我以为是会跟平时使用<code>onclick()</code>一样，没想到最近在写javascript入门ppt的时候发现了，原来自己太自以为是了！看来还有很多javascript的细节没有掌握好啊！</p>
<p>现在根据自己的总结详细的记录下fireEvent方法的使用。fireEvent是IE提供的一种方法，msdn文档地址：<a href="http://msdn.microsoft.com/en-us/library/ms536423(v=vs.85).aspx" target="_blank">http://msdn.microsoft.com/en-us/library/ms536423(v=vs.85).aspx</a></p>
<h3>onclick()</h3>
<p>我们先看第一段实例代码：</p>
<pre lang="html">

*   i am one;
*   i am two;
*   i am three;
<button onclick='document.getElementById("id1").onclick();'>click me!</button>
</pre>
这段代码中我们没有个id1的li添加onclick事件，点击button，会报错，提示“对象不支持此属性或方法”。由此可见，DOM.onclick()需要添加onclick事件之后才能使用。

假如我们把以上的代码修改为：
<pre lang="html">

*   i am one;
*   i am two;
*   i am three;
<button onclick='document.getElementById("id1").onclick();'>click me!</button>
</pre>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/08/05/ie的fireevent方法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/08/03/javascript匿名函数/">javascript匿名函数</a></h1>
  

      <time datetime="2011-08-02T21:47:48.000Z"><a href="/2011/08/03/javascript匿名函数/">2011年8月3日</a></time>
    </header>
    <div class="entry">
      
        <p>今天在整理javascript入门培训的PPT时，提到了<strong>匿名函数</strong>，所以拿来分享下心得。</p>
<h3>匿名函数的写法</h3>
<p>顾名思义，就是没有名字的函数（⊙﹏⊙b汗）。匿名函数通常用于javascript作用域的控制，可以有效的避免对全局变量的污染。常见的匿名函数有下面四种写法，欢迎补充：</p>
<h4>匿名函数写法一</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
(<span class="keyword">function</span>(){
	<span class="comment">//do something</span>
})();
</pre></td></tr></table></figure>

<h4>匿名函数写法二</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
!<span class="keyword">function</span>(){
	<span class="comment">//do something</span>
}();
</pre></td></tr></table></figure>

<p>上面!还可以写成+，!!等多种方式。<br>上面两种方法是我常用的，下面两种方法是google上找的，我没用过（好吧，我out啦）。</p>
<h4>匿名函数写法三</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
(<span class="keyword">function</span>(){
	<span class="comment">//do something</span>
}());
</pre></td></tr></table></figure>

<h4>匿名函数写法四</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="keyword">void</span> <span class="keyword">function</span>(){
	<span class="comment">//do something</span>
}();
</pre></td></tr></table></figure>

<p>刚才微博上@朴灵 提出来：写法三比较安全，正如网友@Rain的留言，匿名函数上面的写法都存在前后文;问题，所以需要注意的是匿名函数在压缩工具打包压缩后会出现上下文错误合并()的问题，例如第一种写法，如果下面的代码，未压缩之前是正常的，压缩后就不正常了，所以要严格上下文的;问题，而第三种就不会出现类似问题：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
<span class="keyword">var</span> a = <span class="keyword">function</span>(){}
(<span class="keyword">function</span>(){
	alert(<span class="number">1</span>);
})();
</pre></td></tr></table></figure>

<p>上例中就出现了错误，这就是因为a函数会把他后面的匿名函数作为参数传入a中，这也就解释了为什么有人习惯在匿名函数之前添加;了，就是为了防止上文没有严格遵循javascript语法，漏掉;的问题。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/08/03/javascript匿名函数/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/07/20/ie6中a标签location-href失效解决方法/">IE6中a标签location.href失效解决方法</a></h1>
  

      <time datetime="2011-07-19T23:00:51.000Z"><a href="/2011/07/20/ie6中a标签location-href失效解决方法/">2011年7月20日</a></time>
    </header>
    <div class="entry">
      
        <p>今天遇见IE6一个<strong>location.href</strong>的bug，具体情况是这样的，IE6下，在a标签中，将href写成<code>javascript:;``javascript:void(0);</code>，并且给这个标签绑定onclick事件，点击后，执行location.href实现页面跳转，例如下面的代码：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>[点击跳转](javascitp:;)
</pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
[点击跳转](javascitp:void(0);)
</pre></td></tr></table></figure>

<p>toURL函数的代码如下所示：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">toURL</span><span class="params">()</span>{</span>
	location.href = <span class="string">"http://js8.in"</span>;
}
</pre></td></tr></table></figure>

<p>这样在非IE6浏览器下都可以使用，但是在IE6下就是跳转不了，而且不报错，在location.href之后的代码，例如（alert(1);）也是执行的。</p>
<h3>IE6下location.href失效解决的方法</h3>
<p>解决IE6中a标签中location.href失效的方式就是a标签中的href不用使用<code>javascript:;</code>或<code>javascript:void(0);</code>。具体原因还不清楚，不过我们可以使用href=“#”来代替。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/07/20/ie6中a标签location-href失效解决方法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/07/13/javascript事件：获取事件对象getevent函数/">javascript事件：获取事件对象getEvent函数</a></h1>
  

      <time datetime="2011-07-12T20:11:59.000Z"><a href="/2011/07/13/javascript事件：获取事件对象getevent函数/">2011年7月13日</a></time>
    </header>
    <div class="entry">
      
        <p>在<strong>javascript</strong>开发中我们会经常获取页面中的事件对象，然后来处理这些事件，例如下面的<strong>getEvent</strong>函数就是获取javascript下的页面事件对象。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">getEvent</span><span class="params">(event)</span>{</span>
	<span class="keyword">return</span> event || window.event;
}
</pre></td></tr></table></figure>

<p>我们使用getEvent的时候可以这样调用。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(event)</span>{</span>
	<span class="keyword">var</span> evt = getEvent(event);
	alert(evt);
}
</pre></td></tr></table></figure>

<p>并且把foo函数绑定到一个onclick事件上。<br>但是常用的是foo函数不会有参数，或者第一个参数没有传入，我们可以通过<code>arguments[0]</code>来获取第一个参数。<br>在IE中event是一个全局变量，即<code>window.event</code>，而在Firefox等浏览器，事件会作为第一个参数传入foo函数，所以getEvent可以改为：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">getEvent</span><span class="params">(event)</span>{</span>
	<span class="keyword">return</span> arguments[<span class="number">0</span>] || window.event;
}
</pre></td></tr></table></figure>

<p>这时在一些版本的浏览器，例如Firefox 中会出现获取不到event对象的问题，其实我们可以看成事件的触发是下面的方式：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">onclick</span><span class="params">(event)</span> {</span>
    foo();
}
</pre></td></tr></table></figure>

<p>这样，第一个函数是onclick，即event会默认作为第一个参数传入，而foo函数没有将event作为参数传入，这样严重限制了getEvent的灵活性，所以我们需要修改下<strong>getEvent</strong>函数。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/07/13/javascript事件：获取事件对象getevent函数/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/07/07/新浪微博jssdk操作指南/">新浪微博jsSDK操作指南</a></h1>
  

      <time datetime="2011-07-07T12:32:41.000Z"><a href="/2011/07/07/新浪微博jssdk操作指南/">2011年7月7日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>新浪微博</strong>的开放平台提供了<strong>jsSDK</strong>的方法，但是很多人反映不会使用，这里最关键的一点是不会放跨域文件。<br>的确，我也承认开放平台的开发文档写的不是很详细，比如对于一些接口是使用REST的，要人云里雾里，而对于REST的介绍却很隐晦，我也是尝试了几次才找到的方法（例如删除微博接口）。<br>下面简单说说jsSDK的操作。</p>
<h3>放置跨域文件</h3>
<p>为了实现跨域请求api的接口，我们需要在自己的域名下放置一个xd.html的文件，这个文件可以理解成在你网站做代理的，通过它才可以请求道api.t.sina.com.cn的内容。感兴趣的童靴可以研究下这种跨域的实现方式，国内的人人、腾讯，国外的facebook都是这种跨域方式。</p>
<p>基本原理是通过html5的postMessage和window.name来实现跨域。其实如果进一步研究是完全可以不要这个跨域文件的！相信下一个版本的JSSDK不会出现跨域文件来误导大家。<br><strong>跨域文件</strong>放置要点</p>
<ol>
<li>放置来应用的同域名下，例如你的应用网址是js8.in，则你的xd.html文件就要放在js8.in域名下</li>
<li>不一定是根目录下，因为可以通过jsSDK中的<code>xdpath</code>来传入xd.html路径，默认是根目录，即js8.in/xd.html
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/07/07/新浪微博jssdk操作指南/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/06/20/javascript继承的写法/">javascript继承的写法</a></h1>
  

      <time datetime="2011-06-19T20:38:21.000Z"><a href="/2011/06/20/javascript继承的写法/">2011年6月20日</a></time>
    </header>
    <div class="entry">
      
        <p>严格来说<strong>javascript</strong>是基于对象而不是面向对象的语言，因为javascript没有像java语言那么丰富的类、继承、封装，但是javascript是基于原型（prototype）的面向对象开发，是一种动态、弱类型、基于原型的语言。前几天看了阿里UED的《重温<strong>javascript继承</strong>机制》，今天重新看了，很有感触，特地转载了重要的部分，记录一下，下次有需要的时候还要重新看一下！的确是不错的一篇文章。</p>
<h3>继承的演变</h3>
<h4>1、采用new关键字生成实例</h4>
<p>处理表单验证这样简单功能脚本语言显然是不需要”继承”机制的，然而如果Javascript里面都是对象，就需要有一种办法来把所有对象联系起来。最后，Brendan Eich还是设计了”继承”。只是，他并没有引入”类”（class）的概念，因为一旦有了”类”，Javascript就是一种完整的面向对象编程语言了，<br>这好像有点太正式了，与设计初衷也远了，同时增加了初学者的入门难度。<br>参照到C++和Java语言都使用new命令来生成实例：</p>
<p>C++这样写：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
&gt; ClassName *object = <span class="keyword">new</span> ClassName(param);
</pre></td></tr></table></figure>

</blockquote>
<p>Java这样写：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
&gt; Foo foo = <span class="keyword">new</span> Foo();
</pre></td></tr></table></figure>

</blockquote>
<p>那么，也可以把new命令引入了Javascript，用来从原型对象生成一个实例对象。但是，<strong>Javascript</strong>中没有”类”的话，怎样表示原型对象呢？<br>依然是参照C++和Java使用new命令时，都会调用”类”的构造函数（constructor）。Brendan Eich简化了设计，在Javascript语言中，new命令后面跟的是构造函数，不再是类。<br>我们举个例子来说，现在有一个叫做WD构造函数，表示前端开发（web-developper）对象的原型。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">WD</span><span class="params">(skill)</span>{</span>
&gt; 	<span class="keyword">this</span>.skill = skill;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>对这个构造函数使用new关键字，就会生成一个前端开发对象的实例。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>
&gt; <span class="keyword">var</span> WD1 = <span class="keyword">new</span> WD(<span class="string">'html'</span>);
&gt; console.log(WD1.skill); <span class="comment">// html</span>
</pre></td></tr></table></figure>

</blockquote>
<p>在构造函数中的this关键字，它其实代表的是新创建的实例对象。</p>
<h4>2、new 出来对象的缺陷</h4>
<p>采用new关键字，用构造函数生成实例对象无法共享属性和方法。<br>比如，在WD对象的构造函数中，设置一个实例对象的共有属性skill。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">WD</span><span class="params">(skill)</span>{</span>
&gt; 	<span class="keyword">this</span>.skill = skill;
&gt; 	<span class="keyword">this</span>.sex = <span class="string">'男'</span>;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>然后，生成两个实例对象：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>
&gt; <span class="keyword">var</span> WD1 = <span class="keyword">new</span> WD(<span class="string">'html'</span>);
&gt; <span class="keyword">var</span> WD2 = <span class="keyword">new</span> WD(<span class="string">'css'</span>);
</pre></td></tr></table></figure>

</blockquote>
<p>这两个对象的skill属性是独立的，修改其中一个，不会影响到另一个。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>
&gt; WD1.skill= <span class="string">'Javascript'</span>;
&gt; console.log(WD2.skill);<span class="comment">//“css”，不受WD1的影响</span>
</pre></td></tr></table></figure>

</blockquote>
<p>每一个实例对象，都有自己的属性和方法的副本。这不仅无法做到数据共享，也是极大的资源浪费。</p>
<h4>3、引入prototype属性</h4>
<p>为了实现属性和方法的共享，Brendan Eich决定为构造函数设置一个prototype属性。<br>这个属性包含一个对象（以下简称”prototype对象”），所有实例对象需要共享的属性和方法，都放在这个对象里面；那些不需要共享的属性和方法，就放在构造函数里面。<br>实例对象一旦创建，将自动引用prototype对象的属性和方法。也就是说，实例对象的属性和方法，分成两种，一种是本地的，另一种是引用的。<br>还是以WD构造函数为例，现在用prototype属性进行改写：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">WD</span><span class="params">(skill)</span>{</span>
&gt; 	<span class="keyword">this</span>.skill = skill;
&gt; }
&gt; 
&gt; WD.prototype = { sex : <span class="string">'男'</span> };
&gt; 
&gt; <span class="keyword">var</span> WD1 = <span class="keyword">new</span> WD(<span class="string">'html'</span>);
&gt; <span class="keyword">var</span> WD2 = <span class="keyword">new</span> WD(<span class="string">'css'</span>);
&gt; 
&gt; console.log(WD1.sex); <span class="comment">// 男</span>
&gt; console.log(WD2.sex); <span class="comment">// 男</span>
</pre></td></tr></table></figure>

</blockquote>
<p>现在，sex属性放在prototype对象里，是两个实例对象共享的。只要修改了prototype对象，就会同时影响到两个实例对象。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
&gt; WD.prototype.sex = <span class="string">'女'</span>;
&gt; console.log(WD1.sex); <span class="comment">//女</span>
&gt; console.log(WD2.sex); <span class="comment">// 女</span>
</pre></td></tr></table></figure>

</blockquote>
<p>由于所有的实例对象共享同一个prototype对象，那么从外界看起来，prototype对象就好像是实例对象的原型，而实例对象则好像”继承”了prototype对象一样。这就是Javascript继承机制的设计思想。</p>
<h3>三、构造函数如何实现继承</h3>
<p>现在有一个”MED”对象的构造函数（MED:Marketing Experience Design,营销体验设计）</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">MED</span><span class="params">()</span>{</span>
&gt; 	<span class="keyword">this</span>.aim = <span class="string">"营销体验设计"</span>;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>依然是”WD”对象的构造函数，</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">WD</span><span class="params">(skill,sex)</span>{</span>
&gt; 	<span class="keyword">this</span>.skill = skill;
&gt; 	<span class="keyword">this</span>.sex = sex;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>怎样才能使”WD”继承”MED”呢？<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/06/20/javascript继承的写法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/06/13/json_encode数组出现unicode-uxxxx的解决方案/">json_encode数组出现unicode \uxxxx的解决方案</a></h1>
  

      <time datetime="2011-06-13T15:16:15.000Z"><a href="/2011/06/13/json_encode数组出现unicode-uxxxx的解决方案/">2011年6月13日</a></time>
    </header>
    <div class="entry">
      
        <p>端午和上个周末做的微博应用<a href="//dali.sinaapp.com">送大礼</a>中设计到ajax返回json的数据格式中，我没有完全使用PHP默认的<strong>json_encode</strong>来编码，因为这样编码出来的是unicode编码的，也就是\u的编码，虽然unicode编码可以在不同的页面中编码不会出现乱码问题。但是一个汉字编码成unicode会变成\u+4个字符，这样在字符长度上要比汉字多。</p>
<p>因为我的php文件和html声明中都是使用的UTF-8，不会出现编码乱码问题，所以就放弃了直接使用json_encode的方法，而是把汉字先<strong>urlencode</strong>然后再使用json_encode，json_encode之后再次使用urldecode来解码，这样编码出来的json数组中的汉字就不会出现unicode编码了~<br>代码如下</p>
<figure class="highlight lang-php"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="comment">//默认为：{"test":"\u6211\u662f\u6d4b\u8bd5"}</span>
<span class="variable">$array</span> = <span class="keyword">array</span>(
	<span class="string">'test'</span>=&gt;urlencode(<span class="string">"我是测试"</span>)
);
<span class="variable">$array</span> = json_encode(<span class="variable">$array</span>);
<span class="keyword">echo</span> urldecode(<span class="variable">$array</span>);
<span class="comment">//{"test":"我是测试"}</span>
</pre></td></tr></table></figure>

<p>此举主要是为了节省传输字符数，因为我的<a href="//dali.sinaapp.com">送大礼</a>默认会引入几百个好友信息，对于数据的流量还是比较大的~所以采用汉字传输要比unicode字符编码传输要节省带宽~而且处理好了页面编码问题，不会出现乱码现象。</p>
<h3>json_encode出null的问题</h3>
<p>如果文档编码或者字符串编码（例如UTF-8抓取了一个GBK页面）为非UTF-8，就会出现json_encode编码失败的问题，变现为输出汉字为null。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/06/13/json_encode数组出现unicode-uxxxx的解决方案/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/05/20/nodelist集合跟array数组的区别/">NodeList集合跟Array数组的区别</a></h1>
  

      <time datetime="2011-05-20T09:27:16.000Z"><a href="/2011/05/20/nodelist集合跟array数组的区别/">2011年5月20日</a></time>
    </header>
    <div class="entry">
      
        <p>首先来看看什么是<strong>NodeList</strong>，NodeList跟arguments都不是普通的数组，他们有数组的一些基本属性但是又不完全是数组。下面是在<a href="https://developer.mozilla.org/En/DOM/NodeList" target="_blank">Mozilla</a>上面找到的定义：</p>
<blockquote>
<p>This is a commonly used type which is a collection of nodes returned by getElementsByTagName, getElementsByTagNameNS, and Node.childNodes. The list is live, so changes to it internally or externally will cause the items they reference to be updated as well. Unlike NamedNodeMap, NodeList maintains a particular order (document order). The nodes in a NodeList are indexed starting with zero, similarly to JavaScript arrays, but a NodeList is not an array.<br>由字面意思来看<strong>NodeList</strong>是DOM操作（getElementsByTagName等）取出来的集合，是集合而不是普通的数组，但是他们有数组的一些属性，例如length、下标索引，但是他们也有自己的属性，例如item，另外NodeList最大的特点就是时效性（live）。</p>
</blockquote>
<h3>NodeList的时效性</h3>
<p>我们来看下面的代码：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>

*   index0
*   index1
*   index2
*   index3
*   index4
</pre></td></tr></table></figure>

<p>javascript代码如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>
<span class="keyword">var</span> myUl = document.getElementById(<span class="string">'nodelist'</span>);
<span class="keyword">var</span> lis = myUl.getElementsByTagName(<span class="string">'li'</span>);
</pre></td></tr></table></figure>

<p>lis是一个NodeList集合，具有时效性，所谓的时效性就是我们在修改li的同时，会反映到lis上来，这与array是不同的，例如我们把第一个li插入到ul的底部，那么lis也会发生相应的变化：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="comment">//把第一个li插入的ul的底部</span>
myUl.appendChild(myUl.getElementsByTagName(<span class="string">'li'</span>).item(<span class="number">0</span>));
console.log(lis[<span class="number">0</span>]);<span class="comment">//输出的是原来ul的第二个li</span>
</pre></td></tr></table></figure>

<p>所以我们应该在写代码的时候注意<strong>NodeList</strong>的时效性，不然就会犯一些错误，
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/05/20/nodelist集合跟array数组的区别/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/05/18/使用windows7的virtual-pc打造原装ie6、ie7、ie8测试环境/">使用windows7的virtual PC打造原装IE6、IE7、IE8测试环境</a></h1>
  

      <time datetime="2011-05-17T20:38:49.000Z"><a href="/2011/05/18/使用windows7的virtual-pc打造原装ie6、ie7、ie8测试环境/">2011年5月18日</a></time>
    </header>
    <div class="entry">
      
        <p>公司使用的是windows7操作系统，自己之前一直使用IETester来测试页面在IE6~IE8下的兼容性，可是在测试js的时候还是会出现实际使用的还是windows7的IE8内核问题。<br>所以自己想通过<strong>virtual PC</strong>来搭建个虚拟的测试环境，为什么选择virtual PC呢？<br>1、windows 7系统自带，并且xp mode就可以直接安装上xp系统<br>2、windows 7支持自动发布功能，即不启动虚拟机的情况也可以在xp下运行相应的程序，节省内存开销</p>
<h3>安装虚拟机</h3>
<p>第一步是安装xp MODE，这个网上很多教程，很简单我们就安装了带有IE6的xp系统了，并且可以把IE6发布到windows7上去运行<br>第二步是创建第二个虚拟机，也就是带IE7的xp虚拟机，我先找了个sp2的xp安装上了（可以在设置里面添加ISO），可是不支持自动发布，当我查看帮助文件的时候发现原来只用sp3以上的系统才支持自动发布，于是先升级sp3,。<br>升级sp3的时候悲剧了，因为一开始设置的虚拟硬盘大小是3G，导致sp3升级包升级的时候显示磁盘不足，试了很多扩展虚拟硬盘的方法都是不行，只有重新删除硬盘再次创建一个大点的硬盘，这次我创建的虚拟硬盘大小是5G，安装sp2，然后安装sp3，之后就是安装集成系统。<br>一切就绪了，可是还是不支持自动发布功能，后来在帮助里面发现了原来sp3还是要安装一个补丁的，即（<a href="http://www.microsoft.com/downloads/zh-cn/details.aspx?FamilyID=e5433d88-685f-4036-b435-570ff53598cd&amp;displaylang=zh-cn" target="_blank">Windows® XP SP3 用于启用 RemoteApp™ 的更新</a> ）<br>安装补丁之后终于可以了！<br>下面是截图：</p>
<p><a href="http://js8.in/688.html/2011-05-18_101406"><img src="/uploads/2011/05/2011-05-18_101406-300x191.png" alt="使用windows7的virtual PC打造原装IE6、IE7、IE8环境" title="使用windows7的virtual PC打造原装IE6、IE7、IE8环境"></a><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/05/18/使用windows7的virtual-pc打造原装ie6、ie7、ie8测试环境/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/05/13/ie6下javascript不能隐藏select标签的bug/">IE6下javascript不能隐藏select标签的bug</a></h1>
  

      <time datetime="2011-05-13T15:50:57.000Z"><a href="/2011/05/13/ie6下javascript不能隐藏select标签的bug/">2011年5月13日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天做了一个简单的项目，要求有三级联动的select菜单，可是伤不起的IE6下就出现了<strong>不能隐藏select</strong>的bug，之前我也介绍过IE6下select层高的问题，可以通过隐藏select或者<a href="http://js8.in/553.html" title="解决IE6 select z-index无效，遮挡div的bug">使用iframe遮挡</a>的方式来解决，今天的bug不同以前，大家如果在用js控制select显示隐藏的时候可能会经常遇到，调试一下午终于找到了解决的方案，特此记录一下。</p>
<h3>IE6不能隐藏select重现代码</h3>
<p>建立两个关联的select，通过javascript控制第一个select 发生变化后，第二个select根据第一个value重新添加options，如果为空则隐藏第二个select（示例中判断除第一个之外都隐藏），则由第一个select的第三个value切换到第二个value则第二个select就不会隐藏。<br>具体效果见下面的实例：</p>
<p><a href="//js8.in/mywork/ie6selectbug.html">IE6 select隐藏bug</a></p>
<h3>IE6下不能隐藏select标签解决方案</h3>
<ol>
<li>可以通过先设置select为显示，后设置为none的方式</li>
<li>通过给select添加class来控制显示<br>具体方法，见示例代码源码注释的地方。</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
    <a href="/archives/page/6/" class="alignleft prev">上一页</a>
  
  
    <a href="/archives/page/8/" class="alignright next">下一页</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/乱七八糟/">乱七八糟</a><small>30</small></li>
  
    <li><a href="/categories/前端开发/">前端开发</a><small>117</small></li>
  
    <li><a href="/categories/后端运维/">后端运维</a><small>27</small></li>
  
    <li><a href="/categories/王婆卖瓜/">王婆卖瓜</a><small>4</small></li>
  
    <li><a href="/categories/读书笔记/">读书笔记</a><small>5</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签</h3>
  <ul class="entry clearfix">
  
    <li><a href="/tags/DOM/">DOM<sup>2</sup></a></li>
  
    <li><a href="/tags/IE/">IE<sup>1</sup></a></li>
  
    <li><a href="/tags/IE6/">IE6<sup>2</sup></a></li>
  
    <li><a href="/tags/PPT/">PPT<sup>3</sup></a></li>
  
    <li><a href="/tags/VPS/">VPS<sup>1</sup></a></li>
  
    <li><a href="/tags/ajax/">ajax<sup>5</sup></a></li>
  
    <li><a href="/tags/apache/">apache<sup>1</sup></a></li>
  
    <li><a href="/tags/audio/">audio<sup>2</sup></a></li>
  
    <li><a href="/tags/a标签/">a标签<sup>1</sup></a></li>
  
    <li><a href="/tags/canvas/">canvas<sup>1</sup></a></li>
  
    <li><a href="/tags/chrome/">chrome<sup>3</sup></a></li>
  
    <li><a href="/tags/css/">css<sup>15</sup></a></li>
  
    <li><a href="/tags/eAccelerator/">eAccelerator<sup>1</sup></a></li>
  
    <li><a href="/tags/ecmascript/">ecmascript<sup>3</sup></a></li>
  
    <li><a href="/tags/escape/">escape<sup>1</sup></a></li>
  
    <li><a href="/tags/event/">event<sup>1</sup></a></li>
  
    <li><a href="/tags/express/">express<sup>1</sup></a></li>
  
    <li><a href="/tags/fis/">fis<sup>1</sup></a></li>
  
    <li><a href="/tags/fisp/">fisp<sup>1</sup></a></li>
  
    <li><a href="/tags/grunt/">grunt<sup>1</sup></a></li>
  
    <li><a href="/tags/handleEvent/">handleEvent<sup>1</sup></a></li>
  
    <li><a href="/tags/html5/">html5<sup>3</sup></a></li>
  
    <li><a href="/tags/iframe/">iframe<sup>1</sup></a></li>
  
    <li><a href="/tags/iptables/">iptables<sup>1</sup></a></li>
  
    <li><a href="/tags/javascript/">javascript<sup>79</sup></a></li>
  
    <li><a href="/tags/linux/">linux<sup>4</sup></a></li>
  
    <li><a href="/tags/livereload/">livereload<sup>1</sup></a></li>
  
    <li><a href="/tags/memcached/">memcached<sup>1</sup></a></li>
  
    <li><a href="/tags/mixjs/">mixjs<sup>1</sup></a></li>
  
    <li><a href="/tags/mysql/">mysql<sup>2</sup></a></li>
  
    <li><a href="/tags/name/">name<sup>1</sup></a></li>
  
    <li><a href="/tags/nginx/">nginx<sup>2</sup></a></li>
  
    <li><a href="/tags/nodejs/">nodejs<sup>7</sup></a></li>
  
    <li><a href="/tags/php/">php<sup>19</sup></a></li>
  
    <li><a href="/tags/session/">session<sup>1</sup></a></li>
  
    <li><a href="/tags/storage/">storage<sup>1</sup></a></li>
  
    <li><a href="/tags/svn/">svn<sup>1</sup></a></li>
  
    <li><a href="/tags/this/">this<sup>1</sup></a></li>
  
    <li><a href="/tags/ueditor/">ueditor<sup>1</sup></a></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs<sup>1</sup></a></li>
  
    <li><a href="/tags/webbench/">webbench<sup>1</sup></a></li>
  
    <li><a href="/tags/websocket/">websocket<sup>1</sup></a></li>
  
    <li><a href="/tags/web前端开发/">web前端开发<sup>5</sup></a></li>
  
    <li><a href="/tags/windows7技巧/">windows7技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/wordpress/">wordpress<sup>3</sup></a></li>
  
    <li><a href="/tags/xss/">xss<sup>3</sup></a></li>
  
    <li><a href="/tags/严格模式/">严格模式<sup>1</sup></a></li>
  
    <li><a href="/tags/位运算/">位运算<sup>1</sup></a></li>
  
    <li><a href="/tags/作用域/">作用域<sup>3</sup></a></li>
  
    <li><a href="/tags/前端优化/">前端优化<sup>1</sup></a></li>
  
    <li><a href="/tags/前端工具/">前端工具<sup>5</sup></a></li>
  
    <li><a href="/tags/加速器/">加速器<sup>1</sup></a></li>
  
    <li><a href="/tags/压力测试/">压力测试<sup>1</sup></a></li>
  
    <li><a href="/tags/右键/">右键<sup>1</sup></a></li>
  
    <li><a href="/tags/安全/">安全<sup>1</sup></a></li>
  
    <li><a href="/tags/性能/">性能<sup>3</sup></a></li>
  
    <li><a href="/tags/我也八卦/">我也八卦<sup>1</sup></a></li>
  
    <li><a href="/tags/执行环境/">执行环境<sup>1</sup></a></li>
  
    <li><a href="/tags/技巧/">技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/播放器/">播放器<sup>1</sup></a></li>
  
    <li><a href="/tags/数组/">数组<sup>1</sup></a></li>
  
    <li><a href="/tags/标签/">标签<sup>1</sup></a></li>
  
    <li><a href="/tags/模块化/">模块化<sup>2</sup></a></li>
  
    <li><a href="/tags/算法/">算法<sup>1</sup></a></li>
  
    <li><a href="/tags/网络技术/">网络技术<sup>73</sup></a></li>
  
    <li><a href="/tags/虚拟主机/">虚拟主机<sup>1</sup></a></li>
  
    <li><a href="/tags/解耦/">解耦<sup>1</sup></a></li>
  
    <li><a href="/tags/语法限制/">语法限制<sup>1</sup></a></li>
  
    <li><a href="/tags/跨域/">跨域<sup>3</sup></a></li>
  
    <li><a href="/tags/路径/">路径<sup>1</sup></a></li>
  
    <li><a href="/tags/软件心得/">软件心得<sup>3</sup></a></li>
  
  </ul>
</div>



  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 三水清
  
</div>
<div class="clearfix"></div></footer>
  <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


    
        <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6635976" ></script>
        <script type="text/javascript" id="bdshell_js"></script>
        <script type="text/javascript">
        document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
        </script>
    
    



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1c76f5cc8274a56106b13b9c9b1fb046' type='text/javascript'%3E%3C/script%3E"));
    </script>


</body>
</html>