<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 18 页 - 归档 - 三水清</title>
  <meta name="author" content="三水清">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="三水清"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="atom.xml" title="三水清" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">三水清</a></h1>
  <h2><a href="/">专注前端开发,分享Javascript/CSS/PHP等Web前端开发技巧</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="https://github.com/ksky521">Github</a></li>
    
      <li><a href="http://weibo.com/sanshuiqing">新浪微博</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">归档</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/11/22/css-3-0-参考手册-中文版下载/">CSS 3.0 参考手册 (中文版)下载</a></h1>
  

      <time datetime="2009-11-22T09:33:32.000Z"><a href="/2009/11/22/css-3-0-参考手册-中文版下载/">2009年11月22日</a></time>
    </header>
    <div class="entry">
      
        <p>原文来自：<a href="http://webteam.tencent.com/css3/" target="_blank">腾讯webteam</a></p>
<p><span style="background-color: #ffffff;">CSS 是 Cascading Style Sheet 的缩写。译作「层叠样式表」。是用于(增强)控制网页样式并允许将样式信息与网页内容分离的一种标记性语言。</span></p>
<h2>手册难点</h2>
<ol>
<li>中文资料少，对英文翻译功底要求较高；</li>
<li>基础语法要求字斟句酌，避免产生歧义；</li>
<li>兼容性列表涉及浏览器及版本众多；</li>
<li>草案中的Grid布局被业界同仁普遍认为比“天书”还难…</li>
</ol>
<p>CSS3 还是草案，中文资料少之又少，基本上都是一篇内容转来转去，而我们的手册从基础语法到示例制作，都是根据W3C工作草案进行翻译，并结合自身的沉淀制作示例。</p>
<h2>备受期待的 CSS 3 新功能</h2>
<p>圆角、多背景、@font-face 用户自定义字体、动画与渐变、渐变色、盒阴影、RGBa - 加入透明色、文字阴影等等<br>CSS3 的出现，让代码更简洁、页面结构更合理，性能和效果得到兼顾。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/11/22/css-3-0-参考手册-中文版下载/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/11/21/google-map-api根据关键词返回经纬度接口/">php、js两种不同方式根据关键词返回经纬度接口【基于Google map API】</a></h1>
  

      <time datetime="2009-11-20T16:21:09.000Z"><a href="/2009/11/21/google-map-api根据关键词返回经纬度接口/">2009年11月21日</a></time>
    </header>
    <div class="entry">
      
        <p>P.S：在本文章中您将找到根据城市关键词获取经纬度的方法，即就是通过google map API的逆经纬度查询接口获得经纬度。<br><strong>google map api</strong>是一个强大的地图API，很多知名的网站都是用了google地图API，曾经我也写过一个根据来访者甚至域名来查询经纬度的程序（<a href="http://js8.in/mywork/ipsearch"><a href="http://js8.in/mywork/ipsearch">http://js8.in/mywork/ipsearch</a></a>）。文章链接地址为：<a href="http://js8.in/308.html">根据IP返回地理位置地址以及地理经纬度的方法</a>，关于经纬度的其他文章可以参考<a href="http://js8.in/285.html">全国各省市，县级城市经纬度SQL数据以及<strong>js数组</strong></a><br>其中使用的是纯真IP数据库，已经google地图的逆经纬度查询~<br>而本例中我们实现的主要方式是php如何获得关键字的经纬度。<br>使用过Google map API的人都知道google有一个逆经纬度查询的接口，例如：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
</pre></td><td class="code"><pre>geocoder = new GClientGeocoder();geocoder.getLocations(
          '山东青岛',
        function($){
var lalton = $.Placemark[0].Point.coordinates;
alert(latlon[0]+","+latlon[1]);
});```可是对于php应该怎样获取**经纬度**呢？
今天在无意的时候看到一个wp的插件，其中找到了方法，就是通过google map API的逆经纬度查询接口获得经纬度~
首先你需要去http://code.google.com/intl/zh-CN/apis/maps/signup.html申请一个google map api的授权域名**key**，
google的map api逆经纬度接口为：
http://maps.google.com/maps/geo?q=关键词（如山东青岛）&key=刚刚申请的API KEY&sensor=false&output=xml&oe=utf8
请求下来的数据时kml的数据格式，怎样解析呢？
&lt;!--more--&gt;我们可以使用**xml**的方式来进行解析，这里我提供一个解析的**php**代码，代码来自于wp的一个插件
第一个函数是xml2array()，这个函数的作用就是把xml转换为数组便于操作
参数$url为请求的xml地址，返回的是一个xml转换成的数组

```php
//from http://us3.php.net/manual/en/function.xml-parse.php
function xml2array($url, $get_attributes = 1, $priority = 'tag')
{
    $contents = "";
    if (!function_exists('xml_parser_create'))
    {
        return array ();
    }
    $parser = xml_parser_create('');
    if (!($fp = @ fopen($url, 'rb')))
    {
        return array ();
    }
    while (!feof($fp))
    {
        $contents .= fread($fp, 8192);
    }
    fclose($fp);
    xml_parser_set_option($parser, XML_OPTION_TARGET_ENCODING, "UTF-8");
    xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, 0);
    xml_parser_set_option($parser, XML_OPTION_SKIP_WHITE, 1);
    xml_parse_into_struct($parser, trim($contents), $xml_values);
    xml_parser_free($parser);
    if (!$xml_values)
        return; //Hmm...
    $xml_array = array ();
    $parents = array ();
    $opened_tags = array ();
    $arr = array ();
    $current = & $xml_array;
    $repeated_tag_index = array ();
    foreach ($xml_values as $data)
    {
        unset ($attributes, $value);
        extract($data);
        $result = array ();
        $attributes_data = array ();
        if (isset ($value))
        {
            if ($priority == 'tag')
                $result = $value;
            else
                $result['value'] = $value;
        }
        if (isset ($attributes) and $get_attributes)
        {
            foreach ($attributes as $attr =&gt; $val)
            {
                if ($priority == 'tag')
                    $attributes_data[$attr] = $val;
                else
                    $result['attr'][$attr] = $val; //Set all the attributes in a array called 'attr'
            }
        }
        if ($type == "open")
        {
            $parent[$level -1] = & $current;
            if (!is_array($current) or (!in_array($tag, array_keys($current))))
            {
                $current[$tag] = $result;
                if ($attributes_data)
                    $current[$tag . '_attr'] = $attributes_data;
                $repeated_tag_index[$tag . '_' . $level] = 1;
                $current = & $current[$tag];
            }
            else
            {
                if (isset ($current[$tag][0]))
                {
                    $current[$tag][$repeated_tag_index[$tag . '_' . $level]] = $result;
                    $repeated_tag_index[$tag . '_' . $level]++;
                }
                else
                {
                    $current[$tag] = array (
                        $current[$tag],
                        $result
                    );
                    $repeated_tag_index[$tag . '_' . $level] = 2;
                    if (isset ($current[$tag . '_attr']))
                    {
                        $current[$tag]['0_attr'] = $current[$tag . '_attr'];
                        unset ($current[$tag . '_attr']);
                    }
                }
                $last_item_index = $repeated_tag_index[$tag . '_' . $level] - 1;
                $current = & $current[$tag][$last_item_index];
            }
        }
        elseif ($type == "complete")
        {
            if (!isset ($current[$tag]))
            {
                $current[$tag] = $result;
                $repeated_tag_index[$tag . '_' . $level] = 1;
                if ($priority == 'tag' and $attributes_data)
                    $current[$tag . '_attr'] = $attributes_data;
            }
            else
            {
                if (isset ($current[$tag][0]) and is_array($current[$tag]))
                {
                    $current[$tag][$repeated_tag_index[$tag . '_' . $level]] = $result;
                    if ($priority == 'tag' and $get_attributes and $attributes_data)
                    {
                    $current[$tag][$repeated_tag_index[$tag . '_' . $level] . '_attr'] = $attributes_data;
                    }
                    $repeated_tag_index[$tag . '_' . $level]++;
                }
                else
                {
                    $current[$tag] = array (
                        $current[$tag],
                        $result
                    );
                    $repeated_tag_index[$tag . '_' . $level] = 1;
                    if ($priority == 'tag' and $get_attributes)
                    {
                        if (isset ($current[$tag . '_attr']))
                        {
                            $current[$tag]['0_attr'] = $current[$tag . '_attr'];
                            unset ($current[$tag . '_attr']);
                        }
                        if ($attributes_data)
                        {
                            $current[$tag][$repeated_tag_index[$tag . '_' . $level] . '_attr'] = $attributes_data;
                        }
                    }
                    $repeated_tag_index[$tag . '_' . $level]++; //0 and 1 index is already taken
                }
            }
        }
        elseif ($type == 'close')
        {
            $current = & $parent[$level -1];
        }
    }
    return ($xml_array);
}
</pre></td></tr></table></figure>

<p>第二个函数getPoiAndAdd($address,$mapkey):<br>$address为查询的关键词，地址就可以啦，$mapkey为你申请的google map api key，<br>返回的是一个数组，其中包括了经纬度以及详细地址哦~</p>
<figure class="highlight lang-php"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">gmshc_point</span> <span class="params">(<span class="variable">$address</span>,<span class="variable">$apikey</span>)</span>{</span>
    <span class="variable">$find</span> = <span class="keyword">array</span>(<span class="string">"\n"</span>,<span class="string">"\r"</span>,<span class="string">" "</span>);
	<span class="variable">$replace</span> = <span class="keyword">array</span>(<span class="string">""</span>,<span class="string">""</span>,<span class="string">"+"</span>);					
    <span class="variable">$address</span> = str_replace( <span class="variable">$find</span>,<span class="variable">$replace</span>, <span class="variable">$address</span>);
	<span class="variable">$url</span> = <span class="string">'http://maps.google.com/maps/geo?q='</span>.<span class="variable">$address</span>.<span class="string">'&key='</span>.<span class="variable">$apikey</span>.
         <span class="string">'&sensor=false&output=xml&oe=utf8'</span>;	
	<span class="variable">$response</span> = xml2array(<span class="variable">$url</span>);	<span class="comment">//此处调用都一个函数进行解析</span>
	<span class="variable">$coordinates</span> = <span class="variable">$response</span>[<span class="string">'kml'</span>][<span class="string">'Response'</span>][<span class="string">'Placemark'</span>][<span class="string">'Point'</span>][<span class="string">'coordinates'</span>];
	<span class="variable">$address</span> = <span class="variable">$response</span>[<span class="string">'kml'</span>][<span class="string">'Response'</span>][<span class="string">'Placemark'</span>][<span class="string">'address'</span>];	
	<span class="keyword">if</span> (!<span class="keyword">empty</span>(<span class="variable">$coordinates</span>)) {	
	<span class="variable">$point_array</span> = split(<span class="string">","</span>,<span class="variable">$coordinates</span>);	
	<span class="variable">$point</span> = <span class="variable">$point_array</span>[<span class="number">1</span>].<span class="string">","</span>.<span class="variable">$point_array</span>[<span class="number">0</span>];
	<span class="variable">$response</span> = <span class="keyword">array</span>(<span class="string">'point'</span>=&gt;<span class="variable">$point</span>,<span class="string">'address'</span>=&gt;<span class="variable">$address</span>);	
	<span class="keyword">return</span>  <span class="variable">$response</span>;	
	}
}
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/11/18/jquery浏览器判断一个bug，以及修改建议/">jQuery浏览器判断一个bug，以及修改建议</a></h1>
  

      <time datetime="2009-11-18T13:48:48.000Z"><a href="/2009/11/18/jquery浏览器判断一个bug，以及修改建议/">2009年11月18日</a></time>
    </header>
    <div class="entry">
      
        <p>前几天在使用<strong>jQuery</strong>（1.3.2）的时候，想使用下浏览器判断$.browser，可是我在使用$.browser.safari的时候，发现一个问题：<br>就是chrome浏览器也走<strong>$.browser.safari</strong>的判断，查看了jQuery的源代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre><span class="keyword">var</span> userAgent = navigator.userAgent.toLowerCase();
jQuery.browser = {
	version: (userAgent.match( <span class="regexp">/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/</span> ) || [<span class="number">0</span>,<span class="string">'0'</span>])[<span class="number">1</span>],
	safari: <span class="regexp">/webkit/</span>.test( userAgent ),
	opera: <span class="regexp">/opera/</span>.test( userAgent ),
	msie: <span class="regexp">/msie/</span>.test( userAgent ) && !<span class="regexp">/opera/</span>.test( userAgent ),
	mozilla: <span class="regexp">/mozilla/</span>.test( userAgent ) && !<span class="regexp">/(compatible|webkit)/</span>.test( userAgent )
};```&lt;!--more--&gt;
经过同事**修改**后的代码是：
```javascript
<span class="keyword">var</span> browserName = navigator.userAgent.toLowerCase();
mybrowser = {
	version: (browserName.match(<span class="regexp">/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/</span>) || [<span class="number">0</span>, <span class="string">'0'</span>])[<span class="number">1</span>],
	safari: <span class="regexp">/webkit/i</span>.test(browserName) && !<span class="keyword">this</span>.chrome,
	opera: <span class="regexp">/opera/i</span>.test(browserName),
        firefox:<span class="regexp">/firefox/i</span>.test(browserName),
	msie: <span class="regexp">/msie/i</span>.test(browserName) && !<span class="regexp">/opera/</span>.test(browserName),
	mozilla: <span class="regexp">/mozilla/i</span>.test(browserName) && !<span class="regexp">/(compatible|webkit)/</span>.test(browserName) && !<span class="keyword">this</span>.chrome,
        chrome: <span class="regexp">/chrome/i</span>.test(browserName) && <span class="regexp">/webkit/i</span>.test(browserName) && <span class="regexp">/mozilla/i</span>.test(browserName)
}
</pre></td></tr></table></figure>

<p>完全可以使用，并且防止了safari跟<strong>chrome</strong>混淆的</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/11/09/14js代码编写时最佳规范/">14条JS代码编写时最佳规范</a></h1>
  

      <time datetime="2009-11-09T00:56:14.000Z"><a href="/2009/11/09/14js代码编写时最佳规范/">2009年11月9日</a></time>
    </header>
    <div class="entry">
      
        <p>写任何编程代码，不同的开发者都会有不同的见解。但参考一下总是好的，下面是来自<a href="http://www.javascripttoolbox.com/bestpractices/" target="_blank">Javascript Toolbox</a>发布的14条最佳JS代码编写技巧，Sofish翻译(1,2)。</p>
<h3>1. 总是使用 ‘var’</h3>
<p>在JavaScript中，变量不是全局范围的就是函数范围的，使用”var”关键词将是保持变量简洁明了的关键。当声明一个或者是全局或者是函数级（function-level）的变量，需总是前置”var”关键词，下面的例子将强调不这样做潜在的问题。</p>
<p>不使用 Var 造成的问题</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="keyword">var</span> i=<span class="number">0</span>; <span class="comment">// This is good - creates a global variable</span>
<span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> {</span>
   <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) {
      alert(<span class="string">"Hello World!"</span>);
   }
}
test();
alert(i); <span class="comment">// The global variable i is now 10!</span>
</pre></td></tr></table></figure>

<p>因为变量函数中变量 i 并没有使用 var 使其成为函数级的变量，在这个例子中它引用了全局变量。总是使用 var 来声明全局变量是一个很多的做法，但至关重要的一点是使用 var 定义一个函数范围的变量。下面这两个方法在功能上是相同的：</p>
<p>正确的函数</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> {</span>
   <span class="keyword">var</span> i=<span class="number">0</span>;
   <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) {
      alert(<span class="string">"Hello World!"</span>);
   }
}
正确的函数

<span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span> {</span>
   <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) {
      alert(<span class="string">"Hello World!"</span>);
   }
}
</pre></td></tr></table></figure>

<h3>2. 特性检测而非浏览器检测</h3>
<p>一些代码是写来发现浏览器版本并基于用户正使用的客户端的对其执行不同行为。这个，总的来说，是一个非常糟的实践。更好的方法是使用特性检测，在使 用一个老浏览器可能不支持的高级的特性之前，首先检测（浏览器的）是否有这个功能或特性，然后使用它。这单独检测浏览器版本来得更好，即使你知道它的性 能。你可以在 <a href="http://www.jibbering.com/faq/faq_notes/not_browser_detect.html找到一个深入讨论这个问题的文章。" target="_blank">http://www.jibbering.com/faq/faq_notes/not_browser_detect.html找到一个深入讨论这个问题的文章。</a></p>
<p>例子：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/11/09/14js代码编写时最佳规范/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/10/28/根据ip返回地理位置地址以及地理经纬度的方法/">根据IP返回地理位置地址以及地理经纬度的方法</a></h1>
  

      <time datetime="2009-10-28T09:58:27.000Z"><a href="/2009/10/28/根据ip返回地理位置地址以及地理经纬度的方法/">2009年10月28日</a></time>
    </header>
    <div class="entry">
      
        <p>今天做了一个<a href="http://js8.in/mywork/ipsearch/">基于<strong>Google</strong>地图的根据IP返回地理位置的接口</a>，效果演示地址：<a href="http://js8.in/mywork/ipsearch/">http://js8.in/mywork/ipsearch/</a></p>
<p>可以输入域名，如：js8.in，既可以返回<strong>地理位置</strong>，并且把地理位置定位到Google地图上，并且在地图上打开气泡显示经纬度。</p>
<p>效果图：<br><a href="http://js8.in/mywork/ipsearch/"><img src="/uploads/2009/10/Snap1-300x240.jpg" alt="根据IP返回地理位置接口" title="根据IP返回地理位置接口"></a></p>
<p>关于这个<strong>IP查询</strong>接口的调用方法：<a href="http://js8.in/mywork/ipsearch/ipsearch.php?ip=你要查询的IP地址或者域名（如js8.in）">http://js8.in/mywork/ipsearch/ipsearch.php?ip=你要查询的IP地址或者域名（如js8.in）</a></p>
<p>程序说明：</p>
<p>1、IP数据库采用了纯真IP数据库10.25日最新版，可能有时间就更新一下数据库内容。<br>2、获取的经纬度是根据Google的地图接口，返回的数据~对于国内的<strong>经纬度</strong>应该有一定的偏移（国家法律规定的），但是在Google上使用应该是可以的~</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/10/19/jquerygoogle-weather-api轻松实现天气地图（二）/">jQuery+google weather API轻松实现天气地图（二）</a></h1>
  

      <time datetime="2009-10-19T02:15:31.000Z"><a href="/2009/10/19/jquerygoogle-weather-api轻松实现天气地图（二）/">2009年10月19日</a></time>
    </header>
    <div class="entry">
      
        <p>原理：通过来输入的关键词查询出<strong>城市</strong>的经纬度，然后调用google的<strong>weather</strong>接口，查出城市的天气情况，根据<strong>xml</strong>解析出来的结果返货<strong>json</strong>格式，便于代码的传输~！</p>
<p>这里我使用的是<strong>MapBar</strong>的地图免费API，其他的如：<strong>Google </strong>就不做说明了～方法类似～截图如下：<br><a href="/uploads/userup/0905/021309521305.png"><img src="/uploads/userup/0905/021309521305.png" alt=""></a><br>现在把Mysql.php的全部代码，使用了simpleXML对Google返回的数据进行解析：<br>PS：关于各个城市的<strong>经纬度</strong>数据，请阅览：<a href="http://js8.in/285.html">全国各省市，县级城市经纬度<strong>SQL数据</strong>以及js数组</a></p>
<figure class="highlight lang-php"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td><td class="code"><pre><span class="preprocessor">&lt;?php</span>
  <span class="keyword">include</span>(<span class="string">"conn.php"</span>);
<span class="variable">$strsql</span>=<span class="string">"select * from latlon where name=’"</span>.<span class="variable">$_GET</span>[<span class="string">'city'</span>].<span class="string">"’"</span>;
    <span class="variable">$result</span>=mysql_db_query(<span class="variable">$mysql_database</span>, <span class="variable">$strsql</span>, <span class="variable">$conn</span>);
    <span class="comment">// u83b7u53d6u67e5u8be2u7ed3u679c,1 = name 2= latlon 3=weidu 4 = jingdu</span>
    <span class="variable">$row</span>=mysql_fetch_row(<span class="variable">$result</span>);
    mysql_data_seek(<span class="variable">$result</span>, <span class="number">0</span>);
    <span class="variable">$row</span>=mysql_fetch_row(<span class="variable">$result</span>);
    <span class="keyword">if</span>(<span class="keyword">empty</span>(<span class="variable">$row</span>[<span class="number">1</span>])){
        <span class="variable">$re</span> =<span class="keyword">array</span>(        <span class="string">"noCity"</span>=&gt;<span class="string">"no data"</span>,
        <span class="string">"yes"</span>=&gt;<span class="number">0</span>,
    );
        <span class="keyword">echo</span> <span class="string">""</span>;
    }<span class="keyword">else</span>{
    <span class="variable">$nlatlon</span>= <span class="variable">$row</span>[<span class="number">4</span>].’,’.<span class="variable">$row</span>[<span class="number">3</span>];
    <span class="variable">$back</span>=<span class="variable">$row</span>[<span class="number">3</span>]*<span class="number">1000000</span>
.<span class="variable">$row</span>[<span class="number">4</span>]*<span class="number">1000000</span>;
<span class="variable">$url</span>=’http:<span class="comment">//www.google.com/ig/api?weather=,,,’.$back;</span>
<span class="variable">$xml</span> =  simplexml_load_file(<span class="variable">$url</span>);
<span class="variable">$re</span>=<span class="keyword">array</span>(
    <span class="string">"yes"</span>=&gt;<span class="number">1</span>,
<span class="string">"today"</span> =&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">0</span>]-&gt;condition[<span class="string">'data'</span>]),
<span class="string">"ssd"</span>=&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;current_conditions-&gt;temp_c[<span class="string">'data'</span>]),
<span class="string">"sd"</span>=&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;current_conditions-&gt;humidity[<span class="string">'data'</span>]),
<span class="string">"fx"</span>=&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;current_conditions-&gt;wind_condition[<span class="string">'data'</span>]),
<span class="string">"icon"</span>=&gt;’http:<span class="comment">//www.google.com’.($xml-&gt;weather-&gt;forecast_conditions[0]-&gt;icon['data']),</span>
<span class="string">"week1"</span> =&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">1</span>]-&gt;day_of_week[<span class="string">'data'</span>]),
<span class="string">"week1zuidi"</span> =&gt;(int)((int)((string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">1</span>]-&gt;low[<span class="string">'data'</span>])-<span class="number">32</span>)/<span class="number">1.8</span>+<span class="number">1</span>),
<span class="string">"week1zuigao"</span> =&gt;(int) ((int)((string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">1</span>]-&gt;high[<span class="string">'data'</span>])-<span class="number">32</span>)/<span class="number">1.8</span>+<span class="number">1</span>),
<span class="string">"week1tianqi"</span> =&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">1</span>]-&gt;condition[<span class="string">'data'</span>]),
<span class="string">"week1icon"</span> =&gt;’http:<span class="comment">//www.google.com’.($xml-&gt;weather-&gt;forecast_conditions[1]-&gt;icon['data']),</span>
<span class="string">"week2"</span> =&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">2</span>]-&gt;day_of_week[<span class="string">'data'</span>]),
<span class="string">"week2zuidi"</span> =&gt;(int) ((int)((string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">2</span>]-&gt;low[<span class="string">'data'</span>])-<span class="number">32</span>)/<span class="number">1.8</span>+<span class="number">1</span>),
<span class="string">"week2zuigao"</span> =&gt;(int) ((int)((string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">2</span>]-&gt;high[<span class="string">'data'</span>])-<span class="number">32</span>)/<span class="number">1.8</span>+<span class="number">1</span>),
<span class="string">"week2tianqi"</span> =&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">2</span>]-&gt;condition[<span class="string">'data'</span>]),
<span class="string">"week2icon"</span> =&gt;’http:<span class="comment">//www.google.com’.($xml-&gt;weather-&gt;forecast_conditions[2]-&gt;icon['data']),</span>
<span class="string">"week3"</span> =&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">3</span>]-&gt;day_of_week[<span class="string">'data'</span>]),
<span class="string">"week3zuidi"</span> =&gt;(int) ((int)((string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">3</span>]-&gt;low[<span class="string">'data'</span>])-<span class="number">32</span>)/<span class="number">1.8</span>+<span class="number">1</span>),
<span class="string">"week3zuigao"</span> =&gt;(int) ((int)((string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">3</span>]-&gt;high[<span class="string">'data'</span>])-<span class="number">32</span>)/<span class="number">1.8</span>+<span class="number">1</span>),
<span class="string">"week3tianqi"</span> =&gt;(string)(<span class="variable">$xml</span>-&gt;weather-&gt;forecast_conditions[<span class="number">3</span>]-&gt;condition[<span class="string">'data'</span>]),
<span class="string">"week3icon"</span> =&gt;’http:<span class="comment">//www.google.com’.($xml-&gt;weather-&gt;forecast_conditions[3]-&gt;icon['data']),</span>
<span class="string">"nlatlon"</span> =&gt;<span class="variable">$nlatlon</span>,
<span class="string">"googleurl"</span>=&gt;<span class="variable">$url</span>,
);
}
<span class="keyword">echo</span> json_encode(<span class="variable">$re</span>);
    mysql_free_result(<span class="variable">$result</span>);
mysql_close(<span class="variable">$conn</span>);

<span class="preprocessor">?&gt;</span>
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/09/30/真正的jquery的radio与checkbox取值/">真正的jQuery的radio与checkbox取值</a></h1>
  

      <time datetime="2009-09-30T05:26:05.000Z"><a href="/2009/09/30/真正的jquery的radio与checkbox取值/">2009年9月30日</a></time>
    </header>
    <div class="entry">
      
        <p>今天闲着没事想把<a href="http://love.2fool.cn" target="_blank">爱墙</a>做成好友飞信通知的功能，遇到一个checkbox的选择问题，由于自己喜欢使用<strong>jQuery</strong>来开发~所以对于jQuery对checkbox的取值很想搞清楚~</p>
<p>我试着使用网上比较多的版本，比如：$(&quot;input[name=‘fetion’]“).attr(”checked&quot;)，</p>
<h3>下面代码是网上的</h3>
<p>多选框<strong>checkbox</strong>：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre> $(<span class="string">"#chk1"</span>).attr(<span class="string">"checked"</span>,<span class="string">''</span>);<span class="comment">//不打勾</span>
$(<span class="string">"#chk2"</span>).attr(<span class="string">"checked"</span>,<span class="literal">true</span>);<span class="comment">//打勾</span>
<span class="keyword">if</span>($(<span class="string">"#chk1"</span>).attr(<span class="string">'checked'</span>)==<span class="literal">undefined</span>) <span class="comment">//判断是否已经打勾</span>
</pre></td></tr></table></figure>

<p><p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/09/30/真正的jquery的radio与checkbox取值/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/09/24/jquery插件pager修改版-更加智能/">jQuery插件pager修改版-更加智能</a></h1>
  

      <time datetime="2009-09-24T00:29:31.000Z"><a href="/2009/09/24/jquery插件pager修改版-更加智能/">2009年9月24日</a></time>
    </header>
    <div class="entry">
      
        <p>我的新版<a href="http://love.2fool.cn" target="_blank"><strong>爱墙</strong></a>使用了jQuery的pager插件，可是对于老外的插件我实在是不敢恭维，比较难用，并且只能设置显示页面字数为奇数，如果为偶数则比设定的页数多一！并且不能自己设置每页显示多少页码，二是默认的9个页码，很不方便~</p>
<p>研究了一下，自己修改了下<a href="http://js8.in/mywork/pager/pagerDIY.rar"><strong>Pager</strong>插件</a>，本次修改添加了“上下页”、“首页”、“最后一页”自己定义样式，比如：使用“上一页”“&gt;&gt;”“next”之类的字符，并且自动设置显示不显示上下页，首页，最后一页。<br><a href="http://js8.in/mywork/pager/PagerDemo.html">demo1</a> <a href="http://js8.in/mywork/pager/PagerDemo2.html">demo2</a></p>
<h3>比如代码</h3>
<p>var show2={per:6,index:{n:“首页”,m:“first”},pre:{n:“prev”,m:“prev”},next:{n:“next”,m:“next”},last:{n:“最后一页”,m:“last”}};<br>$(“#pager2”).pager({ pagenumber: 1, pagecount: 15, buttonClickCallback: PageClick2,show:show2 });<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/09/24/jquery插件pager修改版-更加智能/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/05/02/jquerygoogle-weather-api轻松实现天气地图（一）/">jQuery+google weather API轻松实现天气地图（一）</a></h1>
  

      <time datetime="2009-05-01T21:04:01.000Z"><a href="/2009/05/02/jquerygoogle-weather-api轻松实现天气地图（一）/">2009年5月2日</a></time>
    </header>
    <div class="entry">
      
        <p>这里我使用的是<strong>MapBar</strong>的地图<strong>API</strong>，其他的如：Google 就不做说明了～方法类似～截图如下：<br><a href="/uploads/userup/0905/021309521305.png"><img src="/uploads/userup/0905/021309521305.png" alt=""></a><br>现在把全部<strong>代码</strong>放出，希望大家拍砖：<br>PS：关于各个城市的经纬度数据，请阅览：<a href="http://js8.in/2857.html"><a href="http://js8.in/285.html">http://js8.in/285.html</a></a><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/05/02/jquerygoogle-weather-api轻松实现天气地图（一）/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2008/10/16/一段代码解决prototype和jquery的冲突/">一段代码解决prototype和jquery的冲突</a></h1>
  

      <time datetime="2008-10-15T19:13:51.000Z"><a href="/2008/10/16/一段代码解决prototype和jquery的冲突/">2008年10月16日</a></time>
    </header>
    <div class="entry">
      
        <p>那天做个人页面（i.2fool.cn），前面的css-dock仿MacOS的导航栏用的是jquery框架</p>
<p>后面写的仿MacOS的导航是用了prototype框架，可是单独测试，效果很好~而放到了一起就出现了问题~</p>
<p>后来想起来了是prototype和jquery有冲突~</p>
<p>以前见过这样的文章，自己百度了一下，终于找到了答案，可是方法很多~</p>
<p>最权威的是个外文的，读了点~也读懂了一点，可是就是不成功~</p>
<p>最后我试着自己改写了一下~就是下面的代码~</p>
<p>PS：校内肯定屏蔽关键字，所以采用了大写</p>
<p>&lt;script type=“text/javascript”&gt;<br>var jQuery=$;<br>&lt;/script&gt;</p>
<p>这个代码要吧jquery。js放到prototype。js的前面~才可以解决冲突</p>
<p>具体的效果来我的网站看看吧~i.2fool.cn</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  
</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/乱七八糟/">乱七八糟</a><small>30</small></li>
  
    <li><a href="/categories/前端开发/">前端开发</a><small>116</small></li>
  
    <li><a href="/categories/后端运维/">后端运维</a><small>27</small></li>
  
    <li><a href="/categories/王婆卖瓜/">王婆卖瓜</a><small>4</small></li>
  
    <li><a href="/categories/读书笔记/">读书笔记</a><small>5</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签</h3>
  <ul class="entry clearfix">
  
    <li><a href="/tags/DOM/">DOM<sup>2</sup></a></li>
  
    <li><a href="/tags/IE/">IE<sup>1</sup></a></li>
  
    <li><a href="/tags/IE6/">IE6<sup>2</sup></a></li>
  
    <li><a href="/tags/PPT/">PPT<sup>3</sup></a></li>
  
    <li><a href="/tags/VPS/">VPS<sup>1</sup></a></li>
  
    <li><a href="/tags/ajax/">ajax<sup>5</sup></a></li>
  
    <li><a href="/tags/apache/">apache<sup>1</sup></a></li>
  
    <li><a href="/tags/audio/">audio<sup>2</sup></a></li>
  
    <li><a href="/tags/a标签/">a标签<sup>1</sup></a></li>
  
    <li><a href="/tags/canvas/">canvas<sup>1</sup></a></li>
  
    <li><a href="/tags/chrome/">chrome<sup>3</sup></a></li>
  
    <li><a href="/tags/css/">css<sup>15</sup></a></li>
  
    <li><a href="/tags/eAccelerator/">eAccelerator<sup>1</sup></a></li>
  
    <li><a href="/tags/ecmascript/">ecmascript<sup>3</sup></a></li>
  
    <li><a href="/tags/escape/">escape<sup>1</sup></a></li>
  
    <li><a href="/tags/event/">event<sup>1</sup></a></li>
  
    <li><a href="/tags/express/">express<sup>1</sup></a></li>
  
    <li><a href="/tags/grunt/">grunt<sup>1</sup></a></li>
  
    <li><a href="/tags/handleEvent/">handleEvent<sup>1</sup></a></li>
  
    <li><a href="/tags/html5/">html5<sup>3</sup></a></li>
  
    <li><a href="/tags/iframe/">iframe<sup>1</sup></a></li>
  
    <li><a href="/tags/iptables/">iptables<sup>1</sup></a></li>
  
    <li><a href="/tags/javascript/">javascript<sup>79</sup></a></li>
  
    <li><a href="/tags/linux/">linux<sup>4</sup></a></li>
  
    <li><a href="/tags/livereload/">livereload<sup>1</sup></a></li>
  
    <li><a href="/tags/memcached/">memcached<sup>1</sup></a></li>
  
    <li><a href="/tags/mixjs/">mixjs<sup>1</sup></a></li>
  
    <li><a href="/tags/mysql/">mysql<sup>2</sup></a></li>
  
    <li><a href="/tags/name/">name<sup>1</sup></a></li>
  
    <li><a href="/tags/nginx/">nginx<sup>2</sup></a></li>
  
    <li><a href="/tags/nodejs/">nodejs<sup>7</sup></a></li>
  
    <li><a href="/tags/php/">php<sup>19</sup></a></li>
  
    <li><a href="/tags/session/">session<sup>1</sup></a></li>
  
    <li><a href="/tags/storage/">storage<sup>1</sup></a></li>
  
    <li><a href="/tags/svn/">svn<sup>1</sup></a></li>
  
    <li><a href="/tags/this/">this<sup>1</sup></a></li>
  
    <li><a href="/tags/ueditor/">ueditor<sup>1</sup></a></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs<sup>1</sup></a></li>
  
    <li><a href="/tags/webbench/">webbench<sup>1</sup></a></li>
  
    <li><a href="/tags/websocket/">websocket<sup>1</sup></a></li>
  
    <li><a href="/tags/web前端开发/">web前端开发<sup>5</sup></a></li>
  
    <li><a href="/tags/windows7技巧/">windows7技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/wordpress/">wordpress<sup>3</sup></a></li>
  
    <li><a href="/tags/xss/">xss<sup>3</sup></a></li>
  
    <li><a href="/tags/严格模式/">严格模式<sup>1</sup></a></li>
  
    <li><a href="/tags/位运算/">位运算<sup>1</sup></a></li>
  
    <li><a href="/tags/作用域/">作用域<sup>3</sup></a></li>
  
    <li><a href="/tags/前端优化/">前端优化<sup>1</sup></a></li>
  
    <li><a href="/tags/前端工具/">前端工具<sup>4</sup></a></li>
  
    <li><a href="/tags/加速器/">加速器<sup>1</sup></a></li>
  
    <li><a href="/tags/压力测试/">压力测试<sup>1</sup></a></li>
  
    <li><a href="/tags/右键/">右键<sup>1</sup></a></li>
  
    <li><a href="/tags/安全/">安全<sup>1</sup></a></li>
  
    <li><a href="/tags/性能/">性能<sup>3</sup></a></li>
  
    <li><a href="/tags/我也八卦/">我也八卦<sup>1</sup></a></li>
  
    <li><a href="/tags/执行环境/">执行环境<sup>1</sup></a></li>
  
    <li><a href="/tags/技巧/">技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/播放器/">播放器<sup>1</sup></a></li>
  
    <li><a href="/tags/数组/">数组<sup>1</sup></a></li>
  
    <li><a href="/tags/标签/">标签<sup>1</sup></a></li>
  
    <li><a href="/tags/模块化/">模块化<sup>2</sup></a></li>
  
    <li><a href="/tags/算法/">算法<sup>1</sup></a></li>
  
    <li><a href="/tags/网络技术/">网络技术<sup>73</sup></a></li>
  
    <li><a href="/tags/虚拟主机/">虚拟主机<sup>1</sup></a></li>
  
    <li><a href="/tags/解耦/">解耦<sup>1</sup></a></li>
  
    <li><a href="/tags/语法限制/">语法限制<sup>1</sup></a></li>
  
    <li><a href="/tags/跨域/">跨域<sup>3</sup></a></li>
  
    <li><a href="/tags/路径/">路径<sup>1</sup></a></li>
  
    <li><a href="/tags/软件心得/">软件心得<sup>3</sup></a></li>
  
  </ul>
</div>



  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 三水清
  
</div>
<div class="clearfix"></div></footer>
  <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


    
        <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6635976" ></script>
        <script type="text/javascript" id="bdshell_js"></script>
        <script type="text/javascript">
        document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
        </script>
    
    



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1c76f5cc8274a56106b13b9c9b1fb046' type='text/javascript'%3E%3C/script%3E"));
    </script>


</body>
</html>