<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 4 页 - 归档：2011 - 三水清</title>
  <meta name="author" content="三水清">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="三水清"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="atom.xml" title="三水清" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">三水清</a></h1>
  <h2><a href="/">专注前端开发,分享Javascript/CSS/PHP等Web前端开发技巧</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="https://github.com/ksky521">Github</a></li>
    
      <li><a href="http://weibo.com/sanshuiqing">新浪微博</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">2011</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/05/18/使用windows7的virtual-pc打造原装ie6、ie7、ie8测试环境/">使用windows7的virtual PC打造原装IE6、IE7、IE8测试环境</a></h1>
  

      <time datetime="2011-05-17T20:38:49.000Z"><a href="/2011/05/18/使用windows7的virtual-pc打造原装ie6、ie7、ie8测试环境/">2011年5月18日</a></time>
    </header>
    <div class="entry">
      
        <p>公司使用的是windows7操作系统，自己之前一直使用IETester来测试页面在IE6~IE8下的兼容性，可是在测试js的时候还是会出现实际使用的还是windows7的IE8内核问题。<br>所以自己想通过<strong>virtual PC</strong>来搭建个虚拟的测试环境，为什么选择virtual PC呢？<br>1、windows 7系统自带，并且xp mode就可以直接安装上xp系统<br>2、windows 7支持自动发布功能，即不启动虚拟机的情况也可以在xp下运行相应的程序，节省内存开销</p>
<h3>安装虚拟机</h3>
<p>第一步是安装xp MODE，这个网上很多教程，很简单我们就安装了带有IE6的xp系统了，并且可以把IE6发布到windows7上去运行<br>第二步是创建第二个虚拟机，也就是带IE7的xp虚拟机，我先找了个sp2的xp安装上了（可以在设置里面添加ISO），可是不支持自动发布，当我查看帮助文件的时候发现原来只用sp3以上的系统才支持自动发布，于是先升级sp3,。<br>升级sp3的时候悲剧了，因为一开始设置的虚拟硬盘大小是3G，导致sp3升级包升级的时候显示磁盘不足，试了很多扩展虚拟硬盘的方法都是不行，只有重新删除硬盘再次创建一个大点的硬盘，这次我创建的虚拟硬盘大小是5G，安装sp2，然后安装sp3，之后就是安装集成系统。<br>一切就绪了，可是还是不支持自动发布功能，后来在帮助里面发现了原来sp3还是要安装一个补丁的，即（<a href="http://www.microsoft.com/downloads/zh-cn/details.aspx?FamilyID=e5433d88-685f-4036-b435-570ff53598cd&amp;displaylang=zh-cn" target="_blank">Windows® XP SP3 用于启用 RemoteApp™ 的更新</a> ）<br>安装补丁之后终于可以了！<br>下面是截图：</p>
<p><a href="http://js8.in/688.html/2011-05-18_101406"><img src="/uploads/2011/05/2011-05-18_101406-300x191.png" alt="使用windows7的virtual PC打造原装IE6、IE7、IE8环境" title="使用windows7的virtual PC打造原装IE6、IE7、IE8环境"></a><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/05/18/使用windows7的virtual-pc打造原装ie6、ie7、ie8测试环境/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/05/13/ie6下javascript不能隐藏select标签的bug/">IE6下javascript不能隐藏select标签的bug</a></h1>
  

      <time datetime="2011-05-13T15:50:57.000Z"><a href="/2011/05/13/ie6下javascript不能隐藏select标签的bug/">2011年5月13日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天做了一个简单的项目，要求有三级联动的select菜单，可是伤不起的IE6下就出现了<strong>不能隐藏select</strong>的bug，之前我也介绍过IE6下select层高的问题，可以通过隐藏select或者<a href="http://js8.in/553.html" title="解决IE6 select z-index无效，遮挡div的bug">使用iframe遮挡</a>的方式来解决，今天的bug不同以前，大家如果在用js控制select显示隐藏的时候可能会经常遇到，调试一下午终于找到了解决的方案，特此记录一下。</p>
<h3>IE6不能隐藏select重现代码</h3>
<p>建立两个关联的select，通过javascript控制第一个select 发生变化后，第二个select根据第一个value重新添加options，如果为空则隐藏第二个select（示例中判断除第一个之外都隐藏），则由第一个select的第三个value切换到第二个value则第二个select就不会隐藏。<br>具体效果见下面的实例：</p>
<p><a href="//js8.in/mywork/ie6selectbug.html">IE6 select隐藏bug</a></p>
<h3>IE6下不能隐藏select标签解决方案</h3>
<ol>
<li>可以通过先设置select为显示，后设置为none的方式</li>
<li>通过给select添加class来控制显示<br>具体方法，见示例代码源码注释的地方。</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/04/26/转利用跨域资源共享（cors）实现ajax跨域调用/">[转]利用跨域资源共享（CORS）实现ajax跨域调用</a></h1>
  

      <time datetime="2011-04-25T18:18:45.000Z"><a href="/2011/04/26/转利用跨域资源共享（cors）实现ajax跨域调用/">2011年4月26日</a></time>
    </header>
    <div class="entry">
      
        <p>前几天看了一篇E文说部署<strong>CORS</strong>的<a href="http://feedproxy.google.com/~r/remysharp/~3/b5_CQ7MoWNU/" target="_blank">文章</a>，CORS是一中跨域的方式，于是上网找了下Nicholas C. Zakas 的文章《<a href="http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/" target="_blank">Cross-domain Ajax with Cross-Origin Resource Sharing</a>》，并且找到了中文的翻译，感觉不错，转来分享之。</p>
<p>几年前，网站开发者都因为ajax的<a href="https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript" target="_blank">同源策略</a>而撞了南墙。当我们惊叹于XMLHttpRequest对象跨浏览器支持所带来的巨大进步时，我们很快发现没有一个方法可以使我们用<strong>JavaScript实现请求跨域</strong>访问，对此我们哀叹不已。每个人在他们自己的网站上建立代理（which was the onset of a new host of open redirect problems）来摆脱这种限制。虽然开发者利用服务器代理和其它技巧避开了这种限制，而在社区的抗议者允许ajax在本地跨域调用。许多人还没意识到当前几乎所有的浏览器（Internet Explorer 8+， Firefox 3.5+， Safari 4+和 Chrome）都可通过名为<strong>Cross-Origin Resource Sharing</strong>的协议支持ajax跨域调用。</p>
<h3>跨域资源共享（CORS）</h3>
<p><a href="http://www.w3.org/TR/access-control/" target="_blank">Cross-Origin Resource Sharing</a> (<strong>CORS</strong>)是W3c工作草案，它定义了在跨域访问资源时浏览器和服务器之间如何通信。CORS背后的基本思想是使用自定义的HTTP头部允许浏览器和服务器相互了解对方，从而决定请求或响应成功与否。</p>
<p>对一个简单的请求，没有自定义头部，要么使用GET，要么使用POST，它的主体是text/plain,请求用一个名叫Orgin的额外的头部发送。Origin头部包含请求页面的头部（协议，域名，端口），这样服务器可以很容易的决定它是否应该提供响应。</p>
<blockquote>
<p>Origin: <a href="http://www.nczonline.net" target="_blank">http://www.nczonline.net</a></p>
</blockquote>
<p>如果服务器确定请求被通过，它将发送一个Access-Control-Allow-Origin头部响应发送请求的同一个源，如果是一个公共资源，则返回“*”。如：</p>
<blockquote>
<p>Access-Control-Allow-Origin: <a href="http://www.nczonline.net" target="_blank">http://www.nczonline.net</a><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/04/26/转利用跨域资源共享（cors）实现ajax跨域调用/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/04/22/使用javascript将xml解析为json/">使用javascript将XML解析为JSON</a></h1>
  

      <time datetime="2011-04-22T08:18:17.000Z"><a href="/2011/04/22/使用javascript将xml解析为json/">2011年4月22日</a></time>
    </header>
    <div class="entry">
      
        <p>今天看了<a href="http://davidwalsh.name/" target="_blank">David Walsh</a>一篇把XML格式转换为JSON格式的文章，感觉不错，简单的转载了过来。<br>下面是神奇的<strong>XML转JSON</strong>的javascript代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre>
	<span class="comment">// Changes XML to JSON</span>
<span class="function"><span class="keyword">function</span> <span class="title">xmlToJson</span><span class="params">(xml)</span> {</span>

	<span class="comment">// Create the return object</span>
	<span class="keyword">var</span> obj = {};

	<span class="keyword">if</span> (xml.nodeType == <span class="number">1</span>) { <span class="comment">// element</span>
		<span class="comment">// do attributes</span>
		<span class="keyword">if</span> (xml.attributes.length &gt; <span class="number">0</span>) {
		obj[<span class="string">"@attributes"</span>] = {};
			<span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; xml.attributes.length; j++) {
				<span class="keyword">var</span> attribute = xml.attributes.item(j);
				obj[<span class="string">"@attributes"</span>][attribute.nodeName] = attribute.nodeValue;
			}
		}
	} <span class="keyword">else</span> <span class="keyword">if</span> (xml.nodeType == <span class="number">3</span>) { <span class="comment">// text</span>
		obj = xml.nodeValue;
	}

	<span class="comment">// do children</span>
	<span class="keyword">if</span> (xml.hasChildNodes()) {
		<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; xml.childNodes.length; i++) {
			<span class="keyword">var</span> item = xml.childNodes.item(i);
			<span class="keyword">var</span> nodeName = item.nodeName;
			<span class="keyword">if</span> (<span class="keyword">typeof</span>(obj[nodeName]) == <span class="string">"undefined"</span>) {
				obj[nodeName] = xmlToJson(item);
			} <span class="keyword">else</span> {
				<span class="keyword">if</span> (<span class="keyword">typeof</span>(obj[nodeName].length) == <span class="string">"undefined"</span>) {
					<span class="keyword">var</span> old = obj[nodeName];
					obj[nodeName] = [];
					obj[nodeName].push(old);
				}
				obj[nodeName].push(xmlToJson(item));
			}
		}
	}
	<span class="keyword">return</span> obj;
};
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/04/22/使用javascript将xml解析为json/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/04/21/一道js正则笔试题/">一道js正则笔试题</a></h1>
  

      <time datetime="2011-04-20T22:12:51.000Z"><a href="/2011/04/21/一道js正则笔试题/">2011年4月21日</a></time>
    </header>
    <div class="entry">
      
        <h3>写在前面</h3>
<p>终于找到工作了，现在在新浪微博工作，谢谢这段时间来帮我找工作的朋友。北京的生活的确压力很大，最起码心累，自己慢慢适应就好了。</p>
<p>不得不提的是拆那ZF的办事效率，我回家转户口，青岛老家来回跑了三四天，竟然还是没有给我搞定，最后说青岛户口已经起出来了，老家还要等十五天之后才可以看到结果，然后才能给我落户口！难道ZF的技术就那么差劲啊！数据库还是不统一的，还是故意要老百姓多跑几次，以调动内需？哎……</p>
<h3>一道javascript正则笔试题目</h3>
<p>在笔试的时候碰到了一道<strong>正则</strong>的题目，自己不会，后来查了很多资料也没找到，经过在Qwrap的QQ群里提问终于明白了是什么回事，特地记录一下。原题大致如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> a = <span class="keyword">new</span> RegExp(<span class="string">"123"</span>,<span class="string">"g"</span>);
<span class="keyword">var</span> b = <span class="string">"abc#123"</span>;

console.log(a.test(b));<span class="comment">//true</span>
console.log(a.test(b));<span class="comment">//false</span>
console.log(a.test(b));<span class="comment">//true</span>
console.log(a.test(b));<span class="comment">//false</span>
</pre></td></tr></table></figure>

<p>问为什么会输出<code>true</code>，<code>false</code>，<code>true</code>，<code>false</code>？<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/04/21/一道js正则笔试题/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/20/最短的domready代码/">最短的DOMReady代码</a></h1>
  

      <time datetime="2011-03-20T09:39:31.000Z"><a href="/2011/03/20/最短的domready代码/">2011年3月20日</a></time>
    </header>
    <div class="entry">
      
        <p>自己的<a href="http://js8.in/677.html" title="一个轻量级的js框架">js框架YQ</a>还没有添加<strong>DOMReady</strong>代码，今天看到国外js牛人Dustin Diaz的<a href="http://dustindiaz.com/smallest-domready-ever" target="_blank">文章</a>，得到了一份最短的DOMReady代码，分享出来：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">r</span><span class="params">(f)</span>{</span>/<span class="keyword">in</span>/.test(document.readyState)?setTimeout(<span class="string">'r('</span>+f+<span class="string">')'</span>,<span class="number">9</span>):f()}
</pre></td></tr></table></figure>

<p>Dustin Diaz放弃了使用IE的<code>document.documentElement.doScroll(&#39;left&#39;)</code>（这也是多数框架的方法，<a href="http://javascript.nwbox.com/IEContentLoaded/" target="_blank">详细介绍</a>）。使用了setTimeout来定时检测<code>document.readyState</code>，<code>document.readyState</code>有以下五种状态：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/20/最短的domready代码/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/">WinHttp.WinHttpRequest.5.1—可以用作抓取的msxml 4.0底层对象</a></h1>
  

      <time datetime="2011-03-17T13:10:00.000Z"><a href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/">2011年3月17日</a></time>
    </header>
    <div class="entry">
      
        <p>前些日子在博客园上看到的一篇文章（现在搜索不到了，尽转载的），介绍了下WinHttp.WinHttpRequest.5.1。自己也查了一些资料，写了个vbscript脚本，来添加<a href="http://js8.in/634.html" title="Sina App Engine开发实例：天气预报的定时短信（二）">新浪微博</a>好友。<strong>WinHttp.WinHttpRequest</strong>的介绍可以去微软官方查看，也有个介绍的网站：<a href="http://www.neilstuff.com/winhttp/。感兴趣的可以移步去围观一下。" target="_blank">http://www.neilstuff.com/winhttp/。感兴趣的可以移步去围观一下。</a></p>
<p>简单看一下我改的博客园文章的代码，用于新浪微博自动添加好友，因为是前些日子写的。<a href="http://js8.in/resume.html" title="_blank">申请离职</a>之后，害怕自己的以前的一些代码丢失，特发到网上来备案一下。简单解释在代码中，加上之前的php的<a href="http://js8.in/379.html">curl函数</a>，WinHttp.WinHttpRequest.5.1应该对以后一些研究会有帮助。而且WinHttp.WinHttpRequest也可以设置refer，cookie，user-agent，proxy……，关键是他可以在cmd里面跑，感觉比较酷（当然php也可以做到，但是不熟悉php的可以用js写出来代替curl）。不废话了，直接上代码。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">RemoteCall</span><span class="params">(method, url, param, header)</span>{</span>  
    <span class="keyword">var</span> obj = <span class="keyword">new</span> ActiveXObject(<span class="string">"WinHttp.WinHttpRequest.5.1"</span>);  
    obj.Open(method||<span class="string">"GET"</span>, url, <span class="literal">false</span>);  
    obj.Option(<span class="number">4</span>) = <span class="number">13056</span>;  
    obj.Option(<span class="number">6</span>) = <span class="literal">false</span>;  
    obj.setRequestHeader(<span class="string">"Cookie"</span>, <span class="string">"string"</span>);<span class="comment">//先设置一个cookie，防止出错，见官方文档</span>
    obj.setRequestHeader(<span class="string">"Cookie"</span>,<span class="string">"你的新浪微博cookie"</span>);
    obj.setRequestHeader(<span class="string">"Host"</span>,<span class="string">"t.sina.com.cn"</span>);
    obj.setRequestHeader(<span class="string">"Accept"</span>,<span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"</span>);
    obj.setRequestHeader(<span class="string">"User-Agent"</span>,<span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 QQDownload/1.7 FirePHP/0.5"</span>);
    obj.Send(param);  
    <span class="keyword">return</span> obj;  
}
<span class="function"><span class="keyword">function</span> <span class="title">post</span><span class="params">(url,param)</span>{</span>
    <span class="keyword">var</span> obj = <span class="keyword">new</span> ActiveXObject(<span class="string">"WinHttp.WinHttpRequest.5.1"</span>);  
    obj.Open(<span class="string">"POST"</span>, url, <span class="literal">false</span>);  
    obj.Option(<span class="number">4</span>) = <span class="number">13056</span>;  
    obj.Option(<span class="number">6</span>) = <span class="literal">false</span>;  
    obj.setRequestHeader(<span class="string">"Cookie"</span>, <span class="string">"string"</span>);
    obj.setRequestHeader(<span class="string">"Cookie"</span>,<span class="string">"你的新浪微博cookie"</span>);
    obj.setRequestHeader(<span class="string">"Host"</span>,<span class="string">"t.sina.com.cn"</span>);
    obj.setRequestHeader(<span class="string">"Content-Type"</span>,<span class="string">"application/x-www-form-urlencoded; charset=UTF-8"</span>);
    obj.setRequestHeader(<span class="string">"Accept"</span>,<span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"</span>);
    obj.setRequestHeader(<span class="string">"User-Agent"</span>,<span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 QQDownload/1.7 FirePHP/0.5"</span>);
    obj.Send(param);  
    <span class="keyword">return</span> obj; 
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/15/html5css3版的爱墙上了/">html5+css3版的爱墙上了</a></h1>
  

      <time datetime="2011-03-15T13:15:27.000Z"><a href="/2011/03/15/html5css3版的爱墙上了/">2011年3月15日</a></time>
    </header>
    <div class="entry">
      
        <p>趁着中午休息，发篇文章。不管怎样，从周末开始折腾重构爱墙昨天上了（地址：<a href="http://lovewall.js8.in" title="爱墙" target="_blank"><a href="http://lovewall.js8.in">http://lovewall.js8.in</a></a>，老版：<a href="http://love.js8.in" target="_blank"><a href="http://love.js8.in">http://love.js8.in</a></a>），昨天由于局域网的DNS没有更新，所以也没访问，今天看了下还算比较正常，就是空间速度有点挫，国外的，你懂的！</p>
<p>新版爱墙程序变化：</p>
<ol>
<li>程序全部重构，php采用公司同事开发的<a href="http://raremvc.sinaapp.com" target="_blank">rareMVC框架</a></li>
<li>前端重写，采用html5+css3，所以推荐使用chrome或者FF3.6+体验</li>
<li>javascript代码全部重写，采用了自己的简单框架YQ（<a href="http://js8.in/677.html">暂命名</a>）</li>
<li><p>添加表情功能<br>为啥重构爱墙？：</p>
</li>
<li><p>熟悉php面向对象开发，MVC开发</p>
</li>
<li>实践html5+css3</li>
<li>测试自己的框架YQ（<a href="http://js8.in/js/yq.js">源码</a>）</li>
<li>打发周末时间<br>这个版本的爱墙程序兼容IE6+，chrome，Firefox，主要是练手用的，不再继续维护开发。此程序前端代码全部未压缩处理，欢迎观摩指导</li>
</ol>
<p>ps：今天看了下浏览记录，发现谷歌搜索“jsonp”我的一篇文章竟然排了第一，甚是欣慰~O(∩_∩)O哈哈~</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/14/转变代码思路：js浏览器判断方法/">转变代码思路：js浏览器判断方法</a></h1>
  

      <time datetime="2011-03-14T13:04:05.000Z"><a href="/2011/03/14/转变代码思路：js浏览器判断方法/">2011年3月14日</a></time>
    </header>
    <div class="entry">
      
        <p>“变则通，通则达”，在coding的时候也要做到，有时候思路往往太过于局限性，对<strong>浏览器判断</strong>方法的实例，来说说代码思路的转变。</p>
<h3>navigator.userAgent分析</h3>
<p>关于<strong>javascript</strong>对浏览器的判断，很早之前我写过一篇文章《js判断浏览器的函数，可区分chrome，safari\》。</p>
<p>YQ框架中也是采用的这个方法，可是后来想到了有位网友说判断火狐的版本号会错误，这是因为火狐的version的判断走了正则，而没有考虑到firefox的，其实不止firefox有这个bug。</p>
<p>首先来看看火狐的<code>navigator.userAgent</code>:<br>这个是我的firefox（3.6.15，却显示3.6.8，不知何解，查看关于也是这个问题：版本不统一）</p>
<blockquote>
<p>Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 QQDownload/1.7</p>
</blockquote>
<p>根据正则的写法，火狐的版本号应该这样写<code>/Firefox[\/]([\w.]+)/</code><br>而safari的确是类似的：</p>
<blockquote>
<p>……Version/3.1 Safari/525.13</p>
</blockquote>
<p>其中Version为实际的版本号，也是我们常称呼的版本号。</p>
<h3>琢磨</h3>
<p>开始写js判断浏览器的，跟jQuery的<strong>$.browser</strong>一样，可是版本号会出现问题，只不过是加了个chrome判断而已。开始想解决方法，初步想得是通过一个正则对象把浏览器的名称和版本号统一匹配出来，正则对象设置如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> browserRegExp = {
    ie:<span class="regexp">/(msie)[ ]([\w.]+)/</span>,
    firefox:<span class="regexp">/(firefox)[ |\/]([\w.]+)/</span>,
    chrome:<span class="regexp">/(chrome)[ |\/]([\w.]+)/</span>,
    safari:<span class="regexp">/version[ |\/]([\w.]+)[ ](safari)/</span>,
    opera:<span class="regexp">/(opera)[ |\/]([\w.]+)/</span>
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/14/转变代码思路：js浏览器判断方法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/">自己写的一个轻量级javascript框架的设计模式</a></h1>
  

      <time datetime="2011-03-13T17:15:39.000Z"><a href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/">2011年3月14日</a></time>
    </header>
    <div class="entry">
      
        <p>公司一直使用jQuery框架，一些小的项目还是觉得jQuery框架太过于强大了，于是自己周末有空琢磨着写个自己的框架。谈到js的设计模式，不得不说说js的类继承机制，javascript不同于PHP可以轻松的实现类继承，不过javascript的类继承方法还是有的，常见的有构建函数、原型扩展、综合……，也有一些专门写类的函数，例如jQuery的作者有个类继承函数。关于类继承写法可以简单看看<a href="http://kevlindev.com/tutorials/javascript/inheritance/index.htm" target="_blank">这篇文章</a>。</p>
<p>我自己写的框架也不知道叫什么名字，刚开始写的时候随手写了个W（姓拼音，之前写过jQuery弹出框插件<a href="http://js8.in/wbox-jquery">wBox</a>），现在写这篇文章重新整理了一下思想，换了YQ（名字拼音，你懂的~）。</p>
<h3>核心代码</h3>
<p>框架设计的时候尽量做到了支持链式写法，也就是返回<code>this</code>，可以$(selector).handler1().handler2()……无限写下去，只要不是有返回值的就可以继续。包括了event，dom，css，还有fadeIn，fadeOut动画（因为再重构<a href="http://love.js8.in" target="_blank">爱墙</a>[html5+css3]版，所有顺手加上了这个功能）。如果配合sizzle选择器就更牛了！</p>
<p>下面说说框架的核心代码，等完善了之后跟新版html5爱墙一起放出，主要的代码如下：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
    <a href="/archives/2011/page/3/" class="alignleft prev">上一页</a>
  
  
    <a href="/archives/2011/page/5/" class="alignright next">下一页</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/乱七八糟/">乱七八糟</a><small>30</small></li>
  
    <li><a href="/categories/前端开发/">前端开发</a><small>117</small></li>
  
    <li><a href="/categories/后端运维/">后端运维</a><small>27</small></li>
  
    <li><a href="/categories/王婆卖瓜/">王婆卖瓜</a><small>4</small></li>
  
    <li><a href="/categories/读书笔记/">读书笔记</a><small>5</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签</h3>
  <ul class="entry clearfix">
  
    <li><a href="/tags/DOM/">DOM<sup>2</sup></a></li>
  
    <li><a href="/tags/IE/">IE<sup>1</sup></a></li>
  
    <li><a href="/tags/IE6/">IE6<sup>2</sup></a></li>
  
    <li><a href="/tags/PPT/">PPT<sup>3</sup></a></li>
  
    <li><a href="/tags/VPS/">VPS<sup>1</sup></a></li>
  
    <li><a href="/tags/ajax/">ajax<sup>5</sup></a></li>
  
    <li><a href="/tags/apache/">apache<sup>1</sup></a></li>
  
    <li><a href="/tags/audio/">audio<sup>2</sup></a></li>
  
    <li><a href="/tags/a标签/">a标签<sup>1</sup></a></li>
  
    <li><a href="/tags/canvas/">canvas<sup>1</sup></a></li>
  
    <li><a href="/tags/chrome/">chrome<sup>3</sup></a></li>
  
    <li><a href="/tags/css/">css<sup>15</sup></a></li>
  
    <li><a href="/tags/eAccelerator/">eAccelerator<sup>1</sup></a></li>
  
    <li><a href="/tags/ecmascript/">ecmascript<sup>3</sup></a></li>
  
    <li><a href="/tags/escape/">escape<sup>1</sup></a></li>
  
    <li><a href="/tags/event/">event<sup>1</sup></a></li>
  
    <li><a href="/tags/express/">express<sup>1</sup></a></li>
  
    <li><a href="/tags/fis/">fis<sup>1</sup></a></li>
  
    <li><a href="/tags/fisp/">fisp<sup>1</sup></a></li>
  
    <li><a href="/tags/grunt/">grunt<sup>1</sup></a></li>
  
    <li><a href="/tags/handleEvent/">handleEvent<sup>1</sup></a></li>
  
    <li><a href="/tags/html5/">html5<sup>3</sup></a></li>
  
    <li><a href="/tags/iframe/">iframe<sup>1</sup></a></li>
  
    <li><a href="/tags/iptables/">iptables<sup>1</sup></a></li>
  
    <li><a href="/tags/javascript/">javascript<sup>79</sup></a></li>
  
    <li><a href="/tags/linux/">linux<sup>4</sup></a></li>
  
    <li><a href="/tags/livereload/">livereload<sup>1</sup></a></li>
  
    <li><a href="/tags/memcached/">memcached<sup>1</sup></a></li>
  
    <li><a href="/tags/mixjs/">mixjs<sup>1</sup></a></li>
  
    <li><a href="/tags/mysql/">mysql<sup>2</sup></a></li>
  
    <li><a href="/tags/name/">name<sup>1</sup></a></li>
  
    <li><a href="/tags/nginx/">nginx<sup>2</sup></a></li>
  
    <li><a href="/tags/nodejs/">nodejs<sup>7</sup></a></li>
  
    <li><a href="/tags/php/">php<sup>19</sup></a></li>
  
    <li><a href="/tags/session/">session<sup>1</sup></a></li>
  
    <li><a href="/tags/storage/">storage<sup>1</sup></a></li>
  
    <li><a href="/tags/svn/">svn<sup>1</sup></a></li>
  
    <li><a href="/tags/this/">this<sup>1</sup></a></li>
  
    <li><a href="/tags/ueditor/">ueditor<sup>1</sup></a></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs<sup>1</sup></a></li>
  
    <li><a href="/tags/webbench/">webbench<sup>1</sup></a></li>
  
    <li><a href="/tags/websocket/">websocket<sup>1</sup></a></li>
  
    <li><a href="/tags/web前端开发/">web前端开发<sup>5</sup></a></li>
  
    <li><a href="/tags/windows7技巧/">windows7技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/wordpress/">wordpress<sup>3</sup></a></li>
  
    <li><a href="/tags/xss/">xss<sup>3</sup></a></li>
  
    <li><a href="/tags/严格模式/">严格模式<sup>1</sup></a></li>
  
    <li><a href="/tags/位运算/">位运算<sup>1</sup></a></li>
  
    <li><a href="/tags/作用域/">作用域<sup>3</sup></a></li>
  
    <li><a href="/tags/前端优化/">前端优化<sup>1</sup></a></li>
  
    <li><a href="/tags/前端工具/">前端工具<sup>5</sup></a></li>
  
    <li><a href="/tags/加速器/">加速器<sup>1</sup></a></li>
  
    <li><a href="/tags/压力测试/">压力测试<sup>1</sup></a></li>
  
    <li><a href="/tags/右键/">右键<sup>1</sup></a></li>
  
    <li><a href="/tags/安全/">安全<sup>1</sup></a></li>
  
    <li><a href="/tags/性能/">性能<sup>3</sup></a></li>
  
    <li><a href="/tags/我也八卦/">我也八卦<sup>1</sup></a></li>
  
    <li><a href="/tags/执行环境/">执行环境<sup>1</sup></a></li>
  
    <li><a href="/tags/技巧/">技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/播放器/">播放器<sup>1</sup></a></li>
  
    <li><a href="/tags/数组/">数组<sup>1</sup></a></li>
  
    <li><a href="/tags/标签/">标签<sup>1</sup></a></li>
  
    <li><a href="/tags/模块化/">模块化<sup>2</sup></a></li>
  
    <li><a href="/tags/算法/">算法<sup>1</sup></a></li>
  
    <li><a href="/tags/网络技术/">网络技术<sup>73</sup></a></li>
  
    <li><a href="/tags/虚拟主机/">虚拟主机<sup>1</sup></a></li>
  
    <li><a href="/tags/解耦/">解耦<sup>1</sup></a></li>
  
    <li><a href="/tags/语法限制/">语法限制<sup>1</sup></a></li>
  
    <li><a href="/tags/跨域/">跨域<sup>3</sup></a></li>
  
    <li><a href="/tags/路径/">路径<sup>1</sup></a></li>
  
    <li><a href="/tags/软件心得/">软件心得<sup>3</sup></a></li>
  
  </ul>
</div>



  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 三水清
  
</div>
<div class="clearfix"></div></footer>
  <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


    
        <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6635976" ></script>
        <script type="text/javascript" id="bdshell_js"></script>
        <script type="text/javascript">
        document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
        </script>
    
    



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1c76f5cc8274a56106b13b9c9b1fb046' type='text/javascript'%3E%3C/script%3E"));
    </script>


</body>
</html>