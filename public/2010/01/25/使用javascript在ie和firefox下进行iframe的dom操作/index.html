<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>使用JavaScript在IE和Firefox下进行iframe的DOM操作 - 三水清</title>
  <meta name="author" content="三水清">
  
  <meta name="description" content="昨天一个新来的同事关于iframe中进行DOM操作的问题，我说只要是不存在跨域的问题，是可以进行iframe 之间的DOM操作的。并且拿了以前写的两篇文章给新同事进行参考——《用document.domain+iframe实现Ajax跨子域》、《于Ajax在浏览器中产生前进后退的实现方法》。其中关于使用iframe进行跨域的demo，由于更换了新域名js8.in，导致了demo不能使用了，昨天紧急修改了一下，总算是可以使用啦~窃喜~
今天就写个完整的使用JavaScript进行iframe DOM操作的文章啦~跟大家讨论下IE和Firefox下iframe DOM操作的差异，然后写一个父窗口操作子窗口DOM，子窗口操作父窗口DOM，子窗口操作子窗口DOM的实例。经测试，断桥残雪写的iframe DOM操作实例，不仅仅只是在IE和Firefox下使用正常，而是可以兼容所有浏览器的。本文只是借IE和Firefox在iframe DOM操作的不同，进行分析说明JavaScript在DOM操作中两者的不同。
IE和Firefox对iframe document对象的差异性
在IE6、IE7中，我们可以使用 document.frames[ID].document 来访问iframe子窗口中的document对象，可是这是不符合W3C标准的写法，也是IE下独有的方法，在Firefox下却不可以使用，Firefox下使用的是符合W3C标准的 document.getElementById(ID).contentDocument 方法，今天我在写实例的时候，通过IE8进行测试，IE8也是使用的符合W3C标准的 document.getElementById(ID).contentDocument 方法。所以我们可以写一个在IE和Firefox下通用的获取iframe document对象的函数—getIFrameDOM：

1
2
3
function getIFrameDOM(id){
&gt; 	return document.getElementById(id).contentDocument || document.frames[id].document;
&gt; }



P.S.:如果我们要获取iframe的window对象，而不是document对象，可以使用document.getElementById(ID).contentWindow的方法。这样我们就可以使用子窗口中的window对象了，比如子窗口中的函数。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="使用JavaScript在IE和Firefox下进行iframe的DOM操作"/>
  <meta property="og:site_name" content="三水清"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="atom.xml" title="三水清" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">三水清</a></h1>
  <h2><a href="/">专注前端开发,分享Javascript/CSS/PHP等Web前端开发技巧</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="https://github.com/ksky521">Github</a></li>
    
      <li><a href="http://weibo.com/sanshuiqing">新浪微博</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon icon-black"></div>
      
      
  
    <h1 class="title">使用JavaScript在IE和Firefox下进行iframe的DOM操作</h1>
  

      <time datetime="2010-01-25T12:59:38.000Z"><a href="/2010/01/25/使用javascript在ie和firefox下进行iframe的dom操作/">2010年1月25日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天一个新来的同事关于<strong>iframe</strong>中进行<strong>DOM操作</strong>的问题，我说只要是不存在跨域的问题，是可以进行iframe 之间的DOM操作的。并且拿了以前写的两篇文章给新同事进行参考——《<a href="http://js8.in/443.html" title="用document.domain+iframe实现Ajax跨子域">用document.domain+iframe实现Ajax跨子域</a>》、《<a href="http://js8.in/311.html" title="于Ajax在浏览器中产生前进后退的实现方法">于Ajax在浏览器中产生前进后退的实现方法</a>》。其中关于使用iframe进行跨域的<a href="http://js8.in/mywork/crossdomain/index.html" title="iframe跨域演示实例">demo</a>，由于更换了新域名<strong>js8.in</strong>，导致了<a href="http://js8.in/mywork/crossdomain/index.html">demo</a>不能使用了，昨天紧急修改了一下，总算是可以使用啦~窃喜~</p>
<p>今天就写个完整的使用<strong>JavaScript</strong>进行iframe DOM操作的文章啦~跟大家讨论下IE和Firefox下<strong>iframe DOM操作</strong>的差异，然后写一个父窗口操作子窗口DOM，子窗口操作父窗口DOM，子窗口操作子窗口DOM的实例。经测试，断桥残雪写的iframe DOM操作实例，不仅仅只是在IE和Firefox下使用正常，而是可以<strong>兼容所有浏览器的</strong>。本文只是借IE和Firefox在iframe DOM操作的不同，进行分析说明JavaScript在DOM操作中两者的不同。</p>
<h3>IE和Firefox对iframe document对象的差异性</h3>
<p>在IE6、IE7中，我们可以使用 <strong>document.frames[ID].document</strong> 来访问iframe子窗口中的<strong>document对象</strong>，可是这是不符合W3C标准的写法，也是IE下独有的方法，在Firefox下却不可以使用，Firefox下使用的是符合W3C标准的 <strong>document.getElementById(ID).contentDocument </strong>方法，今天我在写实例的时候，通过IE8进行测试，IE8也是使用的符合W3C标准的 document.getElementById(ID).contentDocument 方法。所以我们可以写一个在IE和Firefox下通用的获取iframe document对象的函数—getIFrameDOM：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">getIFrameDOM</span><span class="params">(id)</span>{</span>
&gt; 	<span class="keyword">return</span> document.getElementById(id).contentDocument || document.frames[id].document;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p><em>P.S.</em>:如果我们要获取iframe的<strong>window对象</strong>，而不是document对象，可以使用document.getElementById(ID).contentWindow的方法。这样我们就可以使用子窗口中的window对象了，比如子窗口中的函数。<br><a id="more"></a></p>
<h3>在子窗口使用父窗口的函数，获取父窗口document对象</h3>
<p>在子窗口中，我们可以通过<strong>parent</strong>就可以获得父窗口的window对象，如果假如我们在父窗口有一个函数为getIFrameDOM，我们可以通过parent.getIFrameDOM来调用，同理我们使用parent.document就可以在子窗口中访问父窗口的document对象了。</p>
<h3>使用JavaScript进行iframe的DOM操作实例</h3>
<p>首先，我们在父窗口中引入两个iframe子窗口，ID分别为wIframeA、wIframeB，地址分别为：a.html、b.html。<br>父窗口主要HTML代码如下：&gt; </p>
<figure class="highlight lang-html"><div"><figcaption><span>id="pHello" style="margin:10px auto;width:360px;height:30px;</span></figcaption><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>此处可通过iframeB的JavaScript函数，来替换哦~<span class="xml"><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
&gt; <span class="tag">&lt;<span class="title">iframe</span> <span class="attribute">id</span>=<span class="value">"wIframeA"</span> <span class="attribute">name</span>=<span class="value">"myiframeA"</span> <span class="attribute">src</span>=<span class="value">"a.html"</span> <span class="attribute">scrolling</span>=<span class="value">"no"</span> <span class="attribute">frameborder</span>=<span class="value">"0"</span>&gt;</span><span class="tag">&lt;/<span class="title">iframe</span>&gt;</span>
&gt; <span class="tag">&lt;<span class="title">iframe</span> <span class="attribute">id</span>=<span class="value">"wIframeB"</span> <span class="attribute">name</span>=<span class="value">"myiframeB"</span> <span class="attribute">src</span>=<span class="value">"b.html"</span> <span class="attribute">scrolling</span>=<span class="value">"no"</span> <span class="attribute">frameborder</span>=<span class="value">"0"</span>&gt;</span><span class="tag">&lt;/<span class="title">iframe</span>&gt;</span></span>
</pre></td></tr></table></figure>

<p>在子窗口A、B中我放了一个ID为hello的P，以方便我们进行DOM操作演示，子窗口A、B的主要HTML代码如下：&gt; </p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
&gt; 
&gt; Hello World!
&gt;
</pre></td></tr></table></figure>

<p><strong>1、在iframe中，父窗口操作子窗口的DOM</strong></p>
<p>建好了父窗口跟子窗口，这样我们可以在父窗口中，通过以下iframeA()函数来把子窗口A更换P的背景颜色为红色：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">iframeA</span><span class="params">()</span>{</span><span class="comment">//给子窗口A改变ID为hello的背景色</span>
&gt; 	<span class="keyword">var</span> a = getIFrameDOM(<span class="string">"wIframeA"</span>);
&gt; 	a.getElementById(<span class="string">'hello'</span>).style.background = <span class="string">"red"</span>;
&gt; }
&gt; <span class="function"><span class="keyword">function</span> <span class="title">getIFrameDOM</span><span class="params">(id)</span>{</span><span class="comment">//兼容IE、Firefox的iframe DOM获取函数</span>
&gt; 	<span class="keyword">return</span> document.getElementById(id).contentDocument || document.frames[id].document;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p><strong>2、在iframe中，子窗口操作父窗口的DOM</strong></p>
<p>在子窗口中，我们可以方便的进行父窗口DOM操作，只需要在DOM操作之前添加亦歌parent对象的方法就可以啦，如：在上面的子窗口B中，我们可以使用下面的代码把，父窗口中ID为“pHello”的内容给替换掉:&gt; </p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>parent.document.getElementById("pHello").innerHTML="
&gt; 
&gt; O(∩_∩)O哈哈~用子窗口B就可以替换你！不服吗？
&gt; ";
</pre></td></tr></table></figure>

<p><strong>3、在iframe中，子窗口A操作子窗口B的DOM</strong></p>
<p>既然子窗口可以操作父窗口的window对象和document对象，那么子窗口也可以操作另外的子窗口的DOM啦~断桥残雪在子窗口B中可以直接使用parent直接调用父窗口中的getIFrameDOM函数获得子窗口A的document对象，这样要修改子窗口A的内容就很简单啦，如以下的代码：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> a=parent.getIFrameDOM(<span class="string">"wIframeA"</span>);
&gt; a.getElementById(<span class="string">'hello'</span>).innerHTML=<span class="string">"&lt;span style='color:blue;font-size:18px;background:yellow;'&gt;看，俺子窗口B也能DOM你A！&lt;/span&gt;"</span>;
</pre></td></tr></table></figure>

</blockquote>
<h3>完整的实例演示</h3>
<p>点击下面地址就可以看到断桥残雪写的完整的iframe DOM操作的演示啦：</p>
<blockquote>
<center><a href="http://js8.in/mywork/iframe_dom" title="使用JavaScript进行iframe的DOM操作演示">JS进行iframe的DOM操作演示点击查看</a></center>

</blockquote>
<p>到这里，你还会以为iframe的DOM操作很难吗？嘿嘿~我想有了父窗口操作子窗口DOM，子窗口操作父窗口DOM，子窗口操作子窗口DOM这三个实例讲解，我们就可以对iframe的DOM操作了如指掌啦~其实iframe在我们开发中还有很多灵活的用法，比如跨域、实现Ajax的前进后退，该兴趣的童鞋可以继续深入的阅读下面两篇文章：<a href="http://js8.in/443.html" title="用document.domain+iframe实现Ajax跨子域">用document.domain+iframe实现Ajax跨子域</a>》、《<a href="http://js8.in/311.html" title="于Ajax在浏览器中产生前进后退的实现方法">于Ajax在浏览器中产生前进后退的实现方法</a>》</p>

      
    </div>
    <footer>
      
        


<div class="articletags clearfix">
	<i class="icon-tag"></i>Tags: <a href="/tags/javascript/">javascript</a><a href="/tags/网络技术/">网络技术</a>
	<i class="icon-folder"></i>categories:  <a href="/categories/前端开发/">前端开发</a>
</div>


        
<div id="bdshare" class="bdshare_t bds_tools get-codes-bdshare">
<span class="bds_more">分享到：</span>
<a class="bds_tsina">新浪微博</a>
<a class="bds_qzone">QQ空间</a>
<a class="bds_tqq">腾讯微博</a>
<a class="bds_renren">人人网</a>
<a class="bds_douban">豆瓣网</a>
<a class="bds_bdhome">百度首页</a>
<a class="bds_youdao">有道云笔记</a>
<a class="bds_copy">复制网址</a>
</div>
<script>
var bds_config = {
    wbUid:'2037334587',
    tsina: '61439547',
    pic:''
};
</script>



        <div class="pagepart clearfix">
 
	<a href="/2010/01/26/使用hash来实现ajax前进后退/" class="prev" title="使用hash来实现Ajax前进后退">使用hash来实现Ajax前进后退</a>
 
 
	<a href="/2010/01/19/21个常用的-php-代码汇总/" class="next" title="21个常用的 PHP 代码汇总">21个常用的 PHP 代码汇总</a>
 
</div>
      
      
<div class="border"></div>
<section class="comment">
    <p class="title ico-comment">文章评论<a name="comments"></a></p>
    <div class="ds-thread" data-title="使用JavaScript在IE和Firefox下进行iframe的DOM操作"></div>
</section>


      <div class="clearfix"></div>
    </footer>
  </div>
</article>


</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/乱七八糟/">乱七八糟</a><small>30</small></li>
  
    <li><a href="/categories/前端开发/">前端开发</a><small>117</small></li>
  
    <li><a href="/categories/后端运维/">后端运维</a><small>27</small></li>
  
    <li><a href="/categories/王婆卖瓜/">王婆卖瓜</a><small>4</small></li>
  
    <li><a href="/categories/读书笔记/">读书笔记</a><small>5</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签</h3>
  <ul class="entry clearfix">
  
    <li><a href="/tags/DOM/">DOM<sup>2</sup></a></li>
  
    <li><a href="/tags/IE/">IE<sup>1</sup></a></li>
  
    <li><a href="/tags/IE6/">IE6<sup>2</sup></a></li>
  
    <li><a href="/tags/PPT/">PPT<sup>3</sup></a></li>
  
    <li><a href="/tags/VPS/">VPS<sup>1</sup></a></li>
  
    <li><a href="/tags/ajax/">ajax<sup>5</sup></a></li>
  
    <li><a href="/tags/apache/">apache<sup>1</sup></a></li>
  
    <li><a href="/tags/audio/">audio<sup>2</sup></a></li>
  
    <li><a href="/tags/a标签/">a标签<sup>1</sup></a></li>
  
    <li><a href="/tags/canvas/">canvas<sup>1</sup></a></li>
  
    <li><a href="/tags/chrome/">chrome<sup>3</sup></a></li>
  
    <li><a href="/tags/css/">css<sup>15</sup></a></li>
  
    <li><a href="/tags/eAccelerator/">eAccelerator<sup>1</sup></a></li>
  
    <li><a href="/tags/ecmascript/">ecmascript<sup>3</sup></a></li>
  
    <li><a href="/tags/escape/">escape<sup>1</sup></a></li>
  
    <li><a href="/tags/event/">event<sup>1</sup></a></li>
  
    <li><a href="/tags/express/">express<sup>1</sup></a></li>
  
    <li><a href="/tags/fis/">fis<sup>1</sup></a></li>
  
    <li><a href="/tags/fisp/">fisp<sup>1</sup></a></li>
  
    <li><a href="/tags/grunt/">grunt<sup>1</sup></a></li>
  
    <li><a href="/tags/handleEvent/">handleEvent<sup>1</sup></a></li>
  
    <li><a href="/tags/html5/">html5<sup>3</sup></a></li>
  
    <li><a href="/tags/iframe/">iframe<sup>1</sup></a></li>
  
    <li><a href="/tags/iptables/">iptables<sup>1</sup></a></li>
  
    <li><a href="/tags/javascript/">javascript<sup>79</sup></a></li>
  
    <li><a href="/tags/linux/">linux<sup>4</sup></a></li>
  
    <li><a href="/tags/livereload/">livereload<sup>1</sup></a></li>
  
    <li><a href="/tags/memcached/">memcached<sup>1</sup></a></li>
  
    <li><a href="/tags/mixjs/">mixjs<sup>1</sup></a></li>
  
    <li><a href="/tags/mysql/">mysql<sup>2</sup></a></li>
  
    <li><a href="/tags/name/">name<sup>1</sup></a></li>
  
    <li><a href="/tags/nginx/">nginx<sup>2</sup></a></li>
  
    <li><a href="/tags/nodejs/">nodejs<sup>7</sup></a></li>
  
    <li><a href="/tags/php/">php<sup>19</sup></a></li>
  
    <li><a href="/tags/session/">session<sup>1</sup></a></li>
  
    <li><a href="/tags/storage/">storage<sup>1</sup></a></li>
  
    <li><a href="/tags/svn/">svn<sup>1</sup></a></li>
  
    <li><a href="/tags/this/">this<sup>1</sup></a></li>
  
    <li><a href="/tags/ueditor/">ueditor<sup>1</sup></a></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs<sup>1</sup></a></li>
  
    <li><a href="/tags/webbench/">webbench<sup>1</sup></a></li>
  
    <li><a href="/tags/websocket/">websocket<sup>1</sup></a></li>
  
    <li><a href="/tags/web前端开发/">web前端开发<sup>5</sup></a></li>
  
    <li><a href="/tags/windows7技巧/">windows7技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/wordpress/">wordpress<sup>3</sup></a></li>
  
    <li><a href="/tags/xss/">xss<sup>3</sup></a></li>
  
    <li><a href="/tags/严格模式/">严格模式<sup>1</sup></a></li>
  
    <li><a href="/tags/位运算/">位运算<sup>1</sup></a></li>
  
    <li><a href="/tags/作用域/">作用域<sup>3</sup></a></li>
  
    <li><a href="/tags/前端优化/">前端优化<sup>1</sup></a></li>
  
    <li><a href="/tags/前端工具/">前端工具<sup>5</sup></a></li>
  
    <li><a href="/tags/加速器/">加速器<sup>1</sup></a></li>
  
    <li><a href="/tags/压力测试/">压力测试<sup>1</sup></a></li>
  
    <li><a href="/tags/右键/">右键<sup>1</sup></a></li>
  
    <li><a href="/tags/安全/">安全<sup>1</sup></a></li>
  
    <li><a href="/tags/性能/">性能<sup>3</sup></a></li>
  
    <li><a href="/tags/我也八卦/">我也八卦<sup>1</sup></a></li>
  
    <li><a href="/tags/执行环境/">执行环境<sup>1</sup></a></li>
  
    <li><a href="/tags/技巧/">技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/播放器/">播放器<sup>1</sup></a></li>
  
    <li><a href="/tags/数组/">数组<sup>1</sup></a></li>
  
    <li><a href="/tags/标签/">标签<sup>1</sup></a></li>
  
    <li><a href="/tags/模块化/">模块化<sup>2</sup></a></li>
  
    <li><a href="/tags/算法/">算法<sup>1</sup></a></li>
  
    <li><a href="/tags/网络技术/">网络技术<sup>73</sup></a></li>
  
    <li><a href="/tags/虚拟主机/">虚拟主机<sup>1</sup></a></li>
  
    <li><a href="/tags/解耦/">解耦<sup>1</sup></a></li>
  
    <li><a href="/tags/语法限制/">语法限制<sup>1</sup></a></li>
  
    <li><a href="/tags/跨域/">跨域<sup>3</sup></a></li>
  
    <li><a href="/tags/路径/">路径<sup>1</sup></a></li>
  
    <li><a href="/tags/软件心得/">软件心得<sup>3</sup></a></li>
  
  </ul>
</div>



  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 三水清
  
</div>
<div class="clearfix"></div></footer>
  <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


    
        <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6635976" ></script>
        <script type="text/javascript" id="bdshell_js"></script>
        <script type="text/javascript">
        document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
        </script>
    
    
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"ksky521"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = 'http://static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1c76f5cc8274a56106b13b9c9b1fb046' type='text/javascript'%3E%3C/script%3E"));
    </script>


</body>
</html>