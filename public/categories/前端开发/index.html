<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>前端开发 - 三水清</title>
  <meta name="author" content="三水清">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="三水清"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="atom.xml" title="三水清" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">三水清</a></h1>
  <h2><a href="/">专注前端开发,分享Javascript/CSS/PHP等Web前端开发技巧</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="https://github.com/ksky521">Github</a></li>
    
      <li><a href="http://weibo.com/sanshuiqing">新浪微博</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title category">前端开发</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/04/16/gruntjs——前端任务管理工具/">Gruntjs——前端任务管理工具</a></h1>
  

      <time datetime="2013-04-16T13:09:34.000Z"><a href="/2013/04/16/gruntjs——前端任务管理工具/">2013年4月16日</a></time>
    </header>
    <div class="entry">
      
        <p><a href="http://www.gruntjs.com" target="_blank">Gruntjs</a>是前端项目构建工具，基于node的命令行工具。很多公司或者js项目都是用<strong>gruntjs</strong>来搭建，例如jQuery，twitter，Qunit等。主要功能有：</p>
<ul>
<li>合并文件</li>
<li>压缩html/js/css/图片文件</li>
<li>语法检测</li>
<li>单元测试（基于Qunit）</li>
<li>watch功能</li>
</ul>
<p>相对于Ant的打包工具，grunt更加灵活，语法采用json，比xml语法更加简洁，作为前端工程师可能更喜欢写json。</p>
<h2>GruntJS的安装</h2>
<p>Grunt是基于nodejs的，所以安装GruntJS之前，需要保证你的电脑有<a href="http://nodejs.org/" target="_blank">nodejs环境</a>，node环境比之前安装简单多了，现在windows平台只需要下载node安装程序，一路next就可以了。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/04/16/gruntjs——前端任务管理工具/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/04/07/双屏切图：使用livereload实现自动刷新/">双屏切图：使用livereload实现自动刷新</a></h1>
  

      <time datetime="2013-04-07T12:49:27.000Z"><a href="/2013/04/07/双屏切图：使用livereload实现自动刷新/">2013年4月7日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>livereload</strong>是一个web开发辅助工具，当我们修改完html、css和js的时候会自动刷新浏览器，解放码农的双手。这样在双屏切图、写js代码的时候会提高很多效率。livereload有很多版本，比如基于ruby的版本，我们今天介绍的是node+grunt+chrome插件一体化方案。</p>
<p>我们使用的这个livereload的基本原理是试用node开启一个websocket服务，并且检测文件变化，浏览器打开一个页面时候，引入固定的livereload.js（chrome插件会帮忙加上）会建立ws请求，当node检测到文件变化，则自动推送消息给浏览器，实现刷新。</p>
<h2>livereload环境搭建</h2>
<ul>
<li>nodejs安装</li>
<li>grunt安装</li>
<li>grunt-contrib-watch：npm install grunt-contrib-watch —save-dev</li>
<li>grunt-livereload：npm install grunt-livereload —save-dev</li>
<li>chrome插件：<a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei" target="_blank">安装</a></li>
</ul>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/04/07/双屏切图：使用livereload实现自动刷新/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/04/02/javascript实现比较相似图片算法/"> javascript实现比较相似图片算法</a></h1>
  

      <time datetime="2013-04-02T13:14:44.000Z"><a href="/2013/04/02/javascript实现比较相似图片算法/">2013年4月2日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天看了阮一峰老师的文章：《<a href="http://www.ruanyifeng.com/blog/2013/03/similar_image_search_part_ii.html" target="_blank">相似图片搜索原理</a>》，于是把直方图和向量那块算法用js实现了一下，</p>
<p>源码如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">getHistogram</span><span class="params">(imageData)</span> {</span>
    <span class="keyword">var</span> arr = [];
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++) {
        arr[i] = <span class="number">0</span>;
    }
    <span class="keyword">var</span> data = imageData.data;
    <span class="keyword">var</span> pow4 = Math.pow(<span class="number">4</span>, <span class="number">2</span>);
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = data.length; i &lt; len; i += <span class="number">4</span>) {
        <span class="keyword">var</span> red = (data[i] / <span class="number">64</span>) | <span class="number">0</span>;
        <span class="keyword">var</span> green = (data[i + <span class="number">1</span>] / <span class="number">64</span>) | <span class="number">0</span>;
        <span class="keyword">var</span> blue = (data[i + <span class="number">2</span>] / <span class="number">64</span>) | <span class="number">0</span>;
        <span class="keyword">var</span> index = red * pow4 + green * <span class="number">4</span> + blue;
        arr[index]++;
    }

    <span class="keyword">return</span> arr;
}

<span class="function"><span class="keyword">function</span> <span class="title">cosine</span><span class="params">(arr1, arr2)</span> {</span>
    <span class="keyword">var</span> axb = <span class="number">0</span>,
        a = <span class="number">0</span>,
        b = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr1.length; i &lt; len; i++) {
        axb += arr1[i] * arr2[i];
        a += arr1[i] * arr1[i];
        b += arr2[i] * arr2[i];
    }
    <span class="keyword">return</span> axb / (Math.sqrt(a) * Math.sqrt(b));
}
<span class="function"><span class="keyword">function</span> <span class="title">gray</span><span class="params">(imgData)</span> {</span>
    <span class="keyword">var</span> data = imgData.data;
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = data.length; i &lt; len; i += <span class="number">4</span>) {
        <span class="keyword">var</span> gray = parseInt((data[i] + data[i + <span class="number">1</span>] + data[i + <span class="number">2</span>]) / <span class="number">3</span>);
        data[i + <span class="number">2</span>] = data[i + <span class="number">1</span>] = data[i] = gray;
    }
    <span class="keyword">return</span> imgData;
}
</pre></td></tr></table></figure>

<p>有个问题，假如图片是灰色的跟原图进行比较，那么要比较相似度，需要将图片都转成灰色的，即使用上面代码的gray函数来处理</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/01/17/怎么清空javascript数组/">怎么清空javascript数组</a></h1>
  

      <time datetime="2013-01-17T14:04:08.000Z"><a href="/2013/01/17/怎么清空javascript数组/">2013年1月17日</a></time>
    </header>
    <div class="entry">
      
        <p>这是一个很基础的问题，但是我们往往经常做错。</p>
<p>当一个数组需要清空的时候，很多人使用下面的方法：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>a = [];
</pre></td></tr></table></figure>

<p>我们知道javascript变量存储方式分为引用类型和直接量。数组属于对象，即引用类型，引用的是变量指针地址，之所以这样设计也是为了节省内存。</p>
<p>再说到上面的请空数组的方式，如果采用直接赋值一个新数组的方式，那么之前引用的数组可能不会被释放（有其他的引用），例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> a = [<span class="number">2</span>,<span class="number">3</span>];
<span class="keyword">var</span> b = a;
a = [];
console.log(b);
</pre></td></tr></table></figure>

<p>这时候a和b就不是同一个数组了，清空了a而b还是指到之前的引用地址，除非你是故意的，否则这将会有隐患。</p>
<p>所以最佳的请空数组方式是：将length设置为0，即：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>a.length = <span class="number">0</span>;
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/01/05/javascript的类型数组（typed-array）/">javascript的类型数组（Typed Array）</a></h1>
  

      <time datetime="2013-01-04T21:59:29.000Z"><a href="/2013/01/05/javascript的类型数组（typed-array）/">2013年1月5日</a></time>
    </header>
    <div class="entry">
      
        <p>在《<a href="/2013/01/02/html5-canvas-%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0/">javascript canvas图片像素</a>》中提到了类型数组（Typed Array），javascript这是一种快速操作二进制数据的解决方案。</p>
<p>随着web发展和html5的推进，javascript来处理音视频、二进制文件和网络协议等都成为了可能，这时候原生的数组Array已经不能够满足需求，需要一种快速操作二进制流的东东产生，于是ArrayBuffer类型和Typed Array诞生了。</p>
<h2>类型数组介绍</h2>
<p>类型化数组类型表示可编制索引和操纵的<a href="http://www.javascripture.com/ArrayBuffer" target="_blank">ArrayBuffer</a>对象的各种识图。所有数组类型的长度固定不变。如下表所示：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>大小（以字节为单位）</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Int8Array</td>
<td>1</td>
<td>8 位二补码有符号整数</td>
</tr>
<tr>
<td>Uint8Array</td>
<td>1</td>
<td>8 位无符号整数</td>
</tr>
<tr>
<td>Int16Array</td>
<td>2</td>
<td>16 位二补码有符号整数</td>
</tr>
<tr>
<td>Uint16Array</td>
<td>2</td>
<td>16 位无符号整数</td>
</tr>
<tr>
<td>Int32Array</td>
<td>4</td>
<td>32 位二补码有符号整数</td>
</tr>
<tr>
<td>Uint32Array</td>
<td>4</td>
<td>32 位无符号整数</td>
</tr>
<tr>
<td>Float32Array</td>
<td>4</td>
<td>32 位 IEEE 浮点数</td>
</tr>
<tr>
<td>Float64Array</td>
<td>8</td>
<td>64 位 IEEE 浮点数</td>
</tr>
</tbody>
</table>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/01/05/javascript的类型数组（typed-array）/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/01/02/html5-canvas-图片像素/">html5 canvas 图片像素</a></h1>
  

      <time datetime="2013-01-02T13:36:00.000Z"><a href="/2013/01/02/html5-canvas-图片像素/">2013年1月2日</a></time>
    </header>
    <div class="entry">
      
        <h2>html5 canvas图像转换成数组</h2>
<p>html5的canvas可以进行图片处理，图片是由像素组成的。我们知道canvas有方法<code>getImageData</code>，返回的对象中可以取出，image的data 数组（类似数组的Type Array类型数组，Uint8ClampedArray）。</p>
<p>假设canvas宽高是500*400，那么应该有200000个像素点，而通过<code>getImageData().data</code>获取的data数组的<code>length</code>是800000。</p>
<p>我们还知道rgba表示颜色的方法：<br><em> r=red
</em> g=green<br><em> b=blue
</em> a=alpha</p>
<p>即红绿蓝三原色和透明值。</p>
<p>所以这个data数组是每四个数组值代表一个像素点。这样一来，一个图像就转化成了数据表示的数组。如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> canvas = document.getElementById(<span class="string">'canvas'</span>);
<span class="keyword">var</span> ctxt = canvas.getContext(<span class="string">'2d'</span>);
<span class="keyword">var</span> img = <span class="keyword">new</span> Image;
img.onload = <span class="keyword">function</span>(){
    ctxt.drawImage(img, <span class="number">0</span>, <span class="number">0</span>);
    <span class="keyword">var</span> data = ctxt.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">480</span>, <span class="number">480</span>).data;
    console.log(data, data.toString());
}
img.src = <span class="string">'img/pic.jpg'</span>;
</pre></td></tr></table></figure>

<h2>图像数组的遍历</h2>
<p>如上面的代码，我们可以看到数组data就是图片转换成的数组，那么遍历这个数组就可以取得图片的像素点内容：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="keyword">var</span> data = ctxt.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">480</span>, <span class="number">480</span>).data;
<span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span>,len = data.length; i&lt;len;i+=<span class="number">4</span>){
    <span class="keyword">var</span> red = data[i],
    green = data[i+<span class="number">1</span>],
    blue = data[i+<span class="number">2</span>],
    alpha = data[i+<span class="number">3</span>];

}
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/01/02/html5-canvas-图片像素/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/11/04/使用广播事件来实现模块解耦/">使用广播事件来实现模块解耦</a></h1>
  

      <time datetime="2012-11-04T14:07:39.000Z"><a href="/2012/11/04/使用广播事件来实现模块解耦/">2012年11月4日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>模块化开发</strong>往往最大的问题是解耦，怎么设计一个低耦合的组件呢？这里我用到的方法是时间总线（<code>eventBus</code>）方法，也可以叫做广播事件，模块之间通过发送广播的方式来实现通信，事件发起者只需要派发事件，而不必关心事件是否被接收（订阅）。</p>
<p>广播事件也是自定义事件的一种，不同于自定义事件，广播事件没有绑定的主体，但是都是通过观察者设计模式来写的代码。<br>大体的javascript实现代码如下：其中包括一些简单方法没有列出，例如<code>$.isUndefined</code></p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
</pre></td><td class="code"><pre><span class="keyword">var</span> _cache = {};
<span class="keyword">var</span> broadcast = {
    <span class="comment">/**
     * 派发
     * @param  {[type]} type 事件类型
     * @param  {[type]} data 回调数据
     * @return {[type]}      [description]
     */</span>
    fire:<span class="keyword">function</span>(type, data){
        <span class="keyword">var</span> listeners = _cache[type],len = <span class="number">0</span>;
        <span class="keyword">if</span>(!$.isUndefined(listeners)){
            <span class="keyword">var</span> args = [].slice.call(arguments);
            args = args.length &gt; <span class="number">2</span> ? args.splice(<span class="number">2</span>, args.length-<span class="number">1</span>) : [];
            args = [data].concat(args);

            len = listeners.length;
            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i&lt;len;i++){
                <span class="keyword">var</span> listener = listeners[i];
                <span class="keyword">if</span>(listener && listener.callback) {
                    args = args.concat(listener.args);
                    listener.callback.apply(listener.scope, args);
                }
            }
        }
        <span class="keyword">return</span> <span class="keyword">this</span>;
    },
    <span class="comment">/**
     * 订阅广播事件
     * @param  {[type]}   types     事件类型，支持,分隔符
     * @param  {Function} callback 回调函数
     * @param  {[type]}   scope    回调函数上下文
     * @return {[type]}            this
     */</span>
    subscribe:<span class="keyword">function</span>(types, callback, scope){
        types = types || [];
        <span class="keyword">var</span> args = [].slice.call(arguments);

        <span class="keyword">if</span>($.isString(types)){
            types = types.split(<span class="string">','</span>);
        }
        <span class="keyword">var</span> len = types.length;
        <span class="keyword">if</span>(len===<span class="number">0</span>){
            <span class="keyword">return</span> <span class="keyword">this</span>;
        }
        args = args.length &gt; <span class="number">3</span> ? args.splice(<span class="number">3</span>, args.length-<span class="number">1</span>) : [];
        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;len;i++){
            <span class="keyword">var</span> type = types[i];
            _cache[type] = _cache[type] || [];
            _cache[type].push({callback:callback,scope:scope,args:args});
        }
        <span class="keyword">return</span> <span class="keyword">this</span>;
    },
    <span class="comment">/**
     * 退订
     * @param  {[type]}   type     [description]
     * @param  {Function} callback 假如传入则移出传入的监控事件，否则移出全部
     * @return {[type]}            [description]
     */</span>
    unsubscribe:<span class="keyword">function</span>(type, callback, scope){
        <span class="keyword">var</span> listeners = _cache[type];
        <span class="keyword">if</span> (!listeners) {
            <span class="keyword">return</span> <span class="keyword">this</span>;
        }
        <span class="keyword">if</span>(callback){
            <span class="keyword">var</span> len = listeners.length,
                tmp = [];

            <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;len; i++) {
                <span class="keyword">var</span> listener = listeners[i];
                <span class="keyword">if</span>(listener.callback == callback && listener.scope == scope) {
                } <span class="keyword">else</span> {
                    tmp.push(listener);
                }
            }
            listeners = tmp;
        }<span class="keyword">else</span>{
            listeners.length = <span class="number">0</span>;
        }
        <span class="keyword">return</span> <span class="keyword">this</span>;
    },
    <span class="comment">/**
     * 订阅别名
     * @return {[type]} [description]
     */</span>
    on:<span class="keyword">function</span>(){
        <span class="keyword">return</span> <span class="keyword">this</span>.subscribe.apply(<span class="keyword">this</span>,arguments);
    },
    <span class="comment">/**
     * 退订别名
     * @return {[type]} [description]
     */</span>
    un:<span class="keyword">function</span>(){
        <span class="keyword">return</span> <span class="keyword">this</span>.unsubscribe.apply(<span class="keyword">this</span>,arguments);
    },
    dispatch:<span class="keyword">function</span>(){
        <span class="keyword">return</span> <span class="keyword">this</span>.fire.apply(<span class="keyword">this</span>,arguments);
    },

    removeAll:<span class="keyword">function</span>(){
        _cache = {};
        <span class="keyword">return</span> <span class="keyword">this</span>;
    }
};
</pre></td></tr></table></figure>

<p>使用方法：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>broadcast.fire(<span class="string">'event name'</span>, json);
broadcast.on(<span class="string">'event name'</span>, <span class="keyword">function</span>(data){
    console.log(data);
});
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/09/29/将nodejs打包工具整合到鼠标右键/">将nodejs打包工具整合到鼠标右键</a></h1>
  

      <time datetime="2012-09-28T16:34:17.000Z"><a href="/2012/09/29/将nodejs打包工具整合到鼠标右键/">2012年9月29日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天放出了主要的nodejs打包代码(《<a href="/2012/09/28/nodejs%E5%86%99%E7%9A%84%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7/">nodejs写的简单项目打包工具</a>》)，今天放出整合到鼠标右键的代码，打包需要配置环境变量，添加NODE_PATH为node安装路径，打包用到的批处理文件代码如下：</p>
<figure class="highlight lang-bash"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre></td><td class="code"><pre>@<span class="keyword">echo</span> off
title Builder - 正在合并 ...

color 03
REM =====================================
REM     jsbuilder beta版
REM
REM =====================================
SETLOCAL ENABLEEXTENSIONS

<span class="keyword">echo</span>.

REM 过滤文件后缀，只combo js文件
<span class="keyword">if</span> <span class="string">"%~x1"</span> NEQ <span class="string">".js"</span> (
    <span class="keyword">echo</span>.
    <span class="keyword">echo</span> **** 请选择JS文件
    <span class="keyword">echo</span>.
    goto End
)

REM 检查NODE_PATH
<span class="keyword">if</span> <span class="string">"%NODE_PATH%"</span> == <span class="string">""</span> goto NoNodePath
<span class="keyword">if</span> not exist <span class="string">"%NODE_PATH%\node.exe"</span> goto NoNodePath

<span class="keyword">set</span> RESULT_FILE=%~n1-combo%~x1

:ZIP_CHOICE

<span class="keyword">echo</span> 选择是否【压缩】合并后的js文件?
<span class="keyword">set</span> input=
<span class="keyword">set</span> /p input= -^&gt; 请选择(y/n):
<span class="keyword">if</span> /i <span class="string">"%input%"</span>==<span class="string">"n"</span> goto UNZIP
<span class="keyword">if</span> /i <span class="string">"%input%"</span>==<span class="string">"y"</span> goto ZIP

REM 调用build合并文件
:UNZIP
<span class="string">"%NODE_PATH%\node.exe"</span> <span class="string">"%~dp0build.js"</span> --unzip <span class="string">"%~n1%~x1"</span> &gt; <span class="string">"%RESULT_FILE%"</span>
<span class="keyword">echo</span>.
<span class="keyword">echo</span> **** ~O(∩_∩)O~ 【合并】成功 ****
<span class="keyword">echo</span>.
goto End

REM 调用build合并并且压缩文件
:ZIP
<span class="string">"%NODE_PATH%\node.exe"</span> <span class="string">"%~dp0build.js"</span> <span class="string">"%~n1%~x1"</span> &gt; <span class="string">"%RESULT_FILE%"</span>
<span class="keyword">echo</span>.
<span class="keyword">echo</span> **** ~O(∩_∩)O~ 【合并并压缩】成功 ****
<span class="keyword">echo</span>.
goto End

:NoNodePath
<span class="keyword">echo</span>.
<span class="keyword">echo</span> **** 请先安装NodeJS并设置NODE_PATH环境变量 ****
<span class="keyword">echo</span>.

:End
ENDLOCAL
pause
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/09/29/将nodejs打包工具整合到鼠标右键/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/09/28/nodejs写的一个简单项目打包工具/">nodejs写的一个简单项目打包工具</a></h1>
  

      <time datetime="2012-09-27T17:49:17.000Z"><a href="/2012/09/28/nodejs写的一个简单项目打包工具/">2012年9月28日</a></time>
    </header>
    <div class="entry">
      
        <p>项目是模块加载的，类似<code>require.js</code>的用法，所以简单写了一个js打包工具。<br>项目的模块加载和定义部分代码是这样的：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>XX.define(<span class="string">'ns'</span>,[<span class="string">'tool/cookie'</span>],<span class="keyword">function</span>(){
});
<span class="comment">//或者</span>
XX.define(<span class="string">'ns.ns2'</span>,<span class="string">'tool/cookie,tool/abc'</span>,<span class="keyword">function</span>(){
})
<span class="comment">//或者</span>
XX.define(<span class="string">'ns'</span>,<span class="keyword">function</span>(){
})
</pre></td></tr></table></figure>

<p>所用到的js打包工具就是扫描文件，然后匹配出来需要加载的模块，然后先加载模块代码。<br>主要的nodejs打包工具代码如下：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/09/28/nodejs写的一个简单项目打包工具/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/09/19/ie设置document-domain会导致ueditor拒绝访问/">ie设置document.domain会导致ueditor拒绝访问</a></h1>
  

      <time datetime="2012-09-19T10:53:13.000Z"><a href="/2012/09/19/ie设置document-domain会导致ueditor拒绝访问/">2012年9月19日</a></time>
    </header>
    <div class="entry">
      
        <p>使用百度的<strong>ueditor</strong>富文本编辑器在ie中如果页面设置了<code>document.domain</code>，则会导致编辑器初始化失败，错误信息是拒绝访问，可见是<strong>跨域</strong>问题导致的。<br>解决的方法就是在render方法中设置src为一个代理页面，或者javascript伪协议，例如：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>container.firstChild.src = <span class="string">"javascript:void((function(){document.open();document.domain='"</span>
+document.domain
+<span class="string">"';document.write('');document.close()})())"</span>;
</pre></td></tr></table></figure>

<p>弹出的dialog则需要在<code>\dialogs\internal.js</code> 里也加上:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>document.domain = <span class="string">'根域'</span>;
</pre></td></tr></table></figure>

<p>至于flash上传问题，需要放个<code>crossdomain.xml</code>文件，具体内容你懂得了……</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/09/13/关于javascript位运算符的技巧/">关于javascript位运算符的技巧</a></h1>
  

      <time datetime="2012-09-13T11:06:51.000Z"><a href="/2012/09/13/关于javascript位运算符的技巧/">2012年9月13日</a></time>
    </header>
    <div class="entry">
      
        <p>今天说下常用的javascript位运算符的技巧</p>
<h2>js位运算来判断奇偶数</h2>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">if</span>(n&<span class="number">1</span>===<span class="number">0</span>){
<span class="comment">//偶数</span>
}<span class="keyword">else</span>{
<span class="comment">//奇数</span>
}
</pre></td></tr></table></figure>

<h2>js位运算符来代替Math.floor</h2>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>(<span class="number">2.9</span>|<span class="number">0</span>)===<span class="number">2</span>
(~~<span class="number">2.9</span>)===<span class="number">2</span>
(<span class="number">2.9</span>&gt;&gt;&gt;<span class="number">0</span>)===<span class="number">2</span>
(<span class="number">2.9</span>&gt;&gt;<span class="number">0</span>)===<span class="number">2</span>
(<span class="number">2.9</span>&lt;<span class="xml"><span class="tag">&lt;<span class="title">0)===2
</span>//注意
~~(<span class="attribute">-2.999</span>);//= <span class="attribute">-2</span>
<span class="attribute">Math.floor</span>(<span class="attribute">-2.999</span>);// = <span class="attribute">-3</span></span>
</pre></td></tr></table></figure>

<h2>RGB2HEX</h2>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">RGB2HEX</span><span class="params">(a,b,c)</span>{</span><span class="keyword">return</span><span class="string">"#"</span>+((<span class="number">256</span>+a&lt;<span class="xml"><span class="tag">&lt;<span class="title">8|b)&lt;&lt;8|c).toString(16).slice(1)}
</span>//或者
<span class="attribute">function</span> <span class="attribute">toHexString</span>(<span class="attribute">r</span>,<span class="attribute">g</span>,<span class="attribute">b</span>) {
  <span class="attribute">return</span> ("<span class="attribute">00000</span>" + (<span class="attribute">r</span> &lt;&lt; <span class="attribute">16</span> | <span class="attribute">g</span> &lt;&lt; <span class="attribute">8</span> | <span class="attribute">b</span>)<span class="attribute">.toString</span>(<span class="attribute">16</span>))<span class="attribute">.slice</span>(<span class="attribute">-6</span>);
}
<span class="attribute">var</span> <span class="attribute">hex</span> = <span class="attribute">toHexString</span>(<span class="attribute">red</span>, <span class="attribute">green</span>, <span class="attribute">blue</span>);</span>
</pre></td></tr></table></figure>

<h2>检测相等关系</h2>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">if</span>(a!=<span class="number">123</span>)
<span class="keyword">if</span>(a^<span class="number">123</span>)
<span class="comment">//注意：</span>
<span class="literal">false</span> ^ <span class="number">1</span> <span class="comment">// 1</span>
<span class="literal">true</span> ^ <span class="number">1</span> <span class="comment">// 0</span>
<span class="number">2</span> ^ <span class="number">1</span> <span class="comment">// 3</span>
{} ^ <span class="number">1</span> <span class="comment">// 1</span>
</pre></td></tr></table></figure>

<p>这个很好用的，比如下面的代码</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="keyword">var</span> isReady = <span class="number">0</span>;

<span class="comment">// somewhere else</span>
<span class="keyword">if</span>( isReady ) { }

<span class="comment">// somewhere else, set isReady state to 1</span>
isReady ^= <span class="number">1</span>;

<span class="comment">// somewhere else, set isReady state to 0</span>
isReady ^= <span class="number">1</span>;
</pre></td></tr></table></figure>

<h2>默认值</h2>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">if</span> (!n) n = defaultValue;
<span class="comment">//使用下面的代码</span>
n||(n=defaultValue);
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/09/13/关于javascript位运算符的技巧/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/08/06/获取a标签和script标签的绝对路径和相对路径/">获取a标签和script标签的绝对路径和相对路径</a></h1>
  

      <time datetime="2012-08-06T10:22:35.000Z"><a href="/2012/08/06/获取a标签和script标签的绝对路径和相对路径/">2012年8月6日</a></time>
    </header>
    <div class="entry">
      
        <p>做了一个a标签和script标签获取绝对路径和相对路径的实验，实验代码如下：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">a</span> <span class="attribute">id</span>=<span class="value">"link"</span> <span class="attribute">href</span>=<span class="value">"a.html"</span>&gt;</span>a.html<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">id</span>=<span class="value">"script"</span> <span class="attribute">src</span>=<span class="value">'a.js'</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="function"><span class="keyword">function</span> <span class="title">$</span><span class="params">(id)</span>{</span>
        <span class="keyword">return</span> document.getElementById(id);
    }
    alert(<span class="string">'link.href=&gt;'</span>+$(<span class="string">'link'</span>).href);
    alert(<span class="string">'link.get=&gt;'</span>+$(<span class="string">'link'</span>).getAttribute(<span class="string">'href'</span>));
    alert(<span class="string">'link.get0=&gt;'</span>+$(<span class="string">'link'</span>).getAttribute(<span class="string">'href'</span>,<span class="number">0</span>));
    alert(<span class="string">'link.get1=&gt;'</span>+$(<span class="string">'link'</span>).getAttribute(<span class="string">'href'</span>,<span class="number">1</span>));
    alert(<span class="string">'link.get2=&gt;'</span>+$(<span class="string">'link'</span>).getAttribute(<span class="string">'href'</span>,<span class="number">2</span>));
    alert(<span class="string">'link.get4=&gt;'</span>+$(<span class="string">'link'</span>).getAttribute(<span class="string">'href'</span>,<span class="number">4</span>));

    alert(<span class="string">'script.src=&gt;'</span>+$(<span class="string">'script'</span>).src);
    alert(<span class="string">'script.get=&gt;'</span>+$(<span class="string">'script'</span>).getAttribute(<span class="string">'src'</span>));
    alert(<span class="string">'script.get0=&gt;'</span>+$(<span class="string">'script'</span>).getAttribute(<span class="string">'src'</span>,<span class="number">0</span>));
    alert(<span class="string">'script.get1=&gt;'</span>+$(<span class="string">'script'</span>).getAttribute(<span class="string">'src'</span>,<span class="number">1</span>));
    alert(<span class="string">'script.get2=&gt;'</span>+$(<span class="string">'script'</span>).getAttribute(<span class="string">'src'</span>,<span class="number">2</span>));
    alert(<span class="string">'script.get4=&gt;'</span>+$(<span class="string">'script'</span>).getAttribute(<span class="string">'src'</span>,<span class="number">4</span>));
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>

<p>分别在IE6~IE9（都是虚拟机原生，非ie9模拟）、chrome21、FF14，opera12.01，safari5.1.7中做出如下的实验结果:</p>
<p>√代表绝对路径，×代表相对路径（即src或者href属性的值，如果为完整的路径，则是完整路径）</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>IE6</th>
<th>IE7</th>
<th>IE8</th>
<th>IE9</th>
<th>chrome 21</th>
<th>FF 14</th>
<th>safari 5.1.7</th>
<th>opera 12</th>
</tr>
</thead>
<tbody>
<tr>
<td>link.href</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>link.get</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>link.get0</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>link.get1</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>link.get2</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>link.get4</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>script.src</td>
<td>×</td>
<td>×</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>script.get</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>script.get0</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>script.get1</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>script.get2</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>script.get4</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
</tbody>
</table>
<p>详情见MSDN的介绍：<a href="http://msdn.microsoft.com/en-us/library/ms536429(v=VS.85" target="_blank"><a href="http://msdn.microsoft.com/en-us/library/ms536429(v=VS.85).aspx">http://msdn.microsoft.com/en-us/library/ms536429(v=VS.85).aspx</a></a>.aspx)</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/06/14/【ppt】那些年，我们一起跨过域/">【PPT】那些年，我们一起跨过域</a></h1>
  

      <time datetime="2012-06-14T08:59:26.000Z"><a href="/2012/06/14/【ppt】那些年，我们一起跨过域/">2012年6月14日</a></time>
    </header>
    <div class="entry">
      
        <p>这个是入职腾讯第二月做的跨域分享，介绍了五种跨域方式，比较了他们之间的优缺点，希望可以解决小组内经常遇见的<strong>跨域</strong>问题。另外简单列举了另外五个跨域的方式，因为不经常用，所以也就简单的一笔带过了。</p>
<p>名字有点小清新，我想最后一个月的分享也是《那些年系列》：《那些年，我们一起跨过域》《那些年，我们错过的爱情（html5+css3）》，为什么是那些年呢，装清纯吧，感觉自己老了呗。</p>
<p>言归正传，我介绍的五种跨域方式是：</p>
<blockquote>
<ol>
<li>document.domain</li>
<li>location.hash</li>
<li>window.name</li>
<li>postMessage</li>
<li>flash</li>
</ol>
</blockquote>
<p>以上五种跨域方式可能是现实工作中最常用的跨域方式，例如简单的<strong>跨域iframe自适应高度</strong>，你可以使用location.hash，跨子域可以使用<strong>document.domain</strong>，ppt每个方法都要详细的介绍，并且附上了我亲自写的demo哦~很有诚意是不（不要吐血），哈哈，好了又凑了一篇文章。另外附上昨天用css3画的企鹅：<a href="http://4.qdemo.sinaapp.com/qie.htm" target="_blank"><a href="http://4.qdemo.sinaapp.com/qie.htm">http://4.qdemo.sinaapp.com/qie.htm</a></a>。ps：office 2010的ppt切换动画好炫哦</p>
<p>slideshare被墙，下载地址：<a href="http://4.qdemo.sinaapp.com/xdomain/naxieniankuayu.pptx" target="_blank">http://4.qdemo.sinaapp.com/xdomain/naxieniankuayu.pptx</a></p>
<p><div style="width:425px" id="__ss_13232998"> <strong><a href="http://www.slideshare.net/ksky521/ss-13232998" title="那些年，我们一起跨过域" target="_blank">那些年，我们一起跨过域</a></strong> <iframe src="http://www.slideshare.net/slideshow/embed_code/13232998" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC;border-width:1px 1px 0" allowfullscreen></iframe> <div style="padding:5px 0 12px"> View more <a href="http://www.slideshare.net/thecroaker/death-by-powerpoint" target="_blank">PowerPoint</a> from <a href="http://www.slideshare.net/ksky521" target="_blank">ksky521</a> </div> </div><br>微盘下载：<a href="http://vdisk.weibo.com/s/6wt-O" target="_blank">http://vdisk.weibo.com/s/6wt-O</a></p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/06/13/将uglifyjs添加到鼠标右键菜单/">将uglifyjs添加到鼠标右键菜单</a></h1>
  

      <time datetime="2012-06-12T17:48:29.000Z"><a href="/2012/06/13/将uglifyjs添加到鼠标右键菜单/">2012年6月13日</a></time>
    </header>
    <div class="entry">
      
        <p>之前几天根据YUICompressor和TBCompressor整合到鼠标右键菜单自己将<strong>uglifyjs</strong>也添加到了右键菜单，下面简单记录下过程。效果如下</p>
<p><a href="/uploads/2012/06/uglifyjsmenu.png"><img src="/uploads/2012/06/uglifyjsmenu.png" alt="uglifyjs添加到鼠标右键菜单" title="uglifyjs添加到鼠标右键菜单"></a></p>
<h2>配置windows nodepath环境</h2>
<p>鼠标右键我的电脑，选择属性→高级属性管理→高级选项卡→环境变量，添加新的环境变量，名字为<code>NODE_PATH</code>，变量值为<strong>nodejs</strong>的安装路径，例如下面</p>
<figure class="highlight lang-shell"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>C:<span class="command">\Program</span> Files<span class="command">\nodejs</span>
</pre></td></tr></table></figure>

<p>然后保存退出</p>
<h2>安装uglifyjs</h2>
<p>在命令行安装uglifyjs，</p>
<figure class="highlight lang-shell"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">npm</span> install uglify-js -g
</pre></td></tr></table></figure>

<h2>安装uglifyjs到鼠标右键菜单</h2>
<p>找到第二步安装的<strong>uglifyjs</strong>的路径下的bin文件夹，例如我的安装在：</p>
<figure class="highlight lang-shell"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>C:<span class="command">\Program</span> Files<span class="command">\nodejs</span><span class="command">\node</span>_modules<span class="command">\npm</span><span class="command">\node</span>_modules<span class="command">\uglify</span>-js<span class="command">\bin</span>
</pre></td></tr></table></figure>

<p>然后下载uglifyjs的安装文件解压到这个文件夹</p>
<p><a href="http://4.qdemo.sinaapp.com/tool/uglifyjsmenu.zip" target="_blank">uglifyjs到鼠标右键菜单安装文件</a></p>
<ul>
<li>双击运行<code>install.cmd</code>就可以安装了。</li>
<li>卸载运行<code>uninstall.cmd</code>就可以卸载。</li>
</ul>
<p>主要的代码还是根据YUICompressor的安装文件改的，压缩的时候首先将源文件copy为dev作为备份，然后压缩替换原文件。例如a.js,压缩后变成a.dev.js原文件和压缩后的js文件。美化则是将美化后的代码存到bea.js，即a.js美化后为a.bea.js<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/06/13/将uglifyjs添加到鼠标右键菜单/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/06/12/pngfix-js可能导致xss攻击/">pngfix.js可能导致xss攻击</a></h1>
  

      <time datetime="2012-06-11T18:20:19.000Z"><a href="/2012/06/12/pngfix-js可能导致xss攻击/">2012年6月12日</a></time>
    </header>
    <div class="entry">
      
        <p>今天看了国外大佬Spanner的一篇关于pngfix的文章，已经到下班时间，就简单说说pngfix的xss攻击。</p>
<h2>pngfix.js</h2>
<p><code>pngfix.js</code>是IE6中解决png不透明的js方案，原理其实就是遍历了页面的img，然后使用滤镜来解决。</p>
<h2>pngfix导致xss</h2>
<p>pngfix.js使用了如下的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">var</span> imgID = (img.id) ? <span class="string">"id='"</span> + img.id + <span class="string">"' "</span> : <span class="string">""</span>;

img.outerHTML = strNewHTML
</pre></td></tr></table></figure>

<p>如果使用如下的代码就会出现xss：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">1.png</span> <span class="attribute">id</span>=<span class="value">"'&gt;&lt;img src=1 onerror=alert(/png_fixed!/)&gt;"</span>&gt;</span>
</pre></td></tr></table></figure>

<p>详细原文地址：<a href="http://www.thespanner.co.uk/2012/06/12/pngfix/" target="_blank">http://www.thespanner.co.uk/2012/06/12/pngfix/</a></p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/06/11/ie中iframe和document-selection-createrange导致跨域/">IE中iframe和document.selection.createRange导致跨域</a></h1>
  

      <time datetime="2012-06-10T17:50:15.000Z"><a href="/2012/06/11/ie中iframe和document-selection-createrange导致跨域/">2012年6月11日</a></time>
    </header>
    <div class="entry">
      
        <p>帮忙在活动中找bug，两层iframe，经过调试发现是<code>document.selection.createRange</code>导致的错误，在浏览器中报“拒绝访问”，猜测是跨域导致的。于是加上<code>document.domain</code>主域就搞定了。</p>
<p>本来以为是两层iframe导致的（因为他们反映一层iframe没有问题），于是自己建了个demo，test.qq.com/qq1.html代码如下：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">iframe</span> <span class="attribute">src</span>=<span class="value">"http://demos.qq.com/qq2.html"</span> <span class="attribute">frameborder</span>=<span class="value">"0"</span> <span class="attribute">id</span>=<span class="value">"myIframe"</span>&gt;</span><span class="tag">&lt;/<span class="title">iframe</span>&gt;</span>
</pre></td></tr></table></figure>

<p>demos.qq.com/qq2.html代码如下：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="comment">//document.domain = 'qq.com';</span>
    <span class="keyword">var</span> a = document.selection.createRange();
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>

<p>这样在IE9中访问<code>test.qq.com/qq1.html</code>就会报错，而把<code>qq2.html</code>和<code>qq1.html</code>都添加<code>document.domain=&#39;qq.com&#39;;</code>就可以了。暂时原因不明了，记录在此备份下，懂得朋友可以来说道说道</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/05/21/ie动态创建带name的iframe跳转问题/">IE动态创建带name的iframe跳转问题</a></h1>
  

      <time datetime="2012-05-21T09:24:10.000Z"><a href="/2012/05/21/ie动态创建带name的iframe跳转问题/">2012年5月21日</a></time>
    </header>
    <div class="entry">
      
        <p>在一些<strong>前端</strong>项目中可能要用到动态创建iframe的需求，例如无刷新ajax上传文件。但是在IE下创建<strong>带有name的iframe</strong>会有个bug，创建的代码如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> iframe = document.createElement(<span class="string">'iframe'</span>);
iframe.name = <span class="string">'test'</span>;
</pre></td></tr></table></figure>

<p>上面的这段javascript代码在IE下赋不了<strong>name属性</strong>!!!即<code>iframe.name = &#39;test&#39;;</code>这段代码未执行。</p>
<p>在IE中我们可以使用下面的代码来动态创建带有name的iframe：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">var</span> iframe = document.createElement(<span class="string">'&lt;iframe name="test"&gt;'</span>);
</pre></td></tr></table></figure>

<p>但是上面的代码在非IE浏览器下却报错，这时候我们可以使用判断IE，如果是ie则使用第二段方法<strong>动态创建iframe</strong>，或者我们可以捕获异常，如下面的代码：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/05/21/ie动态创建带name的iframe跳转问题/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/03/07/addeventlistener第二个参数的handleevent/">addEventListener第二个参数的handleEvent</a></h1>
  

      <time datetime="2012-03-07T10:48:17.000Z"><a href="/2012/03/07/addeventlistener第二个参数的handleevent/">2012年3月7日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天无意中看到一篇<a href="http://peter.michaux.ca/articles/our-backwards-dom-event-libraries" target="_blank">老外的文章</a>，文章提到了<strong>addEventListener</strong>第二个参数可以传入object，并且对象中handleEvent为事件处理函数。例如下面的javascript代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">var</span> obj = {
    handleEvent: <span class="keyword">function</span>() {
        alert(<span class="string">'body clicked'</span>);
    }
};
document.body.addEventListener(<span class="string">'click'</span>,obj,<span class="literal">false</span>);
</pre></td></tr></table></figure>

<p>测试发现这段代码在IE9+，chrome，FF，opera等浏览器是正确的（测试范围可能不够宽），而且可以成功的绑定click事件。在Qwrap群里一问才知道是<a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventListener" target="_blank">DOM2中接口</a>，很有意思的一个发现，<a href="http://weibo.com/itapir" target="_blank">@貘大大</a> 也发微博说自己先入为主了，我相信很多人跟<a href="http://weibo.com/itapir" target="_blank">@貘大大</a> 一样都先入为主了。</p>
<h2>addEventListener的handleEvent应用</h2>
<p>发现了这个“新大陆”有什么用法呢？哈哈~首先想到的是对象引用。</p>
<p>看下面的javascript代码：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
<span class="keyword">var</span> obj = {
handleEvent: <span class="keyword">function</span>() {
    alert(<span class="string">'body clicked'</span>);
}
};
document.body.addEventListener(<span class="string">'click'</span>,obj,<span class="literal">false</span>);
<span class="function"><span class="keyword">function</span> <span class="title">fn2</span><span class="params">()</span>{</span>
    obj.handleEvent = <span class="keyword">function</span>(){
        alert(<span class="string">'fn2'</span>);
    };
}
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;<span class="title">button</span> <span class="attribute">onclick</span>=<span class="value">"fn2();"</span>&gt;</span>change<span class="tag">&lt;/<span class="title">button</span>&gt;</span>
</pre></td></tr></table></figure>

<p>因为对象的引用关系，点击下button就可以切换绑定事件的处理函数，而不需要remove之前的事件，然后重新绑定一个新的处理函数。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/03/07/addeventlistener第二个参数的handleevent/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/02/06/【ppt分享】xss注入和防范/">【PPT分享】XSS注入和防范</a></h1>
  

      <time datetime="2012-02-05T17:53:29.000Z"><a href="/2012/02/06/【ppt分享】xss注入和防范/">2012年2月6日</a></time>
    </header>
    <div class="entry">
      
        <p>这是我前些日子准备的关于《<a href="http://qdemo.sinaapp.com/ppt/xss/" target="_blank">XSS注入和防范</a>》的技术分享ppt，现在放出来，之前是做的powderpoint文件，后来网上流传<a href="http://bartaz.github.com/impress.js" target="_blank">impress.js</a>做ppt，于是自己也整了个impress.js版本的放在了SAE上面，经过测试发现当ppt的内容较多，带有图片等，<strong>impress.js</strong>效果就会比较卡。不多说其他的，说说ppt的内容：</p>
<p>《XSS注入和防范》主要从xss是什么，xss的危害，xss的类型及其防范的措施，几个方面来讲解xss。希望对大家理解xss有所帮助，另外多说句cookie的httponly方式，在apache下面有个漏洞，当cookie超过4k的时候就会出现泄漏，所以要注意这个漏洞！（具体代码：<a href="https://gist.github.com/1955a1c28324d4724b7b/7fe51f2a66c1d4a40a736540b3ad3fde02b7fb08" target="_blank">狂点此处</a>）</p>
<p>废话不多说了，上ppt地址：<a href="http://qdemo.sinaapp.com/ppt/xss" target="_blank">【PPT分享】XSS注入和防范</a>，请使用支持chrome浏览器查看ppt页面<br><a href="/uploads/2012/02/02-06_152043.png"><img src="/uploads/2012/02/02-06_152043.png" alt="XSS注入和防范" title="XSS注入和防范"></a></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/02/06/【ppt分享】xss注入和防范/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/02/03/ie6中a标签触发图片和ajax请求被abort/">IE6中a标签触发图片和ajax请求被abort</a></h1>
  

      <time datetime="2012-02-03T15:28:10.000Z"><a href="/2012/02/03/ie6中a标签触发图片和ajax请求被abort/">2012年2月3日</a></time>
    </header>
    <div class="entry">
      
        <h2>IE6 a标签的请求被abort的原因</h2>
<p>最近项目中掉进IE6 a标签abort两次坑，第一次是a标签绑定一个事件，<code>href=&#39;javascript:;&#39;</code>这样a标签触发了事件，切换验证码图片，结果验证码图片总是显示不出来，通过抓包显示状态为<strong>abort</strong>。</p>
<p>其实这个的原因可以从IE6中a标签执行顺序说起，IE6中a标签执行onclick在执行默认事件（即href跳转）之前，当触发了绑定的事件之后，那么处理完事件之后，如果不<code>return false</code>或者阻止默认事件，则会继续执行href跳转，IE6会认为页面跳转到其他页面或者页面重新刷新，则abort之前<strong>onclick</strong>事件中的请求。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/02/03/ie6中a标签触发图片和ajax请求被abort/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/01/04/javascript-contains方法来判断元素包含关系/">javascript contains方法来判断元素包含关系</a></h1>
  

      <time datetime="2012-01-04T09:49:20.000Z"><a href="/2012/01/04/javascript-contains方法来判断元素包含关系/">2012年1月4日</a></time>
    </header>
    <div class="entry">
      
        <p>IE中的<strong>contains</strong>方法可以判断A元素是否包含B元素，如果包含则返回true，否则返回false，在开发中会在事件代理处理上面用到。W3C的方法是<strong>compareDocumentPosition</strong>，所以综上来说：JS通过contains和compareDocumentPosition方法来确定DOM节点间的关系,判断一个元素(对象)是否为另一个元素的子元素。<br>IE的contains方法很简单，但是W3C的<code>DOMElement.contains(DOMNode)</code>方法会返回却是一个数值。</p>
<h2>DOMElement.contains(DOMNode)</h2>
<p>link：<a href="https://developer.mozilla.org/En/DOM/Node.compareDocumentPosition" target="_blank"><a href="https://developer.mozilla.org/En/DOM/Node.compareDocumentPosition">https://developer.mozilla.org/En/DOM/Node.compareDocumentPosition</a></a>。</p>
<p><code>DOMElement.contains(DOMNode)</code></p>
<p>返回的不是一个布尔值，而是一个很奇怪的数值，它是通过如下方式累加计算出来的：</p>
<table>
<thead>
<tr>
<th>Bits</th>
<th>Number</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>000000</td>
<td>0</td>
<td>元素一致</td>
</tr>
<tr>
<td>000001</td>
<td>1</td>
<td>节点在不同的文档（或者一个在文档之外）</td>
</tr>
<tr>
<td>000010</td>
<td>2</td>
<td>节点 B 在节点 A 之前</td>
</tr>
<tr>
<td>000100</td>
<td>4</td>
<td>节点 A 在节点 B 之前</td>
</tr>
<tr>
<td>001000</td>
<td>8</td>
<td>节点 B 包含节点 A</td>
</tr>
<tr>
<td>010000</td>
<td>16</td>
<td>节点 A 包含节点 B</td>
</tr>
<tr>
<td>100000</td>
<td>32</td>
<td>浏览器的私有使用</td>
</tr>
</tbody>
</table>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/01/04/javascript-contains方法来判断元素包含关系/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/11/29/非字母javascript/">非字母javascript</a></h1>
  

      <time datetime="2011-11-29T10:17:03.000Z"><a href="/2011/11/29/非字母javascript/">2011年11月29日</a></time>
    </header>
    <div class="entry">
      
        <p>你尝试过写javascript不用字母和数字吗？最近准备个xss的分享，记起了之前看到过老外一篇文章，内容是关于non-alpha javascript的，拿到代码分析下。<br>先看这段猥琐的javascript代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>_=+[];$=_++;__=(_&lt;<span class="xml"><span class="tag">&lt;<span class="title">_);___=(_&lt;&lt;_)+_;____=__+__;_____=__+___;$$=({}+"")[_____]+({}+"")[_]+({}[$]+"")[_]+(($!=$)+"")[___]+(($==$)+"")[$]+(($==$)+"")[_]+(($==$)+"")[__]+({}+"")[_____]+(($==$)+"")[$]+({}+"")[_]+(($==$)+"")[_];$$$=(($!=$)+"")[_]+(($!=$)+"")[__]+(($==$)+"")[___]+(($==$)+"")[_]+(($==$)+"")[$];$_$=({}+"")[_____]+({}+"")[_]+({}+"")[_]+(($!=$)+"")[__]+({}+"")[__+_____]+({}+"")[_____]+</span> ({}+"")[<span class="attribute">_</span>]+({}[$]+"")[<span class="attribute">__</span>]+(($=<span class="value">=$)+"")[___];</span> ($)[$$][$$]($$$+"('"+$<span class="attribute">_</span>$+"')")();</span>
</pre></td></tr></table></figure>

<p>看到这里你肯定抓狂了，但是这段代码是可以运行的，运行的结果是 <code>alert(&#39;cool code&#39;);</code> 。</p>
<h2>javascript分析</h2>
<p>这段代码能够运行，原因是javascript是弱类型的脚本语言，而且语法相对松散。例如下面的javascript是正确的，而且是有出乎意料结果的：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/11/29/非字母javascript/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/11/28/javascript-位运算符/">javascript 位运算符</a></h1>
  

      <time datetime="2011-11-28T10:46:09.000Z"><a href="/2011/11/28/javascript-位运算符/">2011年11月28日</a></time>
    </header>
    <div class="entry">
      
        <p>前几天看到国外人在github总结的<strong>javascript</strong>的奇巧淫技（<a href="http://t.cn/herRcq），里面对位运算提到的很多，所以来科普一下javascript的位运算。于是找到了w3cschool的这篇教程，很好很强大啊，于是就忍不住转载了……" target="_blank">http://t.cn/herRcq），里面对位运算提到的很多，所以来科普一下javascript的位运算。于是找到了w3cschool的这篇教程，很好很强大啊，于是就忍不住转载了……</a></p>
<p><strong>ECMAScript</strong> 整数有两种类型，即有符号整数（允许用正数和负数）和无符号整数（只允许用正数）。在 ECMAScript 中，所有整数字面量默认都是有符号整数，这意味着什么呢？</p>
<p>有符号整数使用 31 位表示整数的数值，用第 32 位表示整数的符号，0 表示正数，1 表示负数。数值范围从 -2147483648 到 2147483647。</p>
<p>可以以两种不同的方式存储二进制形式的有符号整数，一种用于存储正数，一种用于存储负数。正数是以真二进制形式存储的，前 31 位中的每一位都表示 2 的幂，从第 1 位（位 0）开始，表示 2<sup>0</sup>，第 2 位（位 1）表示 2<sup>1</sup>。没用到的位用 0 填充，即忽略不计。例如，下图展示的是数 18 的表示法。</p>
<p><img src="http://www.w3school.com.cn/i/ct_js_integer_binary_signed_32bits.gif" alt="32 位二进制表示的有符号整数"></p>
<p>18 的二进制版本只用了前 5 位，它们是这个数字的有效位。把数字转换成二进制字符串，就能看到有效位：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> iNum = <span class="number">18</span>;
alert(iNum.toString(<span class="number">2</span>));	<span class="comment">//输出 "10010"</span>
</pre></td></tr></table></figure>

<p>这段代码只输出 “10010”，而不是 18 的 32 位表示。其他的数位并不重要，因为仅使用前 5 位即可确定这个十进制数值。如下图所示：</p>
<p><img src="http://www.w3school.com.cn/i/ct_js_integer_binary_number18.gif" alt="5 位二进制表示的整数 18"></p>
<p>负数也存储为二进制代码，不过采用的形式是二进制补码。计算数字二进制补码的步骤有三步：</p>
<ol>
<li>确定该数字的非负版本的二进制表示（例如，要计算 -18的二进制补码，首先要确定 18 的二进制表示）</li>
<li>求得二进制反码，即要把 0 替换为 1，把 1 替换为 0</li>
<li>在二进制反码上加 1</li>
</ol>
<p>要确定 -18 的二进制表示，首先必须得到 18 的二进制表示，如下所示：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0001</span> <span class="number">0010</span>
</pre></td></tr></table></figure>

<p>接下来，计算二进制反码，如下所示：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1110</span> <span class="number">1101</span>
</pre></td></tr></table></figure>

<p>最后，在二进制反码上加 1，如下所示：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1110</span> <span class="number">1101</span>
                                      <span class="number">1</span>
---------------------------------------
<span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1110</span> <span class="number">1110</span>
</pre></td></tr></table></figure>

<p>因此，-18 的二进制表示即 1111 1111 1111 1111 1111 1111 1110 1110。记住，在处理有符号整数时，开发者不能访问 31 位。</p>
<p>有趣的是，把负整数转换成二进制字符串后，ECMAScript 并不以二进制补码的形式显示，而是用数字绝对值的标准二进制代码前面加负号的形式输出。例如：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> iNum = -<span class="number">18</span>;
alert(iNum.toString(<span class="number">2</span>));	<span class="comment">//输出 "-10010"</span>
</pre></td></tr></table></figure>

<p>这段代码输出的是 “-10010”，而非二进制补码，这是为避免访问位 31。为了简便，ECMAScript 用一种简单的方式处理整数，使得开发者不必关心它们的用法。</p>
<p>另一方面，无符号整数把最后一位作为另一个数位处理。在这种模式中，第 32 位不表示数字的符号，而是值 2<sup>31</sup>。由于这个额外的位，无符号整数的数值范围为 0 到 4294967295。对于小于 2147483647 的整数来说，无符号整数看来与有符号整数一样，而大于 2147483647 的整数则要使用位 31（在有符号整数中，这一位总是 0）。</p>
<p>把无符号整数转换成字符串后，只返回它们的有效位。</p>
<p><strong>注意：</strong>所有整数字面量都默认存储为有符号整数。只有 ECMAScript 的位运算符才能创建无符号整数。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/11/28/javascript-位运算符/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/11/15/ie6中javascript文件开启gzip出现代码不执行情况/">IE6中javascript文件开启Gzip出现代码不执行情况</a></h1>
  

      <time datetime="2011-11-14T20:25:23.000Z"><a href="/2011/11/15/ie6中javascript文件开启gzip出现代码不执行情况/">2011年11月15日</a></time>
    </header>
    <div class="entry">
      
        <p>今天处理IE6下的一个bug，经过调试才发现是<strong>javascript</strong>文件文件总是执行不了，</p>
<p>后来中午吃完饭回来才想起以前同事遇见的html中的javascript不可以执行的问题，怀疑是gzip的原因，此次的问题就是因为动态加载javascript文件导致代码不执行，</p>
<p>经过研究发现gzip压缩过的javascript文件，如果header里Cache-Control 数据有no-cache, no-store，就会出现IE6中js代码不执行的问题。下面是转发的文章内容：</p>
<p>IE6下面调用开启了gzip压缩Javascript的时候，时常会碰到无法执行的情况，有可能是src调用，有可能是ajax调用，其它的浏览器工作正常，唯独IE6不能正常工作。<br>出现这个BUG的状况如下：</p>
<ol>
<li>用户使用IE6浏览器</li>
<li>服务器没有设置 被请求文件(javascript) expires, cache-control.</li>
<li>服务器端开启了chunked encoding模式</li>
<li>通过javascrip的src调用方式或者ajax请求javascript文件</li>
<li>有可能是通过php生成的javascript文件</li>
<li>服务器端开启了gzip压缩</li>
</ol>
<p>解决这个问题，我们要在服务器的cache-control和expires 头信息上做点工作。<br>经过测试，header头信息如下的gzip压缩过的javascript调用可以正常工作。</p>
<blockquote>
<p>Cache-Control:maxage=1<br>Connection:keep-alive<br>Content-Encoding:gzip<br>Content-Type:application/x-javascript;charset=GBK<br>Date:Wed, 01 Dec 2010 01:24:07 GMT<br>Expires:Wed, 01 Dec 2010 01:24:08 GMT<br>Pragma:public<br>Server:nginx<br>Transfer-Encoding:chunked</p>
</blockquote>
<p>分析上面的头信息，我们可以注意到：</p>
<ol>
<li>cache-control必须要设置成maxage=time的格式，maxage是指定缓存生效时间，1为1秒</li>
<li>Expires必须要设置，它的时间稍大于Date即可，Date是页面请求时间，Expires是过期时间</li>
<li>Pragma设置为public</li>
</ol>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/11/15/ie6中javascript文件开启gzip出现代码不执行情况/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/11/08/javascript的string-replace的妙用/">javascript的String.replace的妙用</a></h1>
  

      <time datetime="2011-11-07T19:33:54.000Z"><a href="/2011/11/08/javascript的string-replace的妙用/">2011年11月8日</a></time>
    </header>
    <div class="entry">
      
        <p>作为<strong>前端开发</strong>人员，总会有点自己的奇技淫巧，毕竟前端开发不同于后端，代码全部暴漏给用户不说，代码冗余了少则影响带宽，多则效率降低。所以今天我也来爆个自己的奇技淫巧。</p>
<p>j<strong>avascript</strong>的String.replace方法应该javascript前端开发工程师都了解，可是你掌握了吗？</p>
<p>replace有接受两个参数，第一个参数可以是字符串，也可以是正则表达式，第二个参数除支持字符串之外，还支持<code>$1</code>形式正则匹配的文本，除此之外还支持传入一个处理函数，这个函数的<code>return</code>值就是要替换成的内容。<br>了解更多javascript的String.replace用法，访问：<a href="http://www.w3school.com.cn/js/jsref_replace.asp" target="_blank">http://www.w3school.com.cn/js/jsref_replace.asp</a></p>
<h3>String.replace的妙用</h3>
<p>在《javascript获取隐藏dom的宽高》中，我就使用了replace，使用replace做一些重复性的操作，减少不必要的代码。</p>
<p>其实这里说的重复性的工作就是循环！例如，我们要获取假如我要求id为div1和div2的两个元素的宽高，一部分人会一点一点的做，先算完div1的，然后做div2的，这样你是否觉得有部分是充分的操作呢，于是可以将取宽高的函数独立出来，这样多了一个函数，而且函数只用这两次，似乎有点浪费。</p>
<p>于是一部分人想到了使用split切分字符串，然后用Array.forEach做循环。例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="string">"div1 div2"</span>.split(<span class="string">' '</span>).forEach(<span class="keyword">function</span>(a,i){
    console.log(a);
	<span class="comment">//do something</span>
})
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/11/08/javascript的string-replace的妙用/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/10/24/正确理解javascript的this关键字/">正确理解javascript的this关键字</a></h1>
  

      <time datetime="2011-10-24T08:55:30.000Z"><a href="/2011/10/24/正确理解javascript的this关键字/">2011年10月24日</a></time>
    </header>
    <div class="entry">
      
        <p>javascript有<code>this</code>关键字，this跟<strong>javascript</strong>的执行上下文密切相关，很多前端开发工程师至今对this关键字还是模棱两可，本文将结合代码讲解下javascript的<strong>this关键字</strong>。</p>
<h2>this和对象的关系</h2>
<p>首先来看下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="keyword">var</span> person = {
	name:<span class="string">'Theo Wong'</span>,
	gender:<span class="string">'male'</span>,
	getName:<span class="keyword">function</span>(){
		console.log(person.name);
	}
};
person.getName();
</pre></td></tr></table></figure>

<p>定义了一个person对象，对象中包含了name、gender属性，还包括了一个getName的方法，其作用是输出person对象的name。在这种情况下，我们可以使用this来在person对象中代替person对象本身，所以上面的代码跟下面的直接结果是一样的：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="keyword">var</span> person = {
	name:<span class="string">'Theo Wong'</span>,
	gender:<span class="string">'male'</span>,
	getName:<span class="keyword">function</span>(){
		console.log(<span class="keyword">this</span>.name);
	}
};
person.getName();
</pre></td></tr></table></figure>

<p>请记住一点：<strong>this永远指向的是函数对象的所有者</strong>！上面的例子中getName的所有者是person对象，所以this指代的是person。</p>
<h2>this和全局对象</h2>
<p>我们再来看看再全局对象中，this指代的是什么，我们知道javascript是脚本语言，所以javascript的执行需要有一个宿主环境，在浏览器中这个宿主环境就是window对象，所以在全局函数中，this指代的是window对象（除非使用new，call，apply方法来改变this的指代关系）。懂得了这个关键点，下面的代码就好理解了：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> a = <span class="number">1</span>;
console.log(a);<span class="comment">//1</span>
console.log(<span class="keyword">this</span>.a);<span class="comment">//1</span>
console.log(window.a);<span class="comment">//1</span>
</pre></td></tr></table></figure>

<p>很多<strong>前端开发</strong>工程师经常使用在函数名字之前添加个window来调用函数，这是因为在浏览器中全局对象就是window，所有的函数变量都是在window对象之中，所以下面的代码中的this指代window对象就好理解了：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">var</span> a = <span class="number">1</span>;
<span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span>{</span>
	<span class="keyword">var</span> b = <span class="number">2</span>;
	console.log(<span class="keyword">this</span>.a+b);<span class="comment">//3</span>
}
foo();
</pre></td></tr></table></figure>

<p>所以说，只要记住：<strong>this</strong>永远指向的是函数对象的所有者，即this的值是由激活执行上下文代码的调用者决定的，就好理解this的指代关系了。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/10/24/正确理解javascript的this关键字/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/10/23/chrome扩展应用开发教程之调试和打包上线/">chrome扩展应用开发教程之调试和打包上线</a></h1>
  

      <time datetime="2011-10-23T09:10:02.000Z"><a href="/2011/10/23/chrome扩展应用开发教程之调试和打包上线/">2011年10月23日</a></time>
    </header>
    <div class="entry">
      
        <p>今天的文章来说说chrome扩展开发的最后一步，代码调试和打包上线。</p>
<h2>chrome应用代码调试</h2>
<p>跟<strong>前端开发</strong>一样，chrome应用开发过程中也是需要代码调试的，用的调试工具自然是chrome的开发者工具，所以前端开发工程师应该很快就可以上手！</p>
<p>代码调试需要调出来chrome的扩展程序页面，有三种方式调出来chrome的扩展程序页面</p>
<ol>
<li>chrome右上角“扳手图标”→工具→扩展程序</li>
<li>新开个chrome选项卡，然后在地址栏输入：chrome://extensions/回车</li>
<li>右键点击某个扩展，选择管理扩展程序<br>这样就会看到如下的扩展程序界面：<br><a href="/uploads/2011/10/2011-10-22_124540-300x179.png"><img src="/uploads/2011/10/2011-10-22_124540-300x179.png" alt="chrome扩展程序界面" title="chrome扩展程序界面"></a></li>
</ol>
<p>点击右上角的“开发者模式”，就会出现三个按钮，选择“载入正在开发中的扩展程序…”，在新开的窗口中找到自己开发的程序的路径，然后打开就可以导入开发中的chrome应用了。点击活动视窗，就可以打开chrome的开发中工具，前端开发工程师就可以进行调试了，跟调试前端页面一样哦。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/10/23/chrome扩展应用开发教程之调试和打包上线/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/10/22/chrome扩展应用开发教程之天气预报应用开发/">chrome扩展应用开发教程之天气预报应用开发</a></h1>
  

      <time datetime="2011-10-22T12:14:24.000Z"><a href="/2011/10/22/chrome扩展应用开发教程之天气预报应用开发/">2011年10月22日</a></time>
    </header>
    <div class="entry">
      
        <p>上一篇讲到了<strong>chrome应用开发</strong>的基础知识，这一篇通过周末天气预报插件的开发来讲解下chrome扩展应用的开发过程。熟悉前端开发的童靴，知道了chrome应用开发的基本配置，应该很快就可以开发一个chrome应用，因为chrome插件就是纯粹的javascript和html！</p>
<h2>开发前的准备</h2>
<p>在开发之前需要统筹下，chrome天气预报插件的基本功能和界面，本插件，会这chrome顶部添加一个带有当前天气icon的应用，点击应用打开弹窗页面，天气的数据来自weather.com.cn的接口，所以我们需要跨域授权应用可以请求weather.com.cn的数据。于是chrome天气预报插件的manifest.json部分代码就出来了：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre>{
  <span class="string">"name"</span>: <span class="string">"Chrome Weather"</span>, <span class="comment">//name</span>
  <span class="string">"version"</span>: <span class="string">"0.1.0"</span>, <span class="comment">//version</span>
  <span class="string">"description"</span>: <span class="string">"weather."</span>, <span class="comment">//description</span>
  <span class="string">"background_page"</span>: <span class="string">"background.html"</span>,<span class="comment">//背景页面，应用请求数据，处理icon显示实时气温</span>
  <span class="string">"browser_action"</span>: {
    <span class="string">"default_icon"</span>: <span class="string">"icon.png"</span> ,<span class="comment">//默认的icon</span>
    <span class="string">"default_title"</span>: <span class="string">"Weather"</span>,<span class="comment">//默认鼠标overtitle</span>
    <span class="string">"default_popup"</span>: <span class="string">"popup.html"</span><span class="comment">//弹窗页面</span>
  },
	<span class="string">"permissions"</span>: [ <span class="string">"tabs"</span>, <span class="string">"http://*.weather.com.cn/"</span> ]<span class="comment">//跨域请求授权</span>
}
</pre></td></tr></table></figure>

<p>先来个最终效果截图：<br><a href="/uploads/2011/10/2011-10-22_124856-300x80.png"><img src="/uploads/2011/10/2011-10-22_124856-300x80.png" alt="chrome天气预报应用最终效果截图" title="chrome天气预报应用最终效果截图"></a></p>
<h2>通过背景页面来请求天气数据</h2>
<p>chrome天气插件用到了weather.com.cn的三个接口：</p>
<ol>
<li>根据ip获取当前用户所在城市天气编号：<a href="http://61.4.185.48:81/g/" target="_blank">http://61.4.185.48:81/g/</a></li>
<li>根据城市天气编号获取五天内天气：<a href="http://m.weather.com.cn/data/&#39;+id+&#39;.html" target="_blank">http://m.weather.com.cn/data/&#39;+id+&#39;.html</a></li>
<li>根据城市天气编号获取实时天气：<a href="http://www.weather.com.cn/data/sk/&#39;+id+&#39;.html" target="_blank">http://www.weather.com.cn/data/sk/&#39;+id+&#39;.html</a><br>chrome天气插件使用了jQuery开发，所以我们需要在html的头部添加jquery库：<br><pre lang="html"><br><script type="text/javascript" src="js/jquery.min.js"></script><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>
<span class="comment">### 根据ip获取当前用户所在城市</span>

当用户第一次运行chrome时候，需要请求背景页面，即background.html，这时，我们需要请求接口来获取当前用户所在的城市信息，以根据cityid获取天气情况。代码如下：
```javascript
<span class="variable">$.</span>getScript(<span class="string">'http://61.4.185.48:81/g/'</span>,function(){
	window.localStorage.cityid = id;<span class="regexp">//</span>保存cityid到localStorage
	getWeather(id);<span class="regexp">//</span>获取天气信息
});
</pre></td></tr></table></figure>

</li>
</ol>
<h3>根据cityid获取天气信息</h3>
<p>上一步，涉及到了一个函数getWeather，这个函数的作用就是做一个xmlHttpRequest请求，获取当前cityid的天气信息，包括实时天气。getWeather中运用了send函数来做xmlHttpRequest请求。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">getWeather</span><span class="params">(id)</span>{</span>
	<span class="keyword">var</span> url = <span class="string">'http://m.weather.com.cn/data/'</span>+id+<span class="string">'.html'</span>;
	<span class="keyword">var</span> url2 = <span class="string">'http://www.weather.com.cn/data/sk/'</span>+id+<span class="string">'.html'</span>;
	send(url,<span class="keyword">function</span>(json){
		json0 = json;
		window.localStorage.json0 = JSON.stringify(json);
		doit++;
		deal();<span class="comment">//处理json0</span>
	}).call(<span class="keyword">this</span>,url2,<span class="keyword">function</span>(json){
		json1 = json;
		window.localStorage.json1 = JSON.stringify(json);
		doit++;
		deal();<span class="comment">//处理json1</span>
	});

}
<span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">(url,cb)</span>{</span>
	<span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();
	xhr.open(<span class="string">"GET"</span>, url, <span class="literal">true</span>);
	xhr.onreadystatechange = <span class="keyword">function</span>() {
	  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) {
		<span class="keyword">var</span> json = JSON.parse(xhr.responseText);<span class="comment">//解析json，保证安全性</span>
		<span class="keyword">typeof</span> cb===<span class="string">'function'</span> && json.weatherinfo && cb(json.weatherinfo);
		xhr = <span class="literal">null</span>;
	  }
	}
	xhr.send();
	<span class="keyword">return</span> arguments.callee;
}
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/10/22/chrome扩展应用开发教程之天气预报应用开发/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/10/21/chrome扩展应用开发教程之开发chrome应用基础/">chrome扩展应用开发教程之开发chrome应用基础</a></h1>
  

      <time datetime="2011-10-21T11:55:17.000Z"><a href="/2011/10/21/chrome扩展应用开发教程之开发chrome应用基础/">2011年10月21日</a></time>
    </header>
    <div class="entry">
      
        <p>不得不说<strong>chrome</strong>做的真的不错，听了貘大大关于<strong>chrome插件</strong>机制的讲座，就有亲手做个chrome应用的冲动，这个周末终于抽时间做了一个简单的天气预报插件，原理还是很简单的，采用了weather.com.cn的数据，因为比较熟悉这个weather.com.cn的接口，所以很快就搞定一个简单的chrome天气预报应用了。废话不多说了，开始正文。</p>
<h2>chrome应用开发基础知识</h2>
<p>chrome扩展应用是由html、css和javascript组成的，所以chrome应用的门槛比较低，对于一个<strong>前端开发</strong>者，只要读懂了chrome的开发文档，就可以很快的上手一个chrome应用。</p>
<p>每个chrome扩展都应该包含下面的文件：</p>
<blockquote>
<p>一个包括一个manifest.json文件，是个配置文件，json格式，通过manifest.json可以设置应用的icon，指定默认的background.html或者popup.html……<br>一个或多个html文件（除非这个应用是一个皮肤）<br>可选的一个或多个javascript文件<br>可选的任何需要的其他文件，例如图片</p>
</blockquote>
<p>在开发应用（扩展）时，需要把这些文件都放到同一个目录下。发布应用（扩展）时，这个目录全部打包到一个应用（扩展）名是.crx的压缩文件中。如果使用<a href="https://chrome.google.com/webstore/developer/dashboard" target="_blank">Chrome Developer Dashboard</a>，上传应用（扩展），可以自动生成.crx文件。</p>
<p>下图是我天气预报插件的文件列表：<br><a href="/uploads/2011/10/2011-10-21_215004.png"><img src="/uploads/2011/10/2011-10-21_215004.png" alt="chrome天气预报插件目录结构" title="chrome天气预报插件目录结构"></a></p>
<h2>chrome应用界面控制</h2>
<p>chrome应用会以browser action或page action的形式在chrome浏览器界面上展现出来。每个应用扩展最多可以有一个browser action或page action。当应用（扩展）的图标是否显示出来是取决于单个的页面时，应当选择page action；当其它情况时可以选择browser action。</p>
<p>例如gmail提醒应用使用了browser action，它在工具栏上增加一个图标：</p>
<p><a href="/uploads/2011/10/gmail.png"><img src="/uploads/2011/10/gmail.png" alt="gmail应用使用browser action提示" title="gmail应用使用browser action提示"></a></p>
<p>这个新闻阅读应用也使用了browser action，当点击时会弹出一个气泡窗口popup.html：<br><a href="/uploads/2011/10/news.png"><img src="/uploads/2011/10/news.png" alt="news使用的是popup的方式" title="news使用的是popup的方式"></a></p>
<p>另外chrome还包括了<a href="http://dev.chromium.org/developers/design-documents/desktop-notifications/api-specification" target="_blank">桌面提醒</a>（gmail新邮件提醒），主题（chrome皮肤），应用设置页面（应用设置页面），选项卡页面（新选项卡页面）等多种界面形式，本文示例使用的是browser action和popup页面来做一个简单的应用。</p>
<h3>chrome应用基本架构</h3>
<p>绝大多数chrome应用会包含一个背景页面(background page)，用来执行chrome应用扩展的主要功能。该背景页面时再manifest.json中设置的：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="string">"background_page"</span>: <span class="string">"bg.html"</span>,<span class="comment">//默认背景页面</span>
</pre></td></tr></table></figure>

<p><a href="/uploads/2011/10/background.gif"><img src="/uploads/2011/10/background.gif" alt="chrome通过background.html来实现主要功能" title="chrome通过background.html来实现主要功能"></a>[/caption]</p>
<p>上图显示了安装了应用扩展的chrome。黄色图标代表的browser action和蓝色图标代表的page action。在background.html文件里定义了browser action和javascript代码。在两个窗口里browser action都可以工作。</p>
<p>背景页面并不是chrome应用中唯一的页面。例如，本例天气预报插件中还包括了一个弹窗页面(popup.html)，此页面也是又html页面实现的。在应用内部还可以使用chrome.tabs.create()或者window.open()来显示内部的HTML文件。</p>
<p>chrome应用的弹窗界面也是可以在manifest.json中设置的：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="string">"browser_action"</span>: {
    <span class="string">"default_icon"</span>: <span class="string">"icon.png"</span> ,
    <span class="string">"default_title"</span>: <span class="string">"Weather"</span>,
    <span class="string">"default_popup"</span>: <span class="string">"popup.html"</span>
  },
</pre></td></tr></table></figure>

<blockquote>
<p>值得一提的是chrome应用里面的HTML页面可以互相访问各自DOM树中的全部元素，或者互相调用其中的函数。</p>
</blockquote>
<p>下图显示了一个chrome应用的弹窗的架构。弹窗的内容是由HTML文件（popup.html）定义的web页面。它不必复制背景页面(background.html)里的代码，因为它可以直接调用背景页面中的函数！</p>
<p><a href="/uploads/2011/10/popup.gif"><img src="/uploads/2011/10/popup.gif" alt="chrome应用的弹窗界面" title="chrome应用的弹窗界面"></a></p>
<h3>应用文件的引用</h3>
<p>任何需要的文件都可以放到应用（扩展）中，但是怎么使用它们呢？一般的说，可以像在普通的HTML文件中那样使用相对地址来引用一个文件。下面的例子演示了如何引用images子目录下的文件myimage.png</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"img/myimage.png"</span> <span class="attribute">alt</span>=<span class="value">""</span>&gt;</span>
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/10/21/chrome扩展应用开发教程之开发chrome应用基础/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/10/19/javascript嵌套函数的效率问题/">javascript嵌套函数的效率问题</a></h1>
  

      <time datetime="2011-10-19T13:27:00.000Z"><a href="/2011/10/19/javascript嵌套函数的效率问题/">2011年10月19日</a></time>
    </header>
    <div class="entry">
      
        <p>javascript自诞生以来就是一门受争议的编程语言，很多人也对javascript的语法表示不解，例如javascript嵌套函数。本文来自Nettuts+的一篇教程，详细的介绍了<strong>javascript</strong>中嵌套函数效率问题，从小处说起，一直说到匿名函数、继承，感觉不错。</p>
<h2>嵌套函数效率</h2>
<p>很多jser喜欢在javascript代码中使用嵌套函数，例如下面的例子就是一个典型的嵌套函数：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(a, b)</span> {</span>
    <span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">()</span> {</span>
        <span class="keyword">return</span> a + b;
    }

    <span class="keyword">return</span> bar();
}

foo(<span class="number">1</span>, <span class="number">2</span>);
</pre></td></tr></table></figure>

<p>上面的代码中<code>foo()</code>中嵌入了<code>bar()</code>，当<code>foo()</code>运行的时候，就会调用<code>bar()</code>。javascript引擎不会创建<code>bar()</code>函数，直到外部引用了<code>foo()</code>，随着<code>foo()</code>的运行结束，<code>bar()</code>也会销毁。</p>
<p>当多次运行<code>foo</code>的时候，<strong>javascript引擎</strong>就要在每次的运行<code>foo</code>时创建<code>bar</code>函数，而每次<code>foo</code>结束就要销毁<code>bar</code>函数，这是一个很费劲的工作。</p>
<p>那么为什么我们不把<code>bar</code>函数拿出来，做为一个独立的函数，它在<code>foo</code>外部只被创建一次，而不是多次，这样就大大的提高了代码效率。例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> bar(a, b);
}

<span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">(a, b)</span> {</span>
    <span class="keyword">return</span> a + b;
}

foo(<span class="number">1</span>, <span class="number">2</span>);
</pre></td></tr></table></figure>

<p>当然这样做可能随着程序的复杂性，可能存在命名冲突的危险，所以jser需要在这方面权衡，或者采用命名空间来解决这个方式。下面是在jsperf中做的关于上面两个函数大量运行的速度测试<a href="http://jsperf.com/nested-named-functions" target="_blank"><a href="http://jsperf.com/nested-named-functions">http://jsperf.com/nested-named-functions</a></a>。不同的浏览器测试的结果不同，但是总体来看，两个独立的函数要比相互嵌套的javascript函数效率提高10%~90%。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/10/19/javascript嵌套函数的效率问题/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/10/18/html5的sessionstorage和localstorage/">HTMl5的sessionStorage和localStorage</a></h1>
  

      <time datetime="2011-10-18T14:05:53.000Z"><a href="/2011/10/18/html5的sessionstorage和localstorage/">2011年10月18日</a></time>
    </header>
    <div class="entry">
      
        <p>html5中的Web Storage包括了两种存储方式：sessionStorage和localStorage。</p>
<p><strong>sessionStorage</strong>用于本地存储一个会话（session）中的数据，这些数据只有在同一个会话中的页面才能访问并且当会话结束后数据也随之销毁。因此sessionStorage不是一种持久化的本地存储，仅仅是会话级别的存储。</p>
<p>而<strong>localStorage</strong>用于持久化的本地存储，除非主动删除数据，否则数据是永远不会过期的。</p>
<h2>web storage和cookie的区别</h2>
<p>Web Storage的概念和cookie相似，区别是它是为了更大容量存储设计的。Cookie的大小是受限的，并且每次你请求一个新的页面的时候Cookie都会被发送过去，这样无形中浪费了带宽，另外cookie还需要指定作用域，不可以跨域调用。</p>
<p>除此之外，<strong>Web Storage</strong>拥有setItem,getItem,removeItem,clear等方法，不像cookie需要前端开发者自己封装setCookie，getCookie。</p>
<p>但是Cookie也是不可以或缺的：Cookie的作用是与服务器进行交互，作为HTTP规范的一部分而存在 ，而Web Storage仅仅是为了在本地“存储”数据而生（来自@otakustay 的纠正）</p>
<h2>html5 web storage的浏览器支持情况</h2>
<p>浏览器的支持除了IE７及以下不支持外，其他标准浏览器都完全支持(ie及FF需在web服务器里运行)，值得一提的是IE总是办好事，例如IE7、IE6中的UserData其实就是<strong>javascript本地存储</strong>的解决方案。通过简单的代码封装可以统一到所有的浏览器都支持web storage。</p>
<p>要判断浏览器是否支持localStorage可以使用下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">if</span>(window.localStorage){
    alert(<span class="string">"浏览支持localStorage"</span>)
}<span class="keyword">else</span>{
   alert(<span class="string">"浏览暂不支持localStorage"</span>)
}
<span class="comment">//或者</span>
<span class="keyword">if</span>(<span class="keyword">typeof</span> window.localStorage == <span class="string">'undefined'</span>){
	alert(<span class="string">"浏览暂不支持localStorage"</span>)
}
</pre></td></tr></table></figure>

<h2>localStorage和sessionStorage操作</h2>
<p>localStorage和sessionStorage都具有相同的操作方法，例如setItem、getItem和removeItem等</p>
<h3>localStorage和sessionStorage的方法</h3>
<h4>setItem存储value</h4>
<p>用途：将value存储到key字段<br>用法：.setItem( key, value)</p>
<p>代码示例：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>sessionStorage.setItem(<span class="string">"key"</span>, <span class="string">"value"</span>);
localStorage.setItem(<span class="string">"site"</span>, <span class="string">"js8.in"</span>);
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/10/18/html5的sessionstorage和localstorage/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/09/29/基于expresssocket-io的nodejs聊天室/">基于express+socket.io的nodejs聊天室</a></h1>
  

      <time datetime="2011-09-29T15:20:24.000Z"><a href="/2011/09/29/基于expresssocket-io的nodejs聊天室/">2011年9月29日</a></time>
    </header>
    <div class="entry">
      
        <p>前几天晚上边看水浒边写的<a href="http://js8.in/tag/nodejs">nodejs</a>的聊天室，前面说了，放假之前要把近日学习nodejs的所有心得整理下，今天就是30号鸟~撒欢~，最后放这个聊天室出来给大家作为学习<strong>nodejs</strong>的参考示例，希望对大家有用。</p>
<p>感谢：cnodejs群里的老雷，及其<a href="http://weibo.com/sanshuiqing" target="_blank">微博</a>上的基友们！顺祝大家长假快乐，顺祝自己明天动车不出轨，顺祝明年不再过节，感慨多了……</p>
<h3>特点</h3>
<p>聊天室主要功能及其特点：</p>
<ol>
<li>采用nodejs（屁话）</li>
<li>express框架,jade做模板</li>
<li>socket.io做前后端的websocket通信</li>
<li>支持session</li>
<li>支持@私信功能<br>废话不多说了，注意点，基本前面的文章都提到了，下面罗列下：<br>《<a href="http://js8.in/764.html">配置nodejs.exe的windows目录结构</a>》<br>《<a href="http://js8.in/774.html">安装express及配置app.js文件</a>》<br>《<a href="http://js8.in/784.html">使用socket.io和node.js搭建websocket应用</a>》<br>《<a href="http://js8.in/788.html">在Express和Socket.IO中使用session</a>》</li>
</ol>
<h3>nodejs聊天室下载地址</h3>
<p><a href="http://1.nodejsdemo.sinaapp.com/chat/chat.zip" title="基于express+socket.io的聊天室" target="_blank">基于express+socket.io的聊天室</a></p>
<h3>聊天室服务器端js代码</h3>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/09/29/基于expresssocket-io的nodejs聊天室/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/09/29/在express和socket-io中使用session/">在Express和Socket.IO中使用session</a></h1>
  

      <time datetime="2011-09-29T14:32:53.000Z"><a href="/2011/09/29/在express和socket-io中使用session/">2011年9月29日</a></time>
    </header>
    <div class="entry">
      
        <p>在nodejs项目中对于一些认证需要用到<strong>session</strong>，例如我写的nodejs 聊天室的demo，就是通过session实现的认证。当存在session，直接进入聊天室，而不会重新登录。</p>
<p>在网上也找到不少关于Express框架中的session调用方法，可是发现真正能用的不是很多，今天根据聊天室的制作过程，整理下Express和socket.IO中使用session的具体方法。</p>
<p>Express的session是通过cookie实现的，用到了connect中的两个module：parseCookie和MemoryStore，前者是用来解析cookie，后者用来存储sesion。</p>
<h2>引入所需module</h2>
<p>Express框架中使用session必须先引入上面的两个模块，例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">var</span> parseCookie = require(<span class="string">'connect'</span>).utils.parseCookie,
	MemoryStore = require(<span class="string">'connect/middleware/session/memory'</span>);
<span class="comment">//建立一个memory store的实例</span>
<span class="keyword">var</span> storeMemory = <span class="keyword">new</span> MemoryStore({
		reapInterval: <span class="number">60000</span> * <span class="number">10</span>
	});
</pre></td></tr></table></figure>

<h2>Express中app的配置</h2>
<p>在app需要添加如下的配置：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>app.configure(<span class="keyword">function</span>(){
	app.use(express.bodyParser());<span class="comment">//解析post</span>
	app.use(express.cookieParser());<span class="comment">//解析cookie</span>
	<span class="comment">//设置session</span>
	app.use(express.session({
		secret: <span class="string">'wyq'</span>,
		store:storeMemory
	}));
});
</pre></td></tr></table></figure>

<h2>在请求中使用session</h2>
<p>在请求中我们可以使用request.session来调用session，例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre>app.get(<span class="string">'/'</span>,<span class="keyword">function</span>(req,res){
	<span class="comment">//使用request.session来判断是否登录</span>
	<span class="keyword">if</span>( req.session.name && req.session.name!==<span class="string">''</span>){
		<span class="comment">//需要判断下是否已经登录</span>
		res.redirect(<span class="string">'/chat'</span>);
	}<span class="keyword">else</span>{
		<span class="comment">//读取登录页面，要求登录</span>
		<span class="keyword">var</span> realpath = __dirname + <span class="string">'/views/'</span> + url.parse(<span class="string">'login.html'</span>).pathname;
		<span class="keyword">var</span> txt = fs.readFileSync(realpath);
		res.end(txt);
	}
});
</pre></td></tr></table></figure>

<h2>websocket通信中使用session</h2>
<p>在nodejs项目中，我们常常使用websockt来实现通信，所以websocket中也需要通过session来认证用户。本例使用socket.io来举例实现nodejs中websocket通信session的认证。关于socket.io的使用参考文章《<a href="http://js8.in/784.html">使用socket.io和node.js搭建websocket应用</a>》</p>
<p>上面代码中引入了解析cookie的<strong>parseCookie</strong>，所以session是通过cookie来解析的。首先我们建立了socket的监听之后需要对监听到的头文件处理，解析出来cookie中的session。例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code"><pre><span class="keyword">var</span> io = sio.listen(app);
<span class="comment">//设置session</span>
io.set(<span class="string">'authorization'</span>, <span class="keyword">function</span>(handshakeData, callback){
	<span class="comment">// 通过客户端的cookie字符串来获取其session数据</span>
	handshakeData.cookie = parseCookie(handshakeData.headers.cookie)
	<span class="keyword">var</span> connect_sid = handshakeData.cookie[<span class="string">'connect.sid'</span>];
	<span class="keyword">if</span> (connect_sid) {
		storeMemory.get(connect_sid, <span class="keyword">function</span>(error, session){
			<span class="keyword">if</span> (error) {
				<span class="comment">// if we cannot grab a session, turn down the connection</span>
				callback(error.message, <span class="literal">false</span>);
			}
			<span class="keyword">else</span> {
				<span class="comment">// save the session data and accept the connection</span>
				handshakeData.session = session;
				callback(<span class="literal">null</span>, <span class="literal">true</span>);
			}
		});
	}
	<span class="keyword">else</span> {
		callback(<span class="string">'nosession'</span>);
	}
});
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/09/29/在express和socket-io中使用session/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/09/28/使用socket-io和node-js搭建websocket应用/">使用socket.io和node.js搭建websocket应用</a></h1>
  

      <time datetime="2011-09-28T15:42:21.000Z"><a href="/2011/09/28/使用socket-io和node-js搭建websocket应用/">2011年9月28日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>websocket</strong>是HTML5的一种新的通信协议，它是实现了浏览器与服务器的双向通讯。在 WebSocket API 中，浏览器和服务器只需要要做一个握手的动作，然后，浏览器和服务器之间就形成了一条快速通道。两者之间就直接可以数据互相传送。<br>关于websocket的更多信息，请移步<a href="http://zh.wikipedia.org/wiki/WebSocket" target="_blank">维基百科</a></p>
<h2>使用WebSocket</h2>
<p>在客户端使用websocket需要创建WebSocket对象，通过提供的open、send、message、close等方法实现创建、发送、监听信息、关闭连接。例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre><span class="keyword">if</span>(<span class="string">'WebSocket'</span> <span class="keyword">in</span> window){
	<span class="comment">// 创建websocket实例</span>
	<span class="keyword">var</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">'ws://localhost:8080'</span>);
	<span class="comment">//打开</span>
	socket.onopen = <span class="keyword">function</span>(event) {
	  <span class="comment">// 发送</span>
	  socket.send(<span class="string">'I am the client and I\'m listening!'</span>);
	  <span class="comment">// 监听</span>
	  socket.onmessage = <span class="keyword">function</span>(event) {
		console.log(<span class="string">'Client received a message'</span>,event);
	  };
	  <span class="comment">// 关闭监听</span>
	  socket.onclose = <span class="keyword">function</span>(event) {
		console.log(<span class="string">'Client notified socket has closed'</span>,event);
	  };
	  <span class="comment">// 关闭</span>
	  <span class="comment">//socket.close()</span>
	};
}<span class="keyword">else</span>{
	alert(<span class="string">'本浏览器不支持WebSocket哦~'</span>);
}
</pre></td></tr></table></figure>

<p>现在chrome、firefox等浏览器都已经支持了websocket，而IE却没有。下面我们来简单说说服务器端对websocket的支持。</p>
<p>服务器端支持<strong>websocket</strong>的语言不少，而且都有相关的开源项目，例如php的phpwebsockets：<a href="http://code.google.com/p/phpwebsockets/" target="_blank"><a href="http://code.google.com/p/phpwebsockets/">http://code.google.com/p/phpwebsockets/</a></a>，java的jWebsocket：<a href="http://jwebsocket.org/" target="_blank"><a href="http://jwebsocket.org/">http://jwebsocket.org/</a></a>。<br>更多的信息可以浏览这篇文章：<a href="http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/" target="_blank">Start Using HTML5 WebSockets Today</a></p>
<h2>socket.io</h2>
<p><strong>socket.IO</strong>是一个websocket库，包括了客户端的js和服务器端的nodejs。官方地址：<a href="http://socket.io" target="_blank"><a href="http://socket.io">http://socket.io</a></a></p>
<h3>客户端使用socket.io</h3>
<p>去github clone socket.io的最新版本，或者直接饮用使用socket.io的CDN服务：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://cdn.socket.io/stable/socket.io.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>

<p>下面可以创建使用socket.io库来创建客户端js代码了：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> socket = io.connect(<span class="string">'http://localhost'</span>);
socket.on(<span class="string">'news'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(data)</span> {</span>
	console.log(data);
	socket.emit(<span class="string">'my other event'</span>, { my: <span class="string">'data'</span> });
});
</pre></td></tr></table></figure>

<p>socket.on是监听，收到服务器端发来的news的内容，则运行function，其中data就是请求回来的数据，socket.emit是发送消息给服务器端的方法。</p>
<h3>使用socket.io和nodejs搭建websocket服务器端</h3>
<p>socket.io不仅可以搭建客户端的websocket服务，而且支持nodejs服务器端的websocket。</p>
<h3>nodejs安装socket.io</h3>
<p>使用node插件管理包，运行下面的命令就可以安装成功socket.io</p>
<blockquote>
<p>npm install socket.io</p>
</blockquote>
<p>没有npm的或者windows用户可以使用github下载socket.io并且放入到node_modules文件夹中，具体配置可以参考文章：《nodejs教程：配置nodejs.exe的windows目录结构》</p>
<h3>nodejs建立socket.io服务</h3>
<p>通过nodejs的http模块就可以方便的搭建websocket服务器环境，例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="code"><pre>// 引入需要的模块：http和socket.io
var http = require('http'), io = require('socket.io');
//创建server
var server = http.createServer(function(req, res){
  // Send HTML headers and message
  res.writeHead(200,{ 'Content-Type': 'text/html' });
  res.end('

# Hello Socket Lover!
');
});
//端口8000
server.listen(8080);
//创建socket
var socket = io.listen(server);
//添加连接监听
socket.on('connection', function(client){
	//连接成功则执行下面的监听
	client.on('message',function(event){
		console.log('Received message from client!',event);
	});
	//断开连接callback
	client.on('disconnect',function(){
		console.log('Server has disconnected');
	});
});
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/09/28/使用socket-io和node-js搭建websocket应用/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/09/27/javascript获取隐藏dom的宽高/">javascript获取隐藏dom的宽高</a></h1>
  

      <time datetime="2011-09-27T14:50:15.000Z"><a href="/2011/09/27/javascript获取隐藏dom的宽高/">2011年9月27日</a></time>
    </header>
    <div class="entry">
      
        <p>一个隐藏的DOM是获取不到宽高的，如果想要获取，采用下面的方法：<br>首先clone一个DOM，设置<code>position:absolute</code>，然后设置top为一个比较大的负值，然后使其显示出来，最后获取到了DOM的宽高后，将其remove。</p>
<p>具体代码如下：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/09/27/javascript获取隐藏dom的宽高/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/09/27/nodejs教程：安装express即配置app-js文件/">nodejs教程：安装express及配置app.js文件</a></h1>
  

      <time datetime="2011-09-26T22:35:52.000Z"><a href="/2011/09/27/nodejs教程：安装express即配置app-js文件/">2011年9月27日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>express.js</strong>是nodejs的一个MVC开发框架，并且支持jade等多种模板。下面简单来说说express的安装和app.js文件的配置，然后在今后的教程中一步一步使用express.js搭建个聊天室。</p>
<h2>安装express.js</h2>
<p>如果你安装了npm，安装变得很简单，只需要在终端中运行下面的代码即可：</p>
<blockquote>
<p>npm install express -gd<br>-g代表安装到NODE_PATH的lib里面，而-d代表把相依性套件也一起安装。如果沒有-g的话会安装目前所在的目录(会建立一个node_modules的文件夹)，你可以透过以下指令来比较两者的不同：</p>
<p>npm list -g<br>npm list</p>
</blockquote>
<p>如果没有npm，那么我可以使用github来git下来最新的express。<br>好了，现在你可以通过<code>express testapp</code>来建立express实例。以下是示例：</p>
<blockquote>
<p>cd ~<br>express testapp<br>cd testapp<br>node app.js<br>这样就建立了一个testapp的<strong>nodejs</strong>应用，而app.js是默认的应用主js。下面来详细的说说app.js中的各项配置。</p>
</blockquote>
<h2>引入模块</h2>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">var</span> express = require(<span class="string">'express'</span>);
 <span class="keyword">var</span> app = module.exports = express.createServer();
</pre></td></tr></table></figure>

<p>require()是node.js提供的函数，可以让你引入其他模块以调用模块的函数和变量，默认下node.js会在$NODE_PATH和目前js所在目录下的node_modules文件夹下去寻找模块。require也可以用来载入自己写的模块哦~这样涉及到node.js的模块机制，后面有机会就在介绍。</p>
<p>第二行的express.createServer()就是在建立server，而中间的module.exports也是涉及到node.js的模块机制，以后再说。</p>
<h2>express的app.js的详细配置说明</h2>
<p>express.js继承自connect模块，所以如果你的node_modules文件夹下没有connect模块也是不行的。</p>
<h3>设置views路径和模板</h3>
<p>我们再来看下面两行：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>app.set(<span class="string">'views'</span>, __dirname + <span class="string">'/views'</span>);
app.set(<span class="string">'view engine'</span>, <span class="string">'jade'</span>);
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/09/27/nodejs教程：安装express即配置app-js文件/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/09/08/使用html5-postmessage和window-name实现多浏览器跨域/">使用html5 postMessage和window.name实现多浏览器跨域</a></h1>
  

      <time datetime="2011-09-07T17:40:30.000Z"><a href="/2011/09/08/使用html5-postmessage和window-name实现多浏览器跨域/">2011年9月8日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>跨域</strong>是个“很古老”的问题，因为浏览器的同源策略，导致不同域名下不能进行跨域名请求数据，虽然这样设计安全了很多，但是对于大型的网站同时维护多个域名就需要进行跨域操作。例如：微博开放平台的jssdk实现的跨域请求数据，再例如weibo.com和sina.com的同步登录。</p>
<p>之前我也说过不少跨域的方式了，有结合服务器端的，有纯粹javascript实现的跨域，例如：《<a href="http://js8.in/685.html">利用跨域资源共享（CORS）实现ajax跨域调用</a>》、《<a href="http://js8.in/443.html">用document.domain+iframe实现Ajax跨子域</a>》、《<a href="http://js8.in/548.html">通过JSONP实现完美跨域</a>》。在我的上一篇文章《<a href="http://js8.in/750.html">javascript入门到高级PPT</a>》中也提到了跨域。<br>当然也有不少关于跨域的文章，例如口碑UED的文章《<a href="http://ued.koubei.com/?p=1291" target="_blank">跨域资源共享的10种方式</a>》等等。大家可以去阅读一下。</p>
<p>今天我说的html5 <strong>postMessage</strong>和window.name也不是一种新的跨域方式，因为有不少人写文章写了，而实际应用的我不知道有哪些人？不过新浪微博的新旧两个jssdk都是采用这种方式，包括之前的人人网的xd.html，当然现在的人人和facebook都是通过flash实现的跨域，这不是今天说的内容。</p>
<h3>html5 postMessage实现跨域</h3>
<p>postMessage是html5的一个新功能，可以实现不同域名之间的通信，通过给postMessage方式发送数据，监听则通过在父子窗口添加onmessage事件进行。<br>缺点也就很明显了，只有支持html5的浏览器才支持这种跨域方式，像IE6、7当然就拒之门外了！</p>
<h3>window.name实现跨域</h3>
<p>window.name实现跨域也是一个比较老的问题，之前<a href="http://hikejun.com/blog/?p=56" target="_blank">kejun</a>写过一个<a href="http://hikejun.com/demo/windowname/demo_windowname.html" target="_blank">demo</a>，可是给的却是同域名的通信。<br>其实kejun的实例中就是实现跨域的，不过他采用了同一个域名，而且过程比较崎岖：</p>
<ol>
<li>建立iframe，指定src为被跨域的页面</li>
<li>被跨域文件修改window.name，将数据传给window.name</li>
<li>将iframe.src修改为本域代理文件，然后就可以取到contentWindow.name</li>
<li>进行处理数据，清除iframe<br>充分的运用了<strong>window.name</strong>因为页面的url改变而name不改变的特性。<br>但是如果我们是自己用，还是可以的，而如果我们放出去要别人使用我们写的东西，那样学习成本太大。</li>
</ol>
<h3>多浏览器双向跨域</h3>
<p>为了解决上面的问题，我们使用的方法就是如果支持<strong>postMessage</strong>的浏览器就使用postMessage，如果不支持的就采用window.name的方式，幸运的是在IE6、7中支持跨域设置window.name，而我们就可以简单的通过window.name来<strong>跨域</strong>。然后建立计时器来监听window.name是否发生了变化，如果变化则接收并分析window.name，然后做请求。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/09/08/使用html5-postmessage和window-name实现多浏览器跨域/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/08/27/javascript入门到高级ppt/">javascript入门到高级PPT</a></h1>
  

      <time datetime="2011-08-27T14:10:20.000Z"><a href="/2011/08/27/javascript入门到高级ppt/">2011年8月27日</a></time>
    </header>
    <div class="entry">
      
        <p>前些日子参加了公司RIA的实习生和新员工的<strong>javascript</strong>培训课程，做了个PPT，今天拿来跟大家分享下，高手飘过，欢迎拍砖。<br>本课程分了两段，第一部分是javascript入门基础和中级教程，后面是高级，讲到了javascript的作用域链和原型链，以及javascript面向对象的继承写法，最后简单提了一下前端安全，最后简单介绍了下前端的发展和展望，要新员工开阔下眼界，同时提供了一些学习的资源和RSS源。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/08/27/javascript入门到高级ppt/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/08/15/javascript的词法作用域/">javascript的词法作用域</a></h1>
  

      <time datetime="2011-08-15T08:35:22.000Z"><a href="/2011/08/15/javascript的词法作用域/">2011年8月15日</a></time>
    </header>
    <div class="entry">
      
        <p>大家应该写过下面类似的代码吧，其实这里我想要表达的是有时候一个方法定义的地方和使用的地方会相隔十万八千里，那方法执行时，它能访问哪些变量，不能访问哪些变量，这个怎么判断呢？这个就是我们这次需要分析的问题——<strong>词法作用域</strong></p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="keyword">var</span> classA = <span class="keyword">function</span>(){
    <span class="keyword">this</span>.prop1 = <span class="number">1</span>;
}
classA.prototype.func1 = <span class="keyword">function</span>(){
    <span class="keyword">var</span> that = <span class="keyword">this</span>,
        var1 = <span class="number">2</span>;

    <span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">()</span>{</span>
        <span class="keyword">return</span> <span class="keyword">function</span>(){
            alert(var1);
            alert(<span class="keyword">this</span>.prop1);
        }.apply(that);
    };
    a();
}
<span class="keyword">var</span> objA = <span class="keyword">new</span> ClassA();
objA.func1();
</pre></td></tr></table></figure>

<p><strong>词法作用域</strong>：变量的作用域是在定义时决定而不是执行时决定，也就是说词法作用域取决于源码，通过静态分析就能确定，因此词法作用域也叫做静态作用域。 with和eval除外，所以只能说JS的作用域机制非常接近词法作用域（Lexical scope）。</p>
<p>下面通过几个小小的案例，开始深入的了解对理解词法作用域和<strong>闭包</strong>必不可少的，JS执行时底层的一些概念和理论知识。</p>
<h2>经典案列重现</h2>
<h4>1、经典案例一</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="comment">/*全局（window）域下的一段代码*/</span>
<span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">(i)</span> {</span>
    <span class="keyword">var</span> i;
    alert(i);
};
a(<span class="number">10</span>);
</pre></td></tr></table></figure>

<p>疑问：上面的代码会输出什么呢？<br>答案：没错，就是弹出10。具体执行过程应该是这样的</p>
<blockquote>
<p>a 函数有一个形参 i，调用 a 函数时传入实参 10，形参 i=10<br>接着定义一个同名的局部变量 i，未赋值<br>alert 输出 10</p>
</blockquote>
<p>思考：局部变量 i 和形参 i 是同一个存储空间吗？</p>
<h4>2、经典案例二</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="comment">/*全局（window）域下的一段代码*/</span>
<span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">(i)</span> {</span>
    alert(i);
    alert(arguments[<span class="number">0</span>]); <span class="comment">//arguments[0]应该就是形参 i</span>
    <span class="keyword">var</span> i = <span class="number">2</span>;
    alert(i);
    alert(arguments[<span class="number">0</span>]);
};
a(<span class="number">10</span>);
</pre></td></tr></table></figure>

<p>疑问：上面的代码又会输出什么呢？（（ 10,10,2,10 || 10,10,2,2 ））<br>答案：在FireBug中的运行结果是第二个10,10,2,2，猜对了… ，下面简单说一下具体执行过程<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/08/15/javascript的词法作用域/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/08/11/javascript变量类型/">javascript变量类型</a></h1>
  

      <time datetime="2011-08-11T12:51:09.000Z"><a href="/2011/08/11/javascript变量类型/">2011年8月11日</a></time>
    </header>
    <div class="entry">
      
        <p>javascript的<strong>变量类型</strong>真的很要人纠结，即使你是很有经验的js工程师，你也很难说清楚js的类型和分类。<br>最近在讲javascript入门指南的时候，有人提出数组为什么不是基本类型，我通过演示<code>typeof []</code>的结果来说明，数组是对象类型派生出来的，而不是六种基本类型。<br>其实要理解javascript的变量类型很简单，就是我们要找到一个划分的标准。</p>
<h2>javascript变量类型分类</h2>
<p>在很多书中都提到了javascript的变量类型，每本书都有不同的划分标准，如果按照typeof和instanceof的返回值来区分，可以把javascript的变量类型分为两套类型系统：基本类型和对象类型衍生出来的对象类型系统。<br>基本类型包括：undefined，number，boolean，string，object，function，他们之前通过typeof的返回值来区分。<br>第二套对象类型系统是由第一套系统衍生发展而来的，例如前面提到的Array，还有Null，Number，Boolean等等，对象类型可以通过<strong>instanceof</strong>来判断。<br>那么对象类型中的Number和基本类型中的number又是什么关系呢？他们又是什么区别呢？<br>答案就是，他们是映射关系，即下例：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> a = <span class="keyword">new</span> Number(<span class="number">123</span>);
console.log(a.valueOf()===<span class="number">123</span>);<span class="comment">//true</span>
<span class="keyword">var</span> b = <span class="keyword">new</span> String(<span class="number">123</span>);
console.log(b.valueOf()===<span class="number">123</span>);<span class="comment">//false</span>
console.log(b.valueOf()===<span class="string">'123'</span>);<span class="comment">//true</span>
</pre></td></tr></table></figure>

<p>obj.valueOf()返回的是该对象的原始值。</p>
<h2>值类型和引用类型</h2>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/08/11/javascript变量类型/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/08/05/ie的fireevent方法/">IE的fireEvent方法</a></h1>
  

      <time datetime="2011-08-04T19:51:20.000Z"><a href="/2011/08/05/ie的fireevent方法/">2011年8月5日</a></time>
    </header>
    <div class="entry">
      
        <p>在IE中提供了一个<strong>fireEvent</strong>方法，顾名思义就是触发某个事件发生的意思。刚开始我以为是会跟平时使用<code>onclick()</code>一样，没想到最近在写javascript入门ppt的时候发现了，原来自己太自以为是了！看来还有很多javascript的细节没有掌握好啊！</p>
<p>现在根据自己的总结详细的记录下fireEvent方法的使用。fireEvent是IE提供的一种方法，msdn文档地址：<a href="http://msdn.microsoft.com/en-us/library/ms536423(v=vs.85).aspx" target="_blank">http://msdn.microsoft.com/en-us/library/ms536423(v=vs.85).aspx</a></p>
<h3>onclick()</h3>
<p>我们先看第一段实例代码：</p>
<pre lang="html">

*   i am one;
*   i am two;
*   i am three;
<button onclick='document.getElementById("id1").onclick();'>click me!</button>
</pre>
这段代码中我们没有个id1的li添加onclick事件，点击button，会报错，提示“对象不支持此属性或方法”。由此可见，DOM.onclick()需要添加onclick事件之后才能使用。

假如我们把以上的代码修改为：
<pre lang="html">

*   i am one;
*   i am two;
*   i am three;
<button onclick='document.getElementById("id1").onclick();'>click me!</button>
</pre>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/08/05/ie的fireevent方法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/08/03/javascript匿名函数/">javascript匿名函数</a></h1>
  

      <time datetime="2011-08-02T21:47:48.000Z"><a href="/2011/08/03/javascript匿名函数/">2011年8月3日</a></time>
    </header>
    <div class="entry">
      
        <p>今天在整理javascript入门培训的PPT时，提到了<strong>匿名函数</strong>，所以拿来分享下心得。</p>
<h3>匿名函数的写法</h3>
<p>顾名思义，就是没有名字的函数（⊙﹏⊙b汗）。匿名函数通常用于javascript作用域的控制，可以有效的避免对全局变量的污染。常见的匿名函数有下面四种写法，欢迎补充：</p>
<h4>匿名函数写法一</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
(<span class="keyword">function</span>(){
	<span class="comment">//do something</span>
})();
</pre></td></tr></table></figure>

<h4>匿名函数写法二</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
!<span class="keyword">function</span>(){
	<span class="comment">//do something</span>
}();
</pre></td></tr></table></figure>

<p>上面!还可以写成+，!!等多种方式。<br>上面两种方法是我常用的，下面两种方法是google上找的，我没用过（好吧，我out啦）。</p>
<h4>匿名函数写法三</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
(<span class="keyword">function</span>(){
	<span class="comment">//do something</span>
}());
</pre></td></tr></table></figure>

<h4>匿名函数写法四</h4>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="keyword">void</span> <span class="keyword">function</span>(){
	<span class="comment">//do something</span>
}();
</pre></td></tr></table></figure>

<p>刚才微博上@朴灵 提出来：写法三比较安全，正如网友@Rain的留言，匿名函数上面的写法都存在前后文;问题，所以需要注意的是匿名函数在压缩工具打包压缩后会出现上下文错误合并()的问题，例如第一种写法，如果下面的代码，未压缩之前是正常的，压缩后就不正常了，所以要严格上下文的;问题，而第三种就不会出现类似问题：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
<span class="keyword">var</span> a = <span class="keyword">function</span>(){}
(<span class="keyword">function</span>(){
	alert(<span class="number">1</span>);
})();
</pre></td></tr></table></figure>

<p>上例中就出现了错误，这就是因为a函数会把他后面的匿名函数作为参数传入a中，这也就解释了为什么有人习惯在匿名函数之前添加;了，就是为了防止上文没有严格遵循javascript语法，漏掉;的问题。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/08/03/javascript匿名函数/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/07/20/ie6中a标签location-href失效解决方法/">IE6中a标签location.href失效解决方法</a></h1>
  

      <time datetime="2011-07-19T23:00:51.000Z"><a href="/2011/07/20/ie6中a标签location-href失效解决方法/">2011年7月20日</a></time>
    </header>
    <div class="entry">
      
        <p>今天遇见IE6一个<strong>location.href</strong>的bug，具体情况是这样的，IE6下，在a标签中，将href写成<code>javascript:;``javascript:void(0);</code>，并且给这个标签绑定onclick事件，点击后，执行location.href实现页面跳转，例如下面的代码：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>[点击跳转](javascitp:;)
</pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
[点击跳转](javascitp:void(0);)
</pre></td></tr></table></figure>

<p>toURL函数的代码如下所示：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">toURL</span><span class="params">()</span>{</span>
	location.href = <span class="string">"http://js8.in"</span>;
}
</pre></td></tr></table></figure>

<p>这样在非IE6浏览器下都可以使用，但是在IE6下就是跳转不了，而且不报错，在location.href之后的代码，例如（alert(1);）也是执行的。</p>
<h3>IE6下location.href失效解决的方法</h3>
<p>解决IE6中a标签中location.href失效的方式就是a标签中的href不用使用<code>javascript:;</code>或<code>javascript:void(0);</code>。具体原因还不清楚，不过我们可以使用href=“#”来代替。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/07/20/ie6中a标签location-href失效解决方法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/07/13/javascript事件：获取事件对象getevent函数/">javascript事件：获取事件对象getEvent函数</a></h1>
  

      <time datetime="2011-07-12T20:11:59.000Z"><a href="/2011/07/13/javascript事件：获取事件对象getevent函数/">2011年7月13日</a></time>
    </header>
    <div class="entry">
      
        <p>在<strong>javascript</strong>开发中我们会经常获取页面中的事件对象，然后来处理这些事件，例如下面的<strong>getEvent</strong>函数就是获取javascript下的页面事件对象。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">getEvent</span><span class="params">(event)</span>{</span>
	<span class="keyword">return</span> event || window.event;
}
</pre></td></tr></table></figure>

<p>我们使用getEvent的时候可以这样调用。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(event)</span>{</span>
	<span class="keyword">var</span> evt = getEvent(event);
	alert(evt);
}
</pre></td></tr></table></figure>

<p>并且把foo函数绑定到一个onclick事件上。<br>但是常用的是foo函数不会有参数，或者第一个参数没有传入，我们可以通过<code>arguments[0]</code>来获取第一个参数。<br>在IE中event是一个全局变量，即<code>window.event</code>，而在Firefox等浏览器，事件会作为第一个参数传入foo函数，所以getEvent可以改为：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">getEvent</span><span class="params">(event)</span>{</span>
	<span class="keyword">return</span> arguments[<span class="number">0</span>] || window.event;
}
</pre></td></tr></table></figure>

<p>这时在一些版本的浏览器，例如Firefox 中会出现获取不到event对象的问题，其实我们可以看成事件的触发是下面的方式：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">onclick</span><span class="params">(event)</span> {</span>
    foo();
}
</pre></td></tr></table></figure>

<p>这样，第一个函数是onclick，即event会默认作为第一个参数传入，而foo函数没有将event作为参数传入，这样严重限制了getEvent的灵活性，所以我们需要修改下<strong>getEvent</strong>函数。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/07/13/javascript事件：获取事件对象getevent函数/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/07/07/新浪微博jssdk操作指南/">新浪微博jsSDK操作指南</a></h1>
  

      <time datetime="2011-07-07T12:32:41.000Z"><a href="/2011/07/07/新浪微博jssdk操作指南/">2011年7月7日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>新浪微博</strong>的开放平台提供了<strong>jsSDK</strong>的方法，但是很多人反映不会使用，这里最关键的一点是不会放跨域文件。<br>的确，我也承认开放平台的开发文档写的不是很详细，比如对于一些接口是使用REST的，要人云里雾里，而对于REST的介绍却很隐晦，我也是尝试了几次才找到的方法（例如删除微博接口）。<br>下面简单说说jsSDK的操作。</p>
<h3>放置跨域文件</h3>
<p>为了实现跨域请求api的接口，我们需要在自己的域名下放置一个xd.html的文件，这个文件可以理解成在你网站做代理的，通过它才可以请求道api.t.sina.com.cn的内容。感兴趣的童靴可以研究下这种跨域的实现方式，国内的人人、腾讯，国外的facebook都是这种跨域方式。</p>
<p>基本原理是通过html5的postMessage和window.name来实现跨域。其实如果进一步研究是完全可以不要这个跨域文件的！相信下一个版本的JSSDK不会出现跨域文件来误导大家。<br><strong>跨域文件</strong>放置要点</p>
<ol>
<li>放置来应用的同域名下，例如你的应用网址是js8.in，则你的xd.html文件就要放在js8.in域名下</li>
<li>不一定是根目录下，因为可以通过jsSDK中的<code>xdpath</code>来传入xd.html路径，默认是根目录，即js8.in/xd.html
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/07/07/新浪微博jssdk操作指南/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/06/20/javascript继承的写法/">javascript继承的写法</a></h1>
  

      <time datetime="2011-06-19T20:38:21.000Z"><a href="/2011/06/20/javascript继承的写法/">2011年6月20日</a></time>
    </header>
    <div class="entry">
      
        <p>严格来说<strong>javascript</strong>是基于对象而不是面向对象的语言，因为javascript没有像java语言那么丰富的类、继承、封装，但是javascript是基于原型（prototype）的面向对象开发，是一种动态、弱类型、基于原型的语言。前几天看了阿里UED的《重温<strong>javascript继承</strong>机制》，今天重新看了，很有感触，特地转载了重要的部分，记录一下，下次有需要的时候还要重新看一下！的确是不错的一篇文章。</p>
<h3>继承的演变</h3>
<h4>1、采用new关键字生成实例</h4>
<p>处理表单验证这样简单功能脚本语言显然是不需要”继承”机制的，然而如果Javascript里面都是对象，就需要有一种办法来把所有对象联系起来。最后，Brendan Eich还是设计了”继承”。只是，他并没有引入”类”（class）的概念，因为一旦有了”类”，Javascript就是一种完整的面向对象编程语言了，<br>这好像有点太正式了，与设计初衷也远了，同时增加了初学者的入门难度。<br>参照到C++和Java语言都使用new命令来生成实例：</p>
<p>C++这样写：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
&gt; ClassName *object = <span class="keyword">new</span> ClassName(param);
</pre></td></tr></table></figure>

</blockquote>
<p>Java这样写：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
&gt; Foo foo = <span class="keyword">new</span> Foo();
</pre></td></tr></table></figure>

</blockquote>
<p>那么，也可以把new命令引入了Javascript，用来从原型对象生成一个实例对象。但是，<strong>Javascript</strong>中没有”类”的话，怎样表示原型对象呢？<br>依然是参照C++和Java使用new命令时，都会调用”类”的构造函数（constructor）。Brendan Eich简化了设计，在Javascript语言中，new命令后面跟的是构造函数，不再是类。<br>我们举个例子来说，现在有一个叫做WD构造函数，表示前端开发（web-developper）对象的原型。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">WD</span><span class="params">(skill)</span>{</span>
&gt; 	<span class="keyword">this</span>.skill = skill;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>对这个构造函数使用new关键字，就会生成一个前端开发对象的实例。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>
&gt; <span class="keyword">var</span> WD1 = <span class="keyword">new</span> WD(<span class="string">'html'</span>);
&gt; console.log(WD1.skill); <span class="comment">// html</span>
</pre></td></tr></table></figure>

</blockquote>
<p>在构造函数中的this关键字，它其实代表的是新创建的实例对象。</p>
<h4>2、new 出来对象的缺陷</h4>
<p>采用new关键字，用构造函数生成实例对象无法共享属性和方法。<br>比如，在WD对象的构造函数中，设置一个实例对象的共有属性skill。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">WD</span><span class="params">(skill)</span>{</span>
&gt; 	<span class="keyword">this</span>.skill = skill;
&gt; 	<span class="keyword">this</span>.sex = <span class="string">'男'</span>;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>然后，生成两个实例对象：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>
&gt; <span class="keyword">var</span> WD1 = <span class="keyword">new</span> WD(<span class="string">'html'</span>);
&gt; <span class="keyword">var</span> WD2 = <span class="keyword">new</span> WD(<span class="string">'css'</span>);
</pre></td></tr></table></figure>

</blockquote>
<p>这两个对象的skill属性是独立的，修改其中一个，不会影响到另一个。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>
&gt; WD1.skill= <span class="string">'Javascript'</span>;
&gt; console.log(WD2.skill);<span class="comment">//“css”，不受WD1的影响</span>
</pre></td></tr></table></figure>

</blockquote>
<p>每一个实例对象，都有自己的属性和方法的副本。这不仅无法做到数据共享，也是极大的资源浪费。</p>
<h4>3、引入prototype属性</h4>
<p>为了实现属性和方法的共享，Brendan Eich决定为构造函数设置一个prototype属性。<br>这个属性包含一个对象（以下简称”prototype对象”），所有实例对象需要共享的属性和方法，都放在这个对象里面；那些不需要共享的属性和方法，就放在构造函数里面。<br>实例对象一旦创建，将自动引用prototype对象的属性和方法。也就是说，实例对象的属性和方法，分成两种，一种是本地的，另一种是引用的。<br>还是以WD构造函数为例，现在用prototype属性进行改写：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">WD</span><span class="params">(skill)</span>{</span>
&gt; 	<span class="keyword">this</span>.skill = skill;
&gt; }
&gt; 
&gt; WD.prototype = { sex : <span class="string">'男'</span> };
&gt; 
&gt; <span class="keyword">var</span> WD1 = <span class="keyword">new</span> WD(<span class="string">'html'</span>);
&gt; <span class="keyword">var</span> WD2 = <span class="keyword">new</span> WD(<span class="string">'css'</span>);
&gt; 
&gt; console.log(WD1.sex); <span class="comment">// 男</span>
&gt; console.log(WD2.sex); <span class="comment">// 男</span>
</pre></td></tr></table></figure>

</blockquote>
<p>现在，sex属性放在prototype对象里，是两个实例对象共享的。只要修改了prototype对象，就会同时影响到两个实例对象。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
&gt; WD.prototype.sex = <span class="string">'女'</span>;
&gt; console.log(WD1.sex); <span class="comment">//女</span>
&gt; console.log(WD2.sex); <span class="comment">// 女</span>
</pre></td></tr></table></figure>

</blockquote>
<p>由于所有的实例对象共享同一个prototype对象，那么从外界看起来，prototype对象就好像是实例对象的原型，而实例对象则好像”继承”了prototype对象一样。这就是Javascript继承机制的设计思想。</p>
<h3>三、构造函数如何实现继承</h3>
<p>现在有一个”MED”对象的构造函数（MED:Marketing Experience Design,营销体验设计）</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">MED</span><span class="params">()</span>{</span>
&gt; 	<span class="keyword">this</span>.aim = <span class="string">"营销体验设计"</span>;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>依然是”WD”对象的构造函数，</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
&gt; <span class="function"><span class="keyword">function</span> <span class="title">WD</span><span class="params">(skill,sex)</span>{</span>
&gt; 	<span class="keyword">this</span>.skill = skill;
&gt; 	<span class="keyword">this</span>.sex = sex;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>怎样才能使”WD”继承”MED”呢？<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/06/20/javascript继承的写法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/05/20/nodelist集合跟array数组的区别/">NodeList集合跟Array数组的区别</a></h1>
  

      <time datetime="2011-05-20T09:27:16.000Z"><a href="/2011/05/20/nodelist集合跟array数组的区别/">2011年5月20日</a></time>
    </header>
    <div class="entry">
      
        <p>首先来看看什么是<strong>NodeList</strong>，NodeList跟arguments都不是普通的数组，他们有数组的一些基本属性但是又不完全是数组。下面是在<a href="https://developer.mozilla.org/En/DOM/NodeList" target="_blank">Mozilla</a>上面找到的定义：</p>
<blockquote>
<p>This is a commonly used type which is a collection of nodes returned by getElementsByTagName, getElementsByTagNameNS, and Node.childNodes. The list is live, so changes to it internally or externally will cause the items they reference to be updated as well. Unlike NamedNodeMap, NodeList maintains a particular order (document order). The nodes in a NodeList are indexed starting with zero, similarly to JavaScript arrays, but a NodeList is not an array.<br>由字面意思来看<strong>NodeList</strong>是DOM操作（getElementsByTagName等）取出来的集合，是集合而不是普通的数组，但是他们有数组的一些属性，例如length、下标索引，但是他们也有自己的属性，例如item，另外NodeList最大的特点就是时效性（live）。</p>
</blockquote>
<h3>NodeList的时效性</h3>
<p>我们来看下面的代码：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>

*   index0
*   index1
*   index2
*   index3
*   index4
</pre></td></tr></table></figure>

<p>javascript代码如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>
<span class="keyword">var</span> myUl = document.getElementById(<span class="string">'nodelist'</span>);
<span class="keyword">var</span> lis = myUl.getElementsByTagName(<span class="string">'li'</span>);
</pre></td></tr></table></figure>

<p>lis是一个NodeList集合，具有时效性，所谓的时效性就是我们在修改li的同时，会反映到lis上来，这与array是不同的，例如我们把第一个li插入到ul的底部，那么lis也会发生相应的变化：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="comment">//把第一个li插入的ul的底部</span>
myUl.appendChild(myUl.getElementsByTagName(<span class="string">'li'</span>).item(<span class="number">0</span>));
console.log(lis[<span class="number">0</span>]);<span class="comment">//输出的是原来ul的第二个li</span>
</pre></td></tr></table></figure>

<p>所以我们应该在写代码的时候注意<strong>NodeList</strong>的时效性，不然就会犯一些错误，
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/05/20/nodelist集合跟array数组的区别/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/05/13/ie6下javascript不能隐藏select标签的bug/">IE6下javascript不能隐藏select标签的bug</a></h1>
  

      <time datetime="2011-05-13T15:50:57.000Z"><a href="/2011/05/13/ie6下javascript不能隐藏select标签的bug/">2011年5月13日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天做了一个简单的项目，要求有三级联动的select菜单，可是伤不起的IE6下就出现了<strong>不能隐藏select</strong>的bug，之前我也介绍过IE6下select层高的问题，可以通过隐藏select或者<a href="http://js8.in/553.html" title="解决IE6 select z-index无效，遮挡div的bug">使用iframe遮挡</a>的方式来解决，今天的bug不同以前，大家如果在用js控制select显示隐藏的时候可能会经常遇到，调试一下午终于找到了解决的方案，特此记录一下。</p>
<h3>IE6不能隐藏select重现代码</h3>
<p>建立两个关联的select，通过javascript控制第一个select 发生变化后，第二个select根据第一个value重新添加options，如果为空则隐藏第二个select（示例中判断除第一个之外都隐藏），则由第一个select的第三个value切换到第二个value则第二个select就不会隐藏。<br>具体效果见下面的实例：</p>
<p><a href="//js8.in/mywork/ie6selectbug.html">IE6 select隐藏bug</a></p>
<h3>IE6下不能隐藏select标签解决方案</h3>
<ol>
<li>可以通过先设置select为显示，后设置为none的方式</li>
<li>通过给select添加class来控制显示<br>具体方法，见示例代码源码注释的地方。</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/04/26/转利用跨域资源共享（cors）实现ajax跨域调用/">[转]利用跨域资源共享（CORS）实现ajax跨域调用</a></h1>
  

      <time datetime="2011-04-25T18:18:45.000Z"><a href="/2011/04/26/转利用跨域资源共享（cors）实现ajax跨域调用/">2011年4月26日</a></time>
    </header>
    <div class="entry">
      
        <p>前几天看了一篇E文说部署<strong>CORS</strong>的<a href="http://feedproxy.google.com/~r/remysharp/~3/b5_CQ7MoWNU/" target="_blank">文章</a>，CORS是一中跨域的方式，于是上网找了下Nicholas C. Zakas 的文章《<a href="http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/" target="_blank">Cross-domain Ajax with Cross-Origin Resource Sharing</a>》，并且找到了中文的翻译，感觉不错，转来分享之。</p>
<p>几年前，网站开发者都因为ajax的<a href="https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript" target="_blank">同源策略</a>而撞了南墙。当我们惊叹于XMLHttpRequest对象跨浏览器支持所带来的巨大进步时，我们很快发现没有一个方法可以使我们用<strong>JavaScript实现请求跨域</strong>访问，对此我们哀叹不已。每个人在他们自己的网站上建立代理（which was the onset of a new host of open redirect problems）来摆脱这种限制。虽然开发者利用服务器代理和其它技巧避开了这种限制，而在社区的抗议者允许ajax在本地跨域调用。许多人还没意识到当前几乎所有的浏览器（Internet Explorer 8+， Firefox 3.5+， Safari 4+和 Chrome）都可通过名为<strong>Cross-Origin Resource Sharing</strong>的协议支持ajax跨域调用。</p>
<h3>跨域资源共享（CORS）</h3>
<p><a href="http://www.w3.org/TR/access-control/" target="_blank">Cross-Origin Resource Sharing</a> (<strong>CORS</strong>)是W3c工作草案，它定义了在跨域访问资源时浏览器和服务器之间如何通信。CORS背后的基本思想是使用自定义的HTTP头部允许浏览器和服务器相互了解对方，从而决定请求或响应成功与否。</p>
<p>对一个简单的请求，没有自定义头部，要么使用GET，要么使用POST，它的主体是text/plain,请求用一个名叫Orgin的额外的头部发送。Origin头部包含请求页面的头部（协议，域名，端口），这样服务器可以很容易的决定它是否应该提供响应。</p>
<blockquote>
<p>Origin: <a href="http://www.nczonline.net" target="_blank">http://www.nczonline.net</a></p>
</blockquote>
<p>如果服务器确定请求被通过，它将发送一个Access-Control-Allow-Origin头部响应发送请求的同一个源，如果是一个公共资源，则返回“*”。如：</p>
<blockquote>
<p>Access-Control-Allow-Origin: <a href="http://www.nczonline.net" target="_blank">http://www.nczonline.net</a><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/04/26/转利用跨域资源共享（cors）实现ajax跨域调用/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/04/22/使用javascript将xml解析为json/">使用javascript将XML解析为JSON</a></h1>
  

      <time datetime="2011-04-22T08:18:17.000Z"><a href="/2011/04/22/使用javascript将xml解析为json/">2011年4月22日</a></time>
    </header>
    <div class="entry">
      
        <p>今天看了<a href="http://davidwalsh.name/" target="_blank">David Walsh</a>一篇把XML格式转换为JSON格式的文章，感觉不错，简单的转载了过来。<br>下面是神奇的<strong>XML转JSON</strong>的javascript代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre>
	<span class="comment">// Changes XML to JSON</span>
<span class="function"><span class="keyword">function</span> <span class="title">xmlToJson</span><span class="params">(xml)</span> {</span>

	<span class="comment">// Create the return object</span>
	<span class="keyword">var</span> obj = {};

	<span class="keyword">if</span> (xml.nodeType == <span class="number">1</span>) { <span class="comment">// element</span>
		<span class="comment">// do attributes</span>
		<span class="keyword">if</span> (xml.attributes.length &gt; <span class="number">0</span>) {
		obj[<span class="string">"@attributes"</span>] = {};
			<span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; xml.attributes.length; j++) {
				<span class="keyword">var</span> attribute = xml.attributes.item(j);
				obj[<span class="string">"@attributes"</span>][attribute.nodeName] = attribute.nodeValue;
			}
		}
	} <span class="keyword">else</span> <span class="keyword">if</span> (xml.nodeType == <span class="number">3</span>) { <span class="comment">// text</span>
		obj = xml.nodeValue;
	}

	<span class="comment">// do children</span>
	<span class="keyword">if</span> (xml.hasChildNodes()) {
		<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; xml.childNodes.length; i++) {
			<span class="keyword">var</span> item = xml.childNodes.item(i);
			<span class="keyword">var</span> nodeName = item.nodeName;
			<span class="keyword">if</span> (<span class="keyword">typeof</span>(obj[nodeName]) == <span class="string">"undefined"</span>) {
				obj[nodeName] = xmlToJson(item);
			} <span class="keyword">else</span> {
				<span class="keyword">if</span> (<span class="keyword">typeof</span>(obj[nodeName].length) == <span class="string">"undefined"</span>) {
					<span class="keyword">var</span> old = obj[nodeName];
					obj[nodeName] = [];
					obj[nodeName].push(old);
				}
				obj[nodeName].push(xmlToJson(item));
			}
		}
	}
	<span class="keyword">return</span> obj;
};
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/04/22/使用javascript将xml解析为json/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/04/21/一道js正则笔试题/">一道js正则笔试题</a></h1>
  

      <time datetime="2011-04-20T22:12:51.000Z"><a href="/2011/04/21/一道js正则笔试题/">2011年4月21日</a></time>
    </header>
    <div class="entry">
      
        <h3>写在前面</h3>
<p>终于找到工作了，现在在新浪微博工作，谢谢这段时间来帮我找工作的朋友。北京的生活的确压力很大，最起码心累，自己慢慢适应就好了。</p>
<p>不得不提的是拆那ZF的办事效率，我回家转户口，青岛老家来回跑了三四天，竟然还是没有给我搞定，最后说青岛户口已经起出来了，老家还要等十五天之后才可以看到结果，然后才能给我落户口！难道ZF的技术就那么差劲啊！数据库还是不统一的，还是故意要老百姓多跑几次，以调动内需？哎……</p>
<h3>一道javascript正则笔试题目</h3>
<p>在笔试的时候碰到了一道<strong>正则</strong>的题目，自己不会，后来查了很多资料也没找到，经过在Qwrap的QQ群里提问终于明白了是什么回事，特地记录一下。原题大致如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> a = <span class="keyword">new</span> RegExp(<span class="string">"123"</span>,<span class="string">"g"</span>);
<span class="keyword">var</span> b = <span class="string">"abc#123"</span>;

console.log(a.test(b));<span class="comment">//true</span>
console.log(a.test(b));<span class="comment">//false</span>
console.log(a.test(b));<span class="comment">//true</span>
console.log(a.test(b));<span class="comment">//false</span>
</pre></td></tr></table></figure>

<p>问为什么会输出<code>true</code>，<code>false</code>，<code>true</code>，<code>false</code>？<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/04/21/一道js正则笔试题/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/20/最短的domready代码/">最短的DOMReady代码</a></h1>
  

      <time datetime="2011-03-20T09:39:31.000Z"><a href="/2011/03/20/最短的domready代码/">2011年3月20日</a></time>
    </header>
    <div class="entry">
      
        <p>自己的<a href="http://js8.in/677.html" title="一个轻量级的js框架">js框架YQ</a>还没有添加<strong>DOMReady</strong>代码，今天看到国外js牛人Dustin Diaz的<a href="http://dustindiaz.com/smallest-domready-ever" target="_blank">文章</a>，得到了一份最短的DOMReady代码，分享出来：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">r</span><span class="params">(f)</span>{</span>/<span class="keyword">in</span>/.test(document.readyState)?setTimeout(<span class="string">'r('</span>+f+<span class="string">')'</span>,<span class="number">9</span>):f()}
</pre></td></tr></table></figure>

<p>Dustin Diaz放弃了使用IE的<code>document.documentElement.doScroll(&#39;left&#39;)</code>（这也是多数框架的方法，<a href="http://javascript.nwbox.com/IEContentLoaded/" target="_blank">详细介绍</a>）。使用了setTimeout来定时检测<code>document.readyState</code>，<code>document.readyState</code>有以下五种状态：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/20/最短的domready代码/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/">WinHttp.WinHttpRequest.5.1—可以用作抓取的msxml 4.0底层对象</a></h1>
  

      <time datetime="2011-03-17T13:10:00.000Z"><a href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/">2011年3月17日</a></time>
    </header>
    <div class="entry">
      
        <p>前些日子在博客园上看到的一篇文章（现在搜索不到了，尽转载的），介绍了下WinHttp.WinHttpRequest.5.1。自己也查了一些资料，写了个vbscript脚本，来添加<a href="http://js8.in/634.html" title="Sina App Engine开发实例：天气预报的定时短信（二）">新浪微博</a>好友。<strong>WinHttp.WinHttpRequest</strong>的介绍可以去微软官方查看，也有个介绍的网站：<a href="http://www.neilstuff.com/winhttp/。感兴趣的可以移步去围观一下。" target="_blank">http://www.neilstuff.com/winhttp/。感兴趣的可以移步去围观一下。</a></p>
<p>简单看一下我改的博客园文章的代码，用于新浪微博自动添加好友，因为是前些日子写的。<a href="http://js8.in/resume.html" title="_blank">申请离职</a>之后，害怕自己的以前的一些代码丢失，特发到网上来备案一下。简单解释在代码中，加上之前的php的<a href="http://js8.in/379.html">curl函数</a>，WinHttp.WinHttpRequest.5.1应该对以后一些研究会有帮助。而且WinHttp.WinHttpRequest也可以设置refer，cookie，user-agent，proxy……，关键是他可以在cmd里面跑，感觉比较酷（当然php也可以做到，但是不熟悉php的可以用js写出来代替curl）。不废话了，直接上代码。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="code"><pre>
<span class="function"><span class="keyword">function</span> <span class="title">RemoteCall</span><span class="params">(method, url, param, header)</span>{</span>  
    <span class="keyword">var</span> obj = <span class="keyword">new</span> ActiveXObject(<span class="string">"WinHttp.WinHttpRequest.5.1"</span>);  
    obj.Open(method||<span class="string">"GET"</span>, url, <span class="literal">false</span>);  
    obj.Option(<span class="number">4</span>) = <span class="number">13056</span>;  
    obj.Option(<span class="number">6</span>) = <span class="literal">false</span>;  
    obj.setRequestHeader(<span class="string">"Cookie"</span>, <span class="string">"string"</span>);<span class="comment">//先设置一个cookie，防止出错，见官方文档</span>
    obj.setRequestHeader(<span class="string">"Cookie"</span>,<span class="string">"你的新浪微博cookie"</span>);
    obj.setRequestHeader(<span class="string">"Host"</span>,<span class="string">"t.sina.com.cn"</span>);
    obj.setRequestHeader(<span class="string">"Accept"</span>,<span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"</span>);
    obj.setRequestHeader(<span class="string">"User-Agent"</span>,<span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 QQDownload/1.7 FirePHP/0.5"</span>);
    obj.Send(param);  
    <span class="keyword">return</span> obj;  
}
<span class="function"><span class="keyword">function</span> <span class="title">post</span><span class="params">(url,param)</span>{</span>
    <span class="keyword">var</span> obj = <span class="keyword">new</span> ActiveXObject(<span class="string">"WinHttp.WinHttpRequest.5.1"</span>);  
    obj.Open(<span class="string">"POST"</span>, url, <span class="literal">false</span>);  
    obj.Option(<span class="number">4</span>) = <span class="number">13056</span>;  
    obj.Option(<span class="number">6</span>) = <span class="literal">false</span>;  
    obj.setRequestHeader(<span class="string">"Cookie"</span>, <span class="string">"string"</span>);
    obj.setRequestHeader(<span class="string">"Cookie"</span>,<span class="string">"你的新浪微博cookie"</span>);
    obj.setRequestHeader(<span class="string">"Host"</span>,<span class="string">"t.sina.com.cn"</span>);
    obj.setRequestHeader(<span class="string">"Content-Type"</span>,<span class="string">"application/x-www-form-urlencoded; charset=UTF-8"</span>);
    obj.setRequestHeader(<span class="string">"Accept"</span>,<span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"</span>);
    obj.setRequestHeader(<span class="string">"User-Agent"</span>,<span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 QQDownload/1.7 FirePHP/0.5"</span>);
    obj.Send(param);  
    <span class="keyword">return</span> obj; 
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/17/winhttp-winhttprequest-5-1—可以用作抓取的msxml-4-0底层对象/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/15/html5css3版的爱墙上了/">html5+css3版的爱墙上了</a></h1>
  

      <time datetime="2011-03-15T13:15:27.000Z"><a href="/2011/03/15/html5css3版的爱墙上了/">2011年3月15日</a></time>
    </header>
    <div class="entry">
      
        <p>趁着中午休息，发篇文章。不管怎样，从周末开始折腾重构爱墙昨天上了（地址：<a href="http://lovewall.js8.in" title="爱墙" target="_blank"><a href="http://lovewall.js8.in">http://lovewall.js8.in</a></a>，老版：<a href="http://love.js8.in" target="_blank"><a href="http://love.js8.in">http://love.js8.in</a></a>），昨天由于局域网的DNS没有更新，所以也没访问，今天看了下还算比较正常，就是空间速度有点挫，国外的，你懂的！</p>
<p>新版爱墙程序变化：</p>
<ol>
<li>程序全部重构，php采用公司同事开发的<a href="http://raremvc.sinaapp.com" target="_blank">rareMVC框架</a></li>
<li>前端重写，采用html5+css3，所以推荐使用chrome或者FF3.6+体验</li>
<li>javascript代码全部重写，采用了自己的简单框架YQ（<a href="http://js8.in/677.html">暂命名</a>）</li>
<li><p>添加表情功能<br>为啥重构爱墙？：</p>
</li>
<li><p>熟悉php面向对象开发，MVC开发</p>
</li>
<li>实践html5+css3</li>
<li>测试自己的框架YQ（<a href="http://js8.in/js/yq.js">源码</a>）</li>
<li>打发周末时间<br>这个版本的爱墙程序兼容IE6+，chrome，Firefox，主要是练手用的，不再继续维护开发。此程序前端代码全部未压缩处理，欢迎观摩指导</li>
</ol>
<p>ps：今天看了下浏览记录，发现谷歌搜索“jsonp”我的一篇文章竟然排了第一，甚是欣慰~O(∩_∩)O哈哈~</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/14/转变代码思路：js浏览器判断方法/">转变代码思路：js浏览器判断方法</a></h1>
  

      <time datetime="2011-03-14T13:04:05.000Z"><a href="/2011/03/14/转变代码思路：js浏览器判断方法/">2011年3月14日</a></time>
    </header>
    <div class="entry">
      
        <p>“变则通，通则达”，在coding的时候也要做到，有时候思路往往太过于局限性，对<strong>浏览器判断</strong>方法的实例，来说说代码思路的转变。</p>
<h3>navigator.userAgent分析</h3>
<p>关于<strong>javascript</strong>对浏览器的判断，很早之前我写过一篇文章《js判断浏览器的函数，可区分chrome，safari\》。</p>
<p>YQ框架中也是采用的这个方法，可是后来想到了有位网友说判断火狐的版本号会错误，这是因为火狐的version的判断走了正则，而没有考虑到firefox的，其实不止firefox有这个bug。</p>
<p>首先来看看火狐的<code>navigator.userAgent</code>:<br>这个是我的firefox（3.6.15，却显示3.6.8，不知何解，查看关于也是这个问题：版本不统一）</p>
<blockquote>
<p>Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 QQDownload/1.7</p>
</blockquote>
<p>根据正则的写法，火狐的版本号应该这样写<code>/Firefox[\/]([\w.]+)/</code><br>而safari的确是类似的：</p>
<blockquote>
<p>……Version/3.1 Safari/525.13</p>
</blockquote>
<p>其中Version为实际的版本号，也是我们常称呼的版本号。</p>
<h3>琢磨</h3>
<p>开始写js判断浏览器的，跟jQuery的<strong>$.browser</strong>一样，可是版本号会出现问题，只不过是加了个chrome判断而已。开始想解决方法，初步想得是通过一个正则对象把浏览器的名称和版本号统一匹配出来，正则对象设置如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="keyword">var</span> browserRegExp = {
    ie:<span class="regexp">/(msie)[ ]([\w.]+)/</span>,
    firefox:<span class="regexp">/(firefox)[ |\/]([\w.]+)/</span>,
    chrome:<span class="regexp">/(chrome)[ |\/]([\w.]+)/</span>,
    safari:<span class="regexp">/version[ |\/]([\w.]+)[ ](safari)/</span>,
    opera:<span class="regexp">/(opera)[ |\/]([\w.]+)/</span>
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/14/转变代码思路：js浏览器判断方法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/">自己写的一个轻量级javascript框架的设计模式</a></h1>
  

      <time datetime="2011-03-13T17:15:39.000Z"><a href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/">2011年3月14日</a></time>
    </header>
    <div class="entry">
      
        <p>公司一直使用jQuery框架，一些小的项目还是觉得jQuery框架太过于强大了，于是自己周末有空琢磨着写个自己的框架。谈到js的设计模式，不得不说说js的类继承机制，javascript不同于PHP可以轻松的实现类继承，不过javascript的类继承方法还是有的，常见的有构建函数、原型扩展、综合……，也有一些专门写类的函数，例如jQuery的作者有个类继承函数。关于类继承写法可以简单看看<a href="http://kevlindev.com/tutorials/javascript/inheritance/index.htm" target="_blank">这篇文章</a>。</p>
<p>我自己写的框架也不知道叫什么名字，刚开始写的时候随手写了个W（姓拼音，之前写过jQuery弹出框插件<a href="http://js8.in/wbox-jquery">wBox</a>），现在写这篇文章重新整理了一下思想，换了YQ（名字拼音，你懂的~）。</p>
<h3>核心代码</h3>
<p>框架设计的时候尽量做到了支持链式写法，也就是返回<code>this</code>，可以$(selector).handler1().handler2()……无限写下去，只要不是有返回值的就可以继续。包括了event，dom，css，还有fadeIn，fadeOut动画（因为再重构<a href="http://love.js8.in" target="_blank">爱墙</a>[html5+css3]版，所有顺手加上了这个功能）。如果配合sizzle选择器就更牛了！</p>
<p>下面说说框架的核心代码，等完善了之后跟新版html5爱墙一起放出，主要的代码如下：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/14/自己写的一个轻量级javascript框架的设计模式/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/03/03/如何写出高质量的javascript代码/">如何写出高质量的Javascript代码</a></h1>
  

      <time datetime="2011-03-03T08:22:42.000Z"><a href="/2011/03/03/如何写出高质量的javascript代码/">2011年3月3日</a></time>
    </header>
    <div class="entry">
      
        <p>优秀的Stoyan Stefanov在他的新书中（《<strong>Javascript</strong> Patterns》）介绍了很多编写高质量代码的技巧，比如避免使用全局变量，使用单一的var关键字，循环式预存长度等等。</p>
<p>这篇文章不仅仅从代码本身来考虑如何优化编码，也从代码的设计阶段来考虑，包括书写API文档，同事的review，使用JSLint。这些习惯都能帮助你编写更加<strong>高质量</strong>的、更易于理解的、可维护的代码（让你的代码在多年之后仍使你引以为傲）。</p>
<h3>编写可维护的代码</h3>
<p>软件的BUG修复需要花费大量的精力。尤其当代码已经发布之后，随着时间的增长，维护的成本愈发的高。当你一发现BUG的时候，就立即去修复，这时候你的代码还是热乎的，你也不需要回忆，因为就是刚刚写好的。但是当你做了其他任务，几乎完全忘记了这份代码，这时候就需要：</p>
<ol>
<li>重新学习和理解问题</li>
<li>理解代码是如何解决问题的<br>另外一个问题是，在大项目或者大公司里面，经常是解决BUG的人不是产生BUG的人，而且也不是发现BUG的人。所以减少理解代码的时间就是最重要的问题，无论这个代码是你自己以前写的还是团队中的其他成员写的，因为我们都想去搞搞新的有意思的东西，而不是去维护那些个陈旧的代码。</li>
</ol>
<p>还有一个开发中的普遍问题就是，往往读代码的时间比写代码的时间还要多。有时候你钻研一个问题，可以花整整一个下午的时间来考虑代码的编写。这个代码当时是可以工作的，但是随着开发的进行，其他东西发生了很大的变化，这时候也就需要你自己来重新审查修改编写代码。比如：</p>
<ol>
<li>还有BUG没有解决</li>
<li>添加了新的功能</li>
<li>程序需要在新的环境中运行（比如一个新上市的浏览器）</li>
<li>代码有问题</li>
<li>代码需要重写因为修改了架构甚至要使用另一个语言<br>因为这些原因，也许你当时一个下午写好的代码，后面需要花费几周的时间来阅读。所以编写可维护的代码对于软件的成功至关重要。</li>
</ol>
<p>可维护的代码包括：</p>
<ol>
<li>可读性</li>
<li>连续性</li>
<li>预见性</li>
<li>看起来是一个人写的</li>
<li>有文档</li>
<li>最少化全局变量<br>Javascript使用函数来约定作用域。一个在函数内部声明的变量在外部是不可见的。所以，全局变量也就是声明在任何函数之外的或者没有被声明的变量。</li>
</ol>
<p><strong>Javascript</strong>中，在任何函数之外有个可访问的全局对象，每一个你创建的全局变量都是这个对象的一个属性。在浏览器中，为了方便，通常用window来指代这个全局变量。下面的代码就是说明如何创建一个全局变量：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>myglobal = <span class="string">"hello"</span>; <span class="comment">// antipattern</span>
&gt; console.log(myglobal); <span class="comment">// "hello"</span>
&gt; console.log(window.myglobal); <span class="comment">// "hello"</span>
&gt; console.log(window[<span class="string">"myglobal"</span>]); <span class="comment">// "hello"</span>
&gt; console.log(<span class="keyword">this</span>.myglobal); <span class="comment">// "hello</span>
</pre></td></tr></table></figure>

</blockquote>
<h3>全局变量的问题</h3>
<p>全局变量的问题在于，他在你的所有代码或者一个页面中都共享。他们在同一个命名空间下面，这通常会造成变量名冲突–两个同名的变量，但是确实不同的用处。</p>
<p>通常在一些页面中需要引入一些其他人的代码，比如：</p>
<ol>
<li>第三方的JS库</li>
<li>广告伙伴的脚本</li>
<li>第三方的用户行为分析或者统计脚本</li>
<li>不同的组件、按钮等等<br>加入其中一个第三方组件定义了一个全局变量：result。然后在你的程序中，也定义了一个全局变量result。最后的这个result会覆盖点之前的result，这样第三方的脚本就会停止工作。</li>
</ol>
<p>所以，为了对其他的脚本友好，在一个页面中使用越少的全局变量越好。在后面会有一些方法来告诉你如何减少全局变量，比如使用命名空间，或者自执行的匿名函数，但是最好的避免全局变量的方法就是使用var关键字来声明变量。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/03/03/如何写出高质量的javascript代码/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/01/26/使用navigator-geolocation来获取用户的地理位置信息/">使用navigator.geolocation来获取用户的地理位置信息</a></h1>
  

      <time datetime="2011-01-26T15:25:05.000Z"><a href="/2011/01/26/使用navigator-geolocation来获取用户的地理位置信息/">2011年1月26日</a></time>
    </header>
    <div class="entry">
      
        <p>W3C 中新添加了一个名为 <strong>Geolocation</strong>的 API 规范，Geoloaction API的作用就是通过浏览器获取用户的地理位置。我们可以使用<code>navigator.geolocation</code>来简单的获取用户的地理位置信息。本文中将简单介绍下W3C的Geolocation。</p>
<p>Geolocation在javascript的navigator 对象中，我们可以通过 navigator.geolocation 来使用它。不支持 geolocation 的浏览器并不包含这一对象，那么可以通过下面的代码来做能力检测，对不同的浏览器做不同的处理。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">if</span> (navigator.geolocation) {
        alert( <span class="string">' 浏览器支持 geolocation '</span> );
}<span class="keyword">else</span>{
        alert( <span class="string">' 浏览器不支持 geolocation '</span> );
}
</pre></td></tr></table></figure>

<p>在访问 geolocation 对象时，即调用 geolocation 下面的方法时，浏览器会弹出提示，询问用户是否许可网站提供的位置服务，只有在得到用户许可过后，服务才会继续，否则将被停止，在稍后你将会了解到，我们能够捕获到用户拒绝服务的动作。下面这张图分别是 Chrome , Firefox 和 Opera 在初次访问 geolocation 时，给用户的提示：</p>
<p><a href="http://js8.in/672.html/geolocation-warn-2"><img src="/uploads/2011/01/geolocation-warn1-300x186.png" alt="初次使用geolocation时的警告框" title="初次使用geolocation时的警告框"></a></p>
<p>常用的navigator.geolocation对象有以下三种方法：</p>
<ol>
<li>获取当前地理位置：<strong>navigator.geolocation.getCurrentPosition</strong>(success_callback_function, error_callback_function, position_options)</li>
<li>持续获取地理位置：<strong>navigator.geolocation.watchPosition</strong>(success_callback_function, error_callback_function, position_options)</li>
<li><p>清除持续获取地理位置事件：<strong>navigator.geolocation.clearWatch</strong>(watch_position_id)<br>其中success_callback_function为成功之后处理的函数，error_callback_function为失败之后返回的处理函数，参数position_options是配置项，由JSON格式传入：</p>
</li>
<li><p>enableHighAccuracy：true/false，它将告诉浏览器是否启用高精度设备，所谓的高精度设备包含但不局限于前面所提到的 GPS 和 WIFI，值为 true 的时候，浏览器会尝试启用这些设备，默认指为 true，在这种情况下，浏览器会尽可能地进行更为精确的查询，简单地说，如果用户有可用的 GPS 设备，会返回 GPS 设备的查询结果，IP 是最后的选择，对于移动设备来说，网络接入点(基站)或许成为另一个选择，对此我还没有完全了解，但根据测试，即时没有任何额外功能的手机，也能够得到更为精确的查询结果。</p>
</li>
<li>maximumAge：单位毫秒，告诉设备缓存时间，主要用于设备的省电或者节省带宽方面。</li>
<li>timeout：单位毫秒，超时事件，获取位置信息时超出设定的这个时长，将会触发错误，捕获错误的函数将被调用，并且错误码指向TIMEOUT。</li>
</ol>
<p>例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="keyword">var</span> geo=navigator.geolocation.getCurrentPosition(geo_success, geo_error, {enableHighAccuracy:<span class="literal">true</span>, 
    maximumAge:<span class="number">30000</span>, 
    timeout:<span class="number">27000</span>});
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/01/26/使用navigator-geolocation来获取用户的地理位置信息/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/01/21/三种常见jquery幻灯片（jquery-slider）制作教程/">三种常见jQuery幻灯片（jQuery slider）制作教程</a></h1>
  

      <time datetime="2011-01-21T15:25:54.000Z"><a href="/2011/01/21/三种常见jquery幻灯片（jquery-slider）制作教程/">2011年1月21日</a></time>
    </header>
    <div class="entry">
      
        <p>好久没正儿八经的写写js代码了，再不写就生疏了，昨天无意中发现cityhouse的首页幻灯片有问题，于是今天就写了三个<strong>幻灯片</strong>实例，如果还不会用<strong>jquery</strong>写幻灯片的可以参考我之前的文章：《<a href="http://js8.in/479.html" title="jquery幻灯片教程">CSS+jQuery实现滑动幻灯片实例详解</a>》以及<a href="http://js8.in/462.html" title="jquery幻灯片实例教程">两个jQuery幻灯片实例</a>。</p>
<p>今天的<a href="http://js8.in/mywork/jq_slider3/" title="三种常见jQuery幻灯片（jQuery slider）实例">三个jQuery幻灯片</a>其实还是两个，只不过第一种滚动的幻灯片有两种形式：分别是上下滚动和左右滚动。兼容IE6+，FF，chrome等主流浏览器。<br>效果和淘宝首页的幻灯片效果相同，自动播放时是一直往一个方向前进。<br>布局方面还算比较简洁，大家可以根据自己的需要添加内容，另外这次的幻灯片加上了文字，其实不光图片可以slider，文字也可以slider一会的。另外加了一点CSS3，就是控制按钮圆角化了（FF3.6+和chrome下有效果）。</p>
<h3>截图</h3>
<p><a href="http://js8.in/668.html/snap1-18"><img src="/uploads/2011/01/Snap1-300x202.jpg" alt="三种常见jQuery幻灯片（jQuery slider）实例" title="三种常见jQuery幻灯片（jQuery slider）实例"></a></p>
<h3>教程</h3>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/01/21/三种常见jquery幻灯片（jquery-slider）制作教程/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2011/01/14/iframe自适用高度代码/">iframe自适用高度代码</a></h1>
  

      <time datetime="2011-01-14T10:02:48.000Z"><a href="/2011/01/14/iframe自适用高度代码/">2011年1月14日</a></time>
    </header>
    <div class="entry">
      
        <p>有不少<a href="http://js8.in/wbox-jquery" title="jQuery弹出框">wBox</a>的用户反映iframe时候不可以自动撑开高度，今天在无意中看到了司徒正美的一片关于iframe自适用高度的js代码，感觉不错，转载来了。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre>
<span class="keyword">var</span> adjustIframe = <span class="function"><span class="keyword">function</span> <span class="params">(id)</span> {</span>
    <span class="keyword">var</span> iframe = document.getElementById(id)
    <span class="keyword">var</span> idoc = iframe.contentWindow && iframe.contentWindow.document || iframe.contentDocument;
    <span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">var</span> iheight = Math.max(idoc.body.scrollHeight, idoc.documentElement.scrollHeight); <span class="comment">//取得其高</span>
        iframe.style.height = iheight + <span class="string">"px"</span>;
    }
    <span class="keyword">if</span> (iframe.attachEvent) {
        iframe.attachEvent(<span class="string">"onload"</span>, callback);
    } <span class="keyword">else</span> {
        iframe.onload = callback
    }
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2011/01/14/iframe自适用高度代码/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/12/29/前端必须熟悉的10个css3属性/">前端必须熟悉的10个CSS3属性</a></h1>
  

      <time datetime="2010-12-29T10:59:57.000Z"><a href="/2010/12/29/前端必须熟悉的10个css3属性/">2010年12月29日</a></time>
    </header>
    <div class="entry">
      
        <p>随着Css3和html5的风靡，越来越多的前端人员开始学习Css3，今天的文章就是来说说前端应该掌握10个Css3属性。  上篇博文提到了《<a href="http://js8.in/647.html" title="前端必须掌握30个CSS3选择器">前端必须掌握30个CSS3选择器</a>》，但是对于Css3的新属性，你又了解多少呢？虽然大多数的css3属性在很多流行的浏览器中不支持，但是我们鼓励在前端开发中要学会并且运行这些css3属性，因为这是未来的趋势。  关键是首先确定你是否对各个浏览器之间的细微的差别有所了解，你能肯定的说IE显示的90度的角就不圆滑嘛？这取决于你的决定。但是要永远记住，网站设计不必看到所有浏览器的不同。在文章的最后，我们将显示一个有趣的最终的案例。</p>
<h3>1、border-radius</h3>
<p><a href="http://js8.in/648.html/attachment/201012220003115125"><img src="/uploads/2010/12/201012220003115125.png" alt="border-radius" title="border-radius"></a></p>
<p><strong>border-radius</strong>是一大堆CSS3属性中最受欢迎的一种，border-radius是CSS3中级别最高的一个属性。当设计者害怕一个层在将在不同的浏览器之间以不同的方式显示时，CSS圆角，一个很初级的知识，将引导他们开始学习。  我们为移动浏览器提供一个备用的观看体验的想法都非常好。奇怪的是，当这种方法出现在桌面浏览器上时，他们却又不这么认为。  border-radius是一大堆CSS3属性中最受欢迎的一种，border-radius是CSS3中级别最高的一个属性。当设计者害怕一个层在将在不同的浏览器之间以不同的方式显示时，CSS圆角，一个很初级的知识，将引导他们开始学习。  我们为移动浏览器提供一个备用的观看体验的想法都非常好。奇怪的是，当这种方法出现在桌面浏览器上时，他们却又不这么认为。</p>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
-<span class="tag">webkit</span>-<span class="tag">border</span>-<span class="tag">radius</span>: 4<span class="tag">px</span>;
-<span class="tag">moz</span>-<span class="tag">border</span>-<span class="tag">radius</span>: 4<span class="tag">px</span>;
<span class="tag">border</span>-<span class="tag">radius</span>: 4<span class="tag">px</span>;
</pre></td></tr></table></figure>

<p>注意：请在Safari 5 和 IE9浏览器中执行”border-radius”语法。<br> <strong>圆</strong><br>许多读者也许不会意识到我们可以用这个属性来做一个圆。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/12/29/前端必须熟悉的10个css3属性/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/12/28/前端必须掌握30个css3选择器/">前端必须掌握30个CSS3选择器</a></h1>
  

      <time datetime="2010-12-28T13:57:58.000Z"><a href="/2010/12/28/前端必须掌握30个css3选择器/">2010年12月28日</a></time>
    </header>
    <div class="entry">
      
        <p>也许你已经学会了CSS的三个简单常用的选择器：#ID，.class，标签选择器，可是这些就足够了吗？随着<strong>CSS3</strong>的到来，作为前端开发者需要掌握下面三十个基本的选择器，这样才可以在平时开发中得心用手。</p>
<p>本文中将综合前端开发中常用的30个<strong>CSS3选择器</strong>，并且附带了浏览器的支持情况，希望对大家有所帮助。</p>
<h3>1、*：通用元素选择器</h3>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
* <span class="rules">{  
 <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span>;</span></span>  
 <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span>;</span></span>  
<span class="rule">}</span></span>
</pre></td></tr></table></figure>

<p>*选择器是选择页面上的全部元素，上面的代码作用是把全部元素的margin和padding设为0，最基本的<a href="http://js8.in/365.html" title="清除默认CSS样式注意事项">清除默认CSS样式</a>方法</p>
<p>*选择器也可以应用到子选择器中，例如下面的代码：</p>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="id">#container</span> * <span class="rules">{  
 <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1</span>px solid black;</span></span>  
<span class="rule">}</span></span>
</pre></td></tr></table></figure>

<p>这样ID为container 的所有子标签元素都被选中了，并且设置了border。</p>
<p><a href="http://d2o0t5hpnwv4c1.cloudfront.net/840_cssSelectors/selectors/star.html" target="_blank">查看演示</a></p>
<h5>兼容性</h5>
<ol>
<li>IE6+</li>
<li>Firefox</li>
<li>Chrome</li>
<li>Safari</li>
<li>Opera</li>
</ol>
<h3>#ID：ID选择器</h3>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
<span class="id">#container</span> <span class="rules">{  
   <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">960</span>px;</span></span>  
   <span class="rule"><span class="attribute">margin</span>:<span class="value"> auto;</span></span>  
<span class="rule">}</span></span>
</pre></td></tr></table></figure>

<p>ID选择器是CSS中效率最高的选择器，使用的时候要保证ID的唯一性。</p>
<p><a href="http://d2o0t5hpnwv4c1.cloudfront.net/840_cssSelectors/selectors/id.html" target="_blank">查看演示</a></p>
<h5>兼容性</h5>
<ol>
<li>IE6+</li>
<li>Firefox</li>
<li>Chrome</li>
<li>Safari</li>
<li>Opera</li>
</ol>
<h3>.class:类选择器</h3>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
<span class="class">.error</span> <span class="rules">{  
  <span class="rule"><span class="attribute">color</span>:<span class="value"> red;</span></span>  
<span class="rule">}</span></span>
</pre></td></tr></table></figure>

<p>类选择器效率低于ID选择器，一个页面可以有多个class，并且class可以放在不同的标签中使用。</p>
<p><a href="http://d2o0t5hpnwv4c1.cloudfront.net/840_cssSelectors/selectors/class.html" target="_blank">查看演示</a></p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/12/28/前端必须掌握30个css3选择器/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/12/07/css3-media-queries使用方法详解/">CSS3 Media Queries使用方法详解</a></h1>
  

      <time datetime="2010-12-07T13:57:34.000Z"><a href="/2010/12/07/css3-media-queries使用方法详解/">2010年12月7日</a></time>
    </header>
    <div class="entry">
      
        <p>在css2中允许我们使用media的属性，例如使用screen和print，我也写过一篇关于<a href="http://js8.in/351.html" title="使用CSS控制打印页面格式">使用CSS media的print来定义打印网页</a>的样式的文章，关于css2中的media文章，推荐下<a href="http://www.w3.org/TR/CSS2/media.html" target="_blank">w3c的</a>。今天来说说CSS3的Media Queries。CSS3中不仅仅可以使用screen和print，而且支持多媒体多分辨率的样式表。</p>
<p>我们先来看下CSS3 Media Queries的演示实例：<a href="http://js8.in/mywork/css3media.html" title="CSS3 Media Query 演示"><a href="http://js8.in/mywork/css3media.html">http://js8.in/mywork/css3media.html</a></a>，来自于（<a href="http://www.webdesignerwall.com/tutorials/css3-media-queries/" target="_blank">Web Designer Wall</a>）</p>
<h3>Max Width</h3>
<p>故名思意，就是最大宽度的意思，例如下面的代码是在宽度小于600px的时候才执行的。</p>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="at_rule">@<span class="keyword">media</span> screen and (max-width: <span class="number">600</span>px) </span>{
  <span class="class">.class</span> <span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#ccc</span>;</span></span>
  <span class="rule">}</span></span>
}
</pre></td></tr></table></figure>

<p>也可以在link标签里面使用media属性，即下面的写法：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
<span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">media</span>=<span class="value">"screen and (max-width: 600px)"</span> <span class="attribute">href</span>=<span class="value">"small.css"</span> /&gt;</span>
</pre></td></tr></table></figure>

<h3>Min Width</h3>
<p>跟Max Width相反，是最小宽度，例如当宽度大于900px的时候才运行下面的代码</p>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="at_rule">@<span class="keyword">media</span> screen and (min-width: <span class="number">900</span>px) </span>{
  <span class="class">.class</span> <span class="rules">{
    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#666</span>;</span></span>
  <span class="rule">}</span></span>
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/12/07/css3-media-queries使用方法详解/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/11/24/javascript简单实现checkbox的全选与反选/">javascript简单实现checkbox的全选与反选</a></h1>
  

      <time datetime="2010-11-23T20:23:35.000Z"><a href="/2010/11/24/javascript简单实现checkbox的全选与反选/">2010年11月24日</a></time>
    </header>
    <div class="entry">
      
        <p>今天上网遇到有个网友在论坛问input的<strong>checkbox</strong>全选和反选的问题，顺手总结了一下，然后写了个简单的jQuery checkbox<strong>全选反选</strong>插件，希望对大家有用。<br>如果是简单的实现checkbox的全选与反选可以使用下面的函数：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>
 <span class="function"><span class="keyword">function</span> <span class="title">checkall</span><span class="params">(obj,cName)</span>
 {</span>
     <span class="keyword">var</span> checkboxs = document.getElementsByName(cName);
     <span class="keyword">for</span>(<span class="keyword">var</span> i=checkboxs.length;i--;){
             checkboxs[i].checked = obj.checked;
     }
 }
<span class="comment">//使用方法:给全选的按钮加onclick事件：onclick="checkall(this,'all[]');"</span>
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/11/24/javascript简单实现checkbox的全选与反选/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/11/09/再谈iframe的问题/">再谈Iframe的问题</a></h1>
  

      <time datetime="2010-11-09T11:58:18.000Z"><a href="/2010/11/09/再谈iframe的问题/">2010年11月9日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>iframe</strong>是可以做的事情非常多，比如<a href="http://js8.in/443.html" title="用document.domain+iframe实现Ajax跨子域">通过iframe实现跨域</a>，使用<a href="http://js8.in/553.html" title="解决IE6 select z-index无效，遮挡div的bug">iframe解决IE6下select遮挡不住的问题</a>，通过<a href="http://js8.in/311.html" title="关于Ajax在浏览器中产生前进后退的实现方法">iframe解决Ajax的前进后退</a>问题，再比如通过iframe实现异步上传。在很早我就写过一篇文章说明了<a href="http://js8.in/463.html" title="使用JavaScript在IE和Firefox下进行iframe的DOM操作">Iframe在IE、firefox下的一些DOM操作</a>。今天结合最近项目中遇见的<strong>iframe问题</strong>，再来谈谈iframe的一些常见问题解决方案。</p>
<h3>IE下iframe背景透明问题</h3>
<p>在firefox下，iframe背景默认的是透明的，在IE下默认不是透明的，我们可以使用<code>allowTransparency=&#39;true&#39;</code>来设置IE下的iframe为透明，另外我们使用<code>scrolling =&#39;no&#39; ``frameborder=&#39;0&#39;</code>分别来实现iframe页面没有滚动条，边框宽度。</p>
<h3>IE6下iframe不显示的问题</h3>
<p>不得不说<strong>IE6</strong>是个操蛋的浏览器，尤其是在中国！iframe有的时候在IE6中会出现不显示的问题，主要有以下几种原因，请一一排查：</p>
<ol>
<li>可能你的iframe没有设置宽高，例如在table不居中，计算不出来td的高度，会导致这种问题</li>
<li><p>尝试使用下面的代码来重新载入IE6下的iframe页面：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>
&gt; setTimeout(<span class="keyword">function</span>(){
&gt; 	document.frames[<span class="string">'fuckIE6'</span>].location.reload();
&gt; },<span class="number">0</span>)
&gt;
</pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>传闻iframe标签中不要把src紧跟在iframe之后，也就是<code>&amp;lt;iframe src=&#39;js8.in&#39; name=&#39;fuckIE6&#39;&amp;gt;&amp;lt;/iframe&amp;gt;</code>是错误的，不过我没有碰见过类似的问题，为了保险起见，还是不要写成上面的样式为妙。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/11/09/再谈iframe的问题/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/10/02/jquery教程之鼠标事件篇/">jQuery教程之鼠标事件篇</a></h1>
  

      <time datetime="2010-10-02T14:12:56.000Z"><a href="/2010/10/02/jquery教程之鼠标事件篇/">2010年10月2日</a></time>
    </header>
    <div class="entry">
      
        <p>jQuery除了<strong>选择器</strong>之外，还封装了很多事件的处理，比如<strong>鼠标事件</strong>，所谓的鼠标事件是指用户在移动鼠标光标或者点击任意鼠标键而触发的事件，jQuery中封装了几乎所有的鼠标事件，包括点击，双击，移出，移入等鼠标事件，下面断桥残雪简单的介绍下<strong>jQuery的鼠标事件</strong></p>
<h3>jQuery的click事件</h3>
<p>经典鼠标click的实例：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
$(<span class="string">"sel"</span>).click(<span class="keyword">function</span>(){
    alert(<span class="string">'哈哈 !'</span>);
});
</pre></td></tr></table></figure>

<h3>jQuery的dbclick事件</h3>
<p>一般dbclick事件的同时也会触发两次click事件。。以前我写过一篇博客简单的介绍了下<a href="http://js8.in/610.html">jQuery的鼠标双击事件</a></p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>
$(<span class="string">'p'</span>).dbclick(<span class="keyword">function</span>(){
alert(<span class="string">'鼠标双击!'</span>);
});
$(<span class="string">'p'</span>).click(<span class="keyword">function</span>(){
alert(<span class="string">'点击了一下!'</span>);
});<span class="comment">//大家看看结果是怎么样的？</span>
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/10/02/jquery教程之鼠标事件篇/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/09/26/解决jquery中dbclick事件触发两次click事件/">解决jQuery中dbclick事件触发两次click事件</a></h1>
  

      <time datetime="2010-09-26T08:40:37.000Z"><a href="/2010/09/26/解决jquery中dbclick事件触发两次click事件/">2010年9月26日</a></time>
    </header>
    <div class="entry">
      
        <p>在jQuery事件绑定中，dbclick可以触发两次click事件。例如一个DOM元素div，既绑定了 <strong>click </strong>事件，又绑定了 dblclick 事件，这两个事件分别要做独立的事情。事件处理上没有冲突，都可以各自完成各自的操作。双击的时候虽然是执行了 <strong>dblclick </strong>事件，但是在这之前，也执行了click 事件，那么，如何来禁止或者说屏蔽这次多余的 click 事件呢？本文将提供给您一个比较好的解决办法。</p>
<h3>产生原理分析</h3>
<p>　　首先，来了解一下点击事件发生的先后顺序：</p>
<p>单击：mousedown, mouseup, click<br>双击：mousedown, mouseup, click, mousedown, mouseup, click, dblclick<br>　　由此看来，dblclick 事件发生之前，实际上发生了两次 click 事件。其中，第一次的 click 是会被屏蔽掉，但是第二次则不会，所以就出现在双击的时候，也触发 click 事件。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/09/26/解决jquery中dbclick事件触发两次click事件/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/09/16/ie-event-stoppropagation阻止冒泡事件/">IE event.stopPropagation()阻止冒泡事件</a></h1>
  

      <time datetime="2010-09-16T15:29:11.000Z"><a href="/2010/09/16/ie-event-stoppropagation阻止冒泡事件/">2010年9月16日</a></time>
    </header>
    <div class="entry">
      
        <p>在火狐Firefox、opera、IE下阻止冒泡事件是不同的代码的，火狐下使用的是<strong>event.stopPropagation()</strong>，而IE下使用的是<strong>cancelBubble</strong>，jQuery 可以使用<strong>e.stopPropagation()</strong>就可以兼容了，如果是纯粹的JavaScript需要下面的代码来统一：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>
<span class="keyword">if</span> (event.stopPropagation) {
<span class="comment">// this code is for Mozilla and Opera</span>
event.stopPropagation();
}
<span class="keyword">else</span> <span class="keyword">if</span> (window.event) {
<span class="comment">// this code is for IE</span>
window.event.cancelBubble = <span class="literal">true</span>;
}
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/09/15/jquery中的offset和position方法详解/">Jquery中的offset()和position()方法详解</a></h1>
  

      <time datetime="2010-09-15T10:25:34.000Z"><a href="/2010/09/15/jquery中的offset和position方法详解/">2010年9月15日</a></time>
    </header>
    <div class="entry">
      
        <p>再给普加地图添加搜索提示的时候，我使用了jQuery的offset方法，因为习惯了，结果出现了不对齐的bug，说明offset的方法获取的top和left值是错误的。后来想起了jQuery中<strong>offset</strong>和<strong>position</strong>的两个方法有所不同，就查了一下google，原来两者是在父节点的相对绝对定位相关的。于是整理了今天的文章。</p>
<p>我们首先来看看这两个方法的定义。</p>
<h3>jQuery的offset()方法</h3>
<p>获取匹配元素在<strong>当前视口</strong>的相对偏移。<br>返回的对象包含两个整形属性：top 和 left。此方法只对可见元素有效。</p>
<h3>jQuery的position()方法</h3>
<p>获取匹配元素<strong>相对</strong>父元素的偏移。<br>返回的对象包含两个整形属性：top 和 left。为精确计算结果，请在补白、边框和填充属性上使用像素单位。此方法只对可见元素有效。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/09/15/jquery中的offset和position方法详解/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/09/05/提高firefox的innerhtml的性能/">提高Firefox的innerHTML()的性能</a></h1>
  

      <time datetime="2010-09-05T15:59:33.000Z"><a href="/2010/09/05/提高firefox的innerhtml的性能/">2010年9月5日</a></time>
    </header>
    <div class="entry">
      
        <p>Firefox 下<strong>innerHTML</strong>在操作量大了以后性能下降很厉害,有人写了个提高innhtml性能的代替方法：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">replaceHtml</span><span class="params">(el, html)</span> {</span>
<span class="keyword">var</span> oldEl = <span class="keyword">typeof</span> el === <span class="string">"string"</span> ? document.getElementById(el) : el;
<span class="comment">/*@cc_on // 原始的 innerHTML 在 IE 中的性能好一点
oldEl.innerHTML = html;
return oldEl;
@*/</span>
<span class="keyword">var</span> newEl = oldEl.cloneNode(<span class="literal">false</span>);
newEl.innerHTML = html;
oldEl.parentNode.replaceChild(newEl, oldEl);
<span class="comment">/* 一旦我们从 DOM 上移除老的元素，则返回新的元素引用。*/</span>
<span class="keyword">return</span> newEl;
};
</pre></td></tr></table></figure>

<p>可以直接用<code>el=replaceHtml(el, newHtml)</code>代替<code>el.innerHTML=newHtml</code>。</p>
<p>速度到底有多大提升，还得测试说话。作者提供了一个测试页面：<a href="http://stevenlevithan.com/demo/replaceHtml.html" target="_blank">http://stevenlevithan.com/demo/replaceHtml.html</a></p>
<p>此方法大大提高了 innerHTML 在 Firefox 和 Safari 上的性能。replaceHtml() 在 Firefox 2.0.0.6 里 destroy 与 replace 的速度各快了 473 倍以及 50 倍。而在 Safari 3.0.3 beta 上则是 create 100 倍，replace 50 倍。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/09/05/提高firefox的innerhtml的性能/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/09/02/解决ie6不支持max-height的bug/">解决IE6不支持max-height的bug</a></h1>
  

      <time datetime="2010-09-02T13:06:30.000Z"><a href="/2010/09/02/解决ie6不支持max-height的bug/">2010年9月2日</a></time>
    </header>
    <div class="entry">
      
        <p>罪恶的IE6不支持<strong>max-height</strong>属性，不过我们可以通过jQuery来解决IE6不支持max-height，<strong>jQuery</strong>的代码如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>$(<span class="string">".entry"</span>).each(<span class="keyword">function</span>(){
    <span class="keyword">if</span>($(<span class="keyword">this</span>)[<span class="number">0</span>].scrollHeight&gt;<span class="number">500</span>)
     $(<span class="keyword">this</span>).css({<span class="string">"height"</span>:<span class="string">"500px"</span>});
});
</pre></td></tr></table></figure>

<p><strong>原理</strong>: 在IE6中可以通过设定height来达到<strong>max-height</strong>的效果. 循环所有要加max-height属性的DOM元素,判断他的scrollHeight大于你要设置的最大高度 如果超过了就通过设置height为最大高度，我这里使用的是[0]，获取的是的DOM对象，而不是jQuery对象，详细说明见：《<a href="http://js8.in/416.html">jQuery选择器使用详解</a>》</p>
<p>上面的代码还没有加入IE6的判断,完整代码如下:</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">if</span>($.browser.msie&amp;&amp;($.browser.version === <span class="string">"6.0"</span>)){
$(<span class="string">".entry"</span>).each(<span class="keyword">function</span>(){
<span class="keyword">if</span>($(<span class="keyword">this</span>)[<span class="number">0</span>].scrollHeight&gt;<span class="number">500</span>)
$(<span class="keyword">this</span>).css({<span class="string">"height"</span>:<span class="string">"500px"</span>,<span class="string">"overflow"</span>:<span class="string">"hidden"</span>});
});}
</pre></td></tr></table></figure>

<p>当然你也可以通过<strong>css表达式</strong>来实现<strong>IE6</strong>支持max-height属性</p>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>.entry{
//我烧验证woshao_985140e4b71711df9e5e000c295b2b8d
height: expression( this.scrollHeight &gt; 500 ? "500px" : "auto" ); /* sets max-height for IE */
}
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/08/31/前端开发优化总结/">前端开发优化总结</a></h1>
  

      <time datetime="2010-08-31T10:38:21.000Z"><a href="/2010/08/31/前端开发优化总结/">2010年8月31日</a></time>
    </header>
    <div class="entry">
      
        <p>发现的一篇关于<strong>前端优化</strong>的文章，总结的很全面，要做到面面俱到很难，往往是想优化而没有时间去优化，就像我们公司，一个项目连着一个项目~新员工的培训都省了，还想优化前端啊，不过我真的想有机会和<a href="http://www.qicaisky.com/" target="_blank">老大</a>好好的整合下公司网站的前端代码~不过要把前端优化的工作放在平时的写代码中去，就不需要刻意的后期优化了。在项目开发中，后台需要搭建好框架，前端更是需要搭建好框架，并且在页面实现中得到实现，只有这样才能事半功倍。</p>
<p>前段时间简单的研究了下前端优化相关的知识，本文算是一个阶段性的总结，或者当做一个优化的参考List。</p>
<h3>前言</h3>
<p>前端是庞大的，包括HTML、CSS、Javascript、Image、Flash等等各种各样的资源。<strong>前端优化</strong>是复杂的，针对方方面面的资源都有不同的方式。那么，前端优化的目的是什么？</p>
<ol>
<li>从用户角度而言，优化能够让页面加载得更快、对用户的操作响应得更及时，能够给用户提供更为友好的体验。</li>
<li>从服务商角度而言，优化能够减少页面请求数、或者减小请求所占带宽，能够节省可观的资源。<br>总之，恰当的优化不仅能够改善站点的用户体验并且能够节省相当的资源利用。</li>
</ol>
<p>前端优化的途径有很多，按粒度大致可以分为两类，第一类是页面级别的优化，例如HTTP请求数、脚本的无阻塞加载、内联脚本的位置优化等；第二类则是代码级别的优化，例如Javascript中的DOM操作优化、CSS选择符优化、图片优化以及HTML结构优化等等。另外，本着提高投入产出比的目的，后文提到的各种优化策略大致按照投入产出比从大到小的顺序排列。</p>
<h3>一、页面级优化</h3>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/08/31/前端开发优化总结/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/08/30/关于jquery-ready方法一些用法解释/">关于jQuery ready()方法一些用法解释</a></h1>
  

      <time datetime="2010-08-30T10:27:27.000Z"><a href="/2010/08/30/关于jquery-ready方法一些用法解释/">2010年8月30日</a></time>
    </header>
    <div class="entry">
      
        <p>jQuery的<strong>ready</strong>方法的是开发中经常用到的，作用相当于我们的body onload，是当页面DOM准备就绪的时候才运行的代码，最常用的就是在DOM渲染加载之前，先给document绑定ready事件，然后当页面DOM都准备好之后才运行这个事件。<br>关于<strong>jQuery</strong>的ready有以下几种用法</p>
<h3>最常用也是最标准的ready方法</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>$(document).ready(){
});
</pre></td></tr></table></figure>

<h3>简写的jQuery ready()</h3>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>$(<span class="keyword">function</span>(){
});
</pre></td></tr></table></figure>

<p>这是因为<strong>jQuery</strong>的选择器第一个参数假如为空，那么默认的是<strong>document</strong><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/08/30/关于jquery-ready方法一些用法解释/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/08/29/使用js的image对象检测图片类型是否合法/">JS的Image对象可用于检测图片类型是否合法</a></h1>
  

      <time datetime="2010-08-29T15:42:35.000Z"><a href="/2010/08/29/使用js的image对象检测图片类型是否合法/">2010年8月29日</a></time>
    </header>
    <div class="entry">
      
        <p>项目中假如碰到了上传图片文件时，需要在后台加检测程序，判断图片类型是否合法，以防止一些非法的文件上传，如果对js的<strong>Image</strong>对象比较熟悉我们可以使用下面的方法在<strong>前端</strong>层次上检查下图片类型是否合法。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>
       <span class="keyword">var</span> img = <span class="keyword">new</span> Image();
        img.onload = <span class="keyword">function</span>(){
            alert(<span class="string">'load'</span>);
        };
        img.onerror = <span class="keyword">function</span>(){
            alert(<span class="string">'error'</span>);
        };
        img.src = <span class="string">'logo.png'</span>;
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/08/29/使用js的image对象检测图片类型是否合法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/08/28/解决ie下settimeout传参数的bug/">解决IE下setTimeout传参数的bug</a></h1>
  

      <time datetime="2010-08-27T19:43:47.000Z"><a href="/2010/08/28/解决ie下settimeout传参数的bug/">2010年8月28日</a></time>
    </header>
    <div class="entry">
      
        <p>最近一次的开发中遇到了IE下<strong>setTimeout</strong>传参数的问题，在<strong>IE</strong>下setTimeout是不会传参数的，例如下面的代码，在IE下就不会传入a,b两个参数</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>
setTimeout(<span class="keyword">function</span>(a,b){
alert(a+b);
},<span class="number">1000</span>,<span class="string">'hello,'</span>,<span class="string">'world!'</span>);
</pre></td></tr></table></figure>

<p>在实际项目中我们有些需求必须传入参数要<strong>setTimeout</strong>的function进行处理，那么我们就需要利用js的call及其apply的方法，来解决IE下的setTimeout传参bug：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/08/28/解决ie下settimeout传参数的bug/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/08/09/jquery弹出框wbox的一个使用实例/">jQuery弹出框wBox的一个使用实例</a></h1>
  

      <time datetime="2010-08-08T16:06:07.000Z"><a href="/2010/08/09/jquery弹出框wbox的一个使用实例/">2010年8月9日</a></time>
    </header>
    <div class="entry">
      
        <p>公司<a href="http://www.pujia.com" target="_blank">网站</a>越来越多的使用了<a href="http://js8.in/wbox">wBox</a>，比如最新的产品<a href="http://linju.pujia.com" target="_blank">普加邻居</a>，封装了wBox(<strong>jQuery</strong>的一款弹出框插件)，房产展示页面的房贷计算器采用的就是<strong>wBox</strong>，搜索结果页面采用的也是wBox，但是相对于其他页面，搜索结果页面每一个li下面会有三个不同的wBox样式，我不可能每个都是手写一段<strong>wBox代码</strong>吧~</p>
<p><a href="/uploads/2010/08/2010-08-09_155359.png"><img src="/uploads/2010/08/2010-08-09_155359-300x133.png" alt="鼠标划上去显示wBox的三个触发链接" title="鼠标划上去显示wBox的三个触发链接"></a><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/08/09/jquery弹出框wbox的一个使用实例/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/07/06/ie中多帧gif可以触发多次image-load事件/">IE中多帧GIF可以触发多次Image().load事件</a></h1>
  

      <time datetime="2010-07-06T12:47:59.000Z"><a href="/2010/07/06/ie中多帧gif可以触发多次image-load事件/">2010年7月6日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天同事负责一个首页广告，广告采用的是<strong>多帧GIF</strong>动画，在HTML演示页面中采用的是jpg，运用Image对象的<strong>load事件</strong>来加上广告，这样就避免了广告播放出来而图片还没有加载完成的尴尬局面，但是却遇到了一个超级郁闷的事情，那就是在IE中load事件不停的执行，找了很多原因，最后在google上找到了：原来是多帧GIF引起的Image().load事件重复触发的问题。又一次长见识了！而且还有人发帖说可以通过这个bug来模拟js的多线程~</p>
<p>解决方法：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="keyword">var</span> img=<span class="keyword">new</span> Image();
&gt; img.load=<span class="keyword">function</span>(){
&gt;     <span class="comment">//do something</span>
&gt;    img.load=<span class="literal">null</span>;<span class="comment">//重新赋值为null</span>
&gt; }
&gt; img.src=<span class="string">'××.gif'</span>;
</pre></td></tr></table></figure>

</blockquote>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/06/29/onbeforeunload与a标签在ie中的冲突/">onbeforeunload与a标签在IE中的冲突bug</a></h1>
  

      <time datetime="2010-06-29T08:07:46.000Z"><a href="/2010/06/29/onbeforeunload与a标签在ie中的冲突/">2010年6月29日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>onbeforeunload </strong>是window的一个事件，目前Firefox，IE都支持，主要用来提示用户是否真的要离开该页面，通常在一些比较重要的数据提交之前，防止用户误操作导致数据丢失。典型的应用如gmail中，在写邮件的时候，如果刷新页面或者关闭页面，会出现提示。</p>
<p>但是在IE下点击一些<strong>a标签</strong>时，也会触发onbeforeunload事件。并且href中写<code>javascript:void(0)</code>也不行，而在Firefox中不会出现类似的情况。于是查资料对onbeforeunload事件重新认识了一下：</p>
<h3>a标签触发事件的顺序</h3>
<p><strong>onclick</strong>、onbeforeunload跟href三者之间的先后运行关系是这样的：onclick &gt; onbeforeunload &gt; href，知道了这个道理，我们就可以通过一些方法阻止onbeforeunload。另外在IE浏览器中，假如href为#，那么也不会触发onbeforeunload事件。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/06/29/onbeforeunload与a标签在ie中的冲突/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/06/27/google-map-api教程之使用gcontrol对象在地图上添加control按钮/">Google Map API教程之使用GControl对象在地图上添加control按钮</a></h1>
  

      <time datetime="2010-06-27T11:45:25.000Z"><a href="/2010/06/27/google-map-api教程之使用gcontrol对象在地图上添加control按钮/">2010年6月27日</a></time>
    </header>
    <div class="entry">
      
        <p>今天查看我<a href="http://ditu.js8.in" title="全国地图经纬度查询" target="_blank">网站的地图</a>已经被谷歌收录了5900条，而百度也开始收录了，很欣慰~再接再厉，今天写的这一篇<strong>Google map api教程</strong>是关于在Google地图上添加control按钮的，用到的是Google Map API的<code>**GControl**</code>对象，通过initialize的方法插入一个div到地图上，再通过<code>new **GControlPosition**</code>设置按钮的位置，最后通过Gmap的<code>**addControl**</code>方法添加这个按钮。最终效果截图如下：</p>
<p><a href="http://js8.in/mywork/googlemap/gcontrol.html"><img src="/uploads/2010/06/control-300x171.jpg" alt="control" title="control"></a></p>
<h3>实现方法原理分析</h3>
<p>首先建立一个GControl的原型control，然后定义其initialize 方法：主要是建立一个div，并且制定div的onclick事件，最后通过<code>gmap.getContainer().appendChild(buttonDiv)</code>插入到地图中去。<br>最后定义<code>getDefaultPosition</code>的方法，通过<code>GControlPosition</code>对象设置按钮所在地图的具体位置。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/06/27/google-map-api教程之使用gcontrol对象在地图上添加control按钮/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/06/24/google-map-api教程之如何自动缩放级别（setautozoom）/">Google Map API教程之如何自动缩放级别（setAutoZoom）</a></h1>
  

      <time datetime="2010-06-24T10:55:35.000Z"><a href="/2010/06/24/google-map-api教程之如何自动缩放级别（setautozoom）/">2010年6月24日</a></time>
    </header>
    <div class="entry">
      
        <p>最近花了两晚上的时间写了一个<a href="http://ditu.js8.in" title="Google Map API应用程序" target="_blank">google地图</a>的应用程序，采用了<strong>map api</strong>，<strong>weather api</strong>，<strong>localsearch api</strong>，我想的是有空写一些关于<strong>Google Map API</strong>的文章，今天就写一个关于自动缩放地图到合适级别的方法，这里说的自动缩放，指的是地图上已经加入了很多<strong>Gmarker</strong>点，而这些点任何地方都有，我们为了要它们在地图上能够都显示出来，必须要个Google Map设置一个合适的缩放级别和中心点，这里用的方法是Google Map API的<strong>GLatLngBounds</strong>。</p>
<p>假设我们创建的Google Map对象为<code>gmap = new GMap2()</code>，我们添加所有<strong>GMarker</strong>都保存在一个名字为markers的数组里，它们的点遍布各地，我们要做的就是要这些点都在地图上显示出来，也就是自动缩放地图（set auto zoom）。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/06/24/google-map-api教程之如何自动缩放级别（setautozoom）/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/06/21/解决ie6背景图片不缓存的bug/">解决IE6背景图片不缓存的BUG</a></h1>
  

      <time datetime="2010-06-20T21:34:13.000Z"><a href="/2010/06/21/解决ie6背景图片不缓存的bug/">2010年6月21日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>IE6</strong>在背景图片缓存上有一个<strong>bug</strong>：它会每次都从服务器端读取背景图片。例如我们使用a:hover更换背景图片，在IE6下会出现每次鼠标滑过则重新向服务器请求图片，如果服务器反应较慢，那么hover效果就会出现短暂的空白，令人极度不爽。虽然可以通过<strong>CSS sprites</strong>的方式解决问题的，但效果差强人意。</p>
<p>示例：<br><code>a{ background:url(normal.gif); } a:hover { background:url(hover.gif); }</code><br>如果为超级链接定义上述的css样式以实现鼠标悬浮时的动态效果，在firefox下是没有什么问题的，第一次加载之后，浏览器都会从缓存读取背景图片.</p>
<h3>解决方法</h3>
<p>具体的<strong>解决方法</strong>就是在页面中加入一段简单的javascript脚本，告诉IE6：本地有背景图片的话就不要麻烦服务器了。 <code>document.execCommand(&quot;BackgroundImageCache&quot;,false,true);</code></p>
<p>关于这段脚本的放置方式有两种：</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/06/21/解决ie6背景图片不缓存的bug/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/06/19/引入css-的两种方式：link和import的区别/">引入CSS 的两种方式：link和@import的区别</a></h1>
  

      <time datetime="2010-06-19T12:37:44.000Z"><a href="/2010/06/19/引入css-的两种方式：link和import的区别/">2010年6月19日</a></time>
    </header>
    <div class="entry">
      
        <p>引入<strong>css</strong>外部文件的两种方法为在html页面通过<strong>link</strong>，src属性（<a href="http://js8.in/555.html" title="img,Script,Link等标签为空可导致页面多余请求">注意空链接时的陷阱</a>！），再者是通过CSS文件本身通过<strong>@import url()</strong>引入，虽然这两种方式都可以加载进来CSS文件，可是link和@import也存在着细微的差别。</p>
<h3>隶属上的差别</h3>
<p>link属于XHTML标签，而@import完全是<strong>CSS</strong>提供的一种方式。link标签除了可以加载CSS外，还可以做很多其它的事情，比如定义RSS，定义rel连接属性等，@import就只能加载CSS了。此处注意<a href="http://js8.in/555.html" title="img,Script,Link等标签为空可导致页面多余请求">浏览器的link src为空时候时会导致页面加载次数增多</a>。</p>
<h3>@import次数限制</h3>
<p>传闻在IE6下，@import只能引入31次css文件，可是可以通过在css文件中再次import来垂直扩展，<a href="http://js8.in" title="专注前端开发">断桥残雪</a>没有测试过，不过如果出现这样的情况，说明这个写代码的人也挺变态的。</p>
<h3>加载顺序的不同</h3>
<p>当一个页面被加载的时候（就是被浏览者浏览的时候），link引用的CSS文件会同时被加载，而@import引用的CSS 会等到页面全部被下载完再被加载。所以有时候浏览@import加载CSS的页面时开始会没有样式，然后突然样式会出现，网速慢的时候还挺明显，@import这点跟把CSS文件放在页面结尾效果相同，不过如果我们一些样式开始页面并不会出现，而是在交互时才出现的CSS样式，可以通过这个方法引入，时间上错开。例如：Ajax的html，交互时的弹出框，弹出div等<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/06/19/引入css-的两种方式：link和import的区别/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/06/17/解决ie6-select-z-index无效，遮挡div的bug/">解决IE6 select z-index无效，遮挡div的bug</a></h1>
  

      <time datetime="2010-06-17T09:33:03.000Z"><a href="/2010/06/17/解决ie6-select-z-index无效，遮挡div的bug/">2010年6月17日</a></time>
    </header>
    <div class="entry">
      
        <p>在最近的一个项目中，遇到了<strong>IE6 select遮挡div</strong>的bug，为了解决这个bug我查了很多资料，试图找到一个最最有效的方法，很多人是通过<strong>iframe</strong>的方法来解决，其实我查了国外的很多资料也是通过iframe的方法来解决的。今天我说说iframe解决的一般方法，已经使用<strong>jQuery</strong>插件<strong>bgifram</strong>e解决IE6 select z-index无效，<strong>遮挡div</strong>的bug。</p>
<h3>解决方法之一：Iframe包裹select元素</h3>
<p>使用iframe包住select，这样iframe有z-index，只要在div上设置的z-index比iframe的高即可~这种方法有一定的局限性，不可能每个select都要加个iframe吧？所以<strong>不推荐</strong>！代码如下：</p>
<blockquote>
<figure class="highlight lang-html"><iframe"><figcaption><span>style="z-index:1;position: absolute; </span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="comment">&lt;!-- 用iframe 解决此bug --&gt;</span>     
&gt;             <span class="tag">&lt;<span class="title">select</span> <span class="attribute">name</span>=<span class="value">"country"</span>&gt;</span>                    
&gt;                  <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"1"</span>&gt;</span>china<span class="tag">&lt;/<span class="title">option</span>&gt;</span>     
&gt;                 <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"2"</span>&gt;</span>japanese<span class="tag">&lt;/<span class="title">option</span>&gt;</span>     
&gt;                 <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"1"</span>&gt;</span>U.S.A<span class="tag">&lt;/<span class="title">option</span>&gt;</span>     
&gt;              <span class="tag">&lt;/<span class="title">select</span>&gt;</span>     
&gt; <span class="tag">&lt;/<span class="title">iframe</span>&gt;</span>
</pre></td></tr></table></figure>

</blockquote>
<h3>解决方法之二：以Iframe作为div的子元素，覆盖select元素</h3>
<p>建立一个跟div同宽同高的iframe，并且z-index比div要低。这种方法<strong>推荐</strong>使用：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/06/17/解决ie6-select-z-index无效，遮挡div的bug/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/06/11/通过jsonp实现完美跨域/">通过JSONP实现完美跨域</a></h1>
  

      <time datetime="2010-06-11T12:17:47.000Z"><a href="/2010/06/11/通过jsonp实现完美跨域/">2010年6月11日</a></time>
    </header>
    <div class="entry">
      
        <p>以前我经常在博客说<strong>JSONP</strong>，例如我的<a href="http://js8.in/wordpress-weather" title="WordPress天气预报插件">WordPress天气插件</a>就是通过JSONP来调用的天气数据，今天就说说通过JSONP实现<strong>跨域</strong>的应用~</p>
<h3>什么是JSONP</h3>
<p>JSONP即JSON with Padding。由于同源策略的限制，XmlHttpRequest只允许请求当前源（域名、协议、端口）的资源。如果要进行跨域请求，我们可以通过使用 html的script标记来进行跨域请求，并在响应中返回要执行的script代码，其中可以直接使用JSON传递javascript对象。这种跨域的通讯方式称为JSONP。</p>
<p>对于上面的解释，我们可以简单这样理解：JSONP就是可以通过<strong>JavaScript</strong>文件进行跨域通讯的方式，例如：现在各大网站风靡的搜索提示，<a href="http://js8.in/314.html" title="搜狗云输入法解析">搜狗云输入法</a><br>注意：<strong>JSONP</strong>服务器端代码需要充分做好<strong>安全</strong>措施。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/06/11/通过jsonp实现完美跨域/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/05/24/ie-onchange事件触发bug？/">IE onchange事件触发bug？</a></h1>
  

      <time datetime="2010-05-24T15:33:32.000Z"><a href="/2010/05/24/ie-onchange事件触发bug？/">2010年5月24日</a></time>
    </header>
    <div class="entry">
      
        <p>今天遇到了IE一个<strong>onchange事件</strong>的bug，此bug存在于IE所有的版本（6,7,8）不知道是不是bug，还是IE故意这样设计的？姑且不做评价，我们来看看IE onchange事件的重现过程：</p>
<p>给input等控件添加onchange事件，例如input的checkbox（radio等），在IE下点击选中，并没有触发onchange事件，而需要再次失去焦点（点击页面的任何地方）的时候才可以触发onchange事件，而在Firefox下是点击选中checkbox既可以触发onchange事件的~</p>
<h3>bug重现代码</h3>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=utf-8"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">title</span>&gt;</span>IE onchange event bug<span class="tag">&lt;/<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">value</span>=<span class="value">"1"</span> <span class="attribute">onchange</span>=<span class="value">"alert(this.value);"</span> <span class="attribute">id</span>=<span class="value">"demo1"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">label</span> <span class="attribute">for</span>=<span class="value">"demo1"</span>&gt;</span>demo1<span class="tag">&lt;/<span class="title">label</span>&gt;</span>
<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">value</span>=<span class="value">"2"</span> <span class="attribute">onchange</span>=<span class="value">"alert(this.value);"</span> <span class="attribute">id</span>=<span class="value">"demo2"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">label</span> <span class="attribute">for</span>=<span class="value">"demo2"</span>&gt;</span>demo2<span class="tag">&lt;/<span class="title">label</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span><span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></td></tr></table></figure>

<h3>解决方法</h3>
<ol>
<li>在jQuery1.4.2中绑定change事件是完全可以解决的，而在jQuery1.3.2中绑定change事件是不行的，我们可以通过<strong>click</strong>事件来绑定</li>
<li>如果不怕麻烦也不介意绑定两次事件，可以使用IE自带的<strong>onpropertychange事件</strong>绑定change事件，断桥残雪测试是可以的，不过这样子在IE下就绑定了两次change事件，不推荐这个方法，如果是checkbox，radio等还是使用click事件来处理吧</li>
</ol>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/05/24/jquery插件wbox-1-0正式发布/">jQuery弹出框插件wBox 1.0正式发布</a></h1>
  

      <time datetime="2010-05-24T11:19:11.000Z"><a href="/2010/05/24/jquery插件wbox-1-0正式发布/">2010年5月24日</a></time>
    </header>
    <div class="entry">
      
        <p>jQuery插件<strong>wBox </strong>1.0正式发布——经过一系列的wBox需求分析，进行了wBox的代码重构，去除了一些鸡肋的功能~根据公司项目的需要进行了功能的调整，并且在界面上进行了美化处理~</p>
<p><a href="/uploads/2010/05/Snap2.jpg"><img src="/uploads/2010/05/Snap2.jpg" alt="wBox截图" title="wBox截图"></a></p>
<p><a href="http://js8.in/wbox/">查看wBox代码实例</a><a href="http://code.google.com/p/jquery-wbox/downloads/list" target="_blank">wBox1.0下载</a></p>
<h3>wBox新功能及其变化</h3>
<ol>
<li>优化代码~</li>
<li>美化界面~</li>
<li>默认可拖动，drag为false关闭</li>
<li>新增<strong>wBox</strong>关闭方法：wBox.close()</li>
<li>新增wBox打开方法：wBox.showBox()</li>
<li>新增wBox定时关闭设置：通过参数timeout设置定时关闭时间</li>
<li>新增在不触发click事件的前提，显示wBox，$(s).wBox({show:true})</li>
<li>去除灯箱功能（准备做一个单独的jQuery灯箱插件）</li>
<li>去除设置窗口位置
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/05/24/jquery插件wbox-1-0正式发布/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/05/13/javascript在光标位置插入内容/">javascript在光标位置插入内容</a></h1>
  

      <time datetime="2010-05-13T12:46:30.000Z"><a href="/2010/05/13/javascript在光标位置插入内容/">2010年5月13日</a></time>
    </header>
    <div class="entry">
      
        <p>之前我写过一篇文章是通过javascript获取<strong>光标</strong>的位置——<a href="http://js8.in/466.html" title="javascript获取光标位置以及设置光标位置">javascript获取光标位置以及设置光标位置</a>。由于产品需要在留言板的光标处上插入表情，这样就用到了<strong>javascript</strong>在光标位置插入内容的功能了~其实原理很简单，IE下可以通过<strong>document.selection.createRange</strong>();来实现，而Firefox（火狐）浏览器则需要首先获取光标位置，然后对value进行字符串截取处理。不多说了~直接上我写的一个<strong>jQuery</strong>在光标位置插入内容插件吧~</p>
<h3>jQuery在光标位置插入内容插件代码</h3>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/05/13/javascript在光标位置插入内容/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/05/03/javascript中模拟php的base64_decode和base64_encode函数/">Javascript中模拟PHP的base64_decode和base64_encode函数</a></h1>
  

      <time datetime="2010-05-03T08:45:43.000Z"><a href="/2010/05/03/javascript中模拟php的base64_decode和base64_encode函数/">2010年5月3日</a></time>
    </header>
    <div class="entry">
      
        <p>PHP中的base64_decode和base64_encode函数不再是PHP的独享，而JS也可以使用这两个函数，下面把JS中的base64_decode和base64_encode函数贴出来，希望对需要的童鞋有所帮助~</p>
<h3>javscript的base64_decode</h3>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/05/03/javascript中模拟php的base64_decode和base64_encode函数/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/04/22/通过javascript实现整站黑白效果/">通过javascript实现整站黑白效果</a></h1>
  

      <time datetime="2010-04-22T08:23:00.000Z"><a href="/2010/04/22/通过javascript实现整站黑白效果/">2010年4月22日</a></time>
    </header>
    <div class="entry">
      
        <p>前天是哀悼日，急急忙忙的写了一篇关于通过CSS使网站实现<strong>黑白效果</strong>的文章（<a href="http://js8.in/528.html" title="哀悼地震，实现整站黑白效果">悼念地震，网站变灰CSS代码</a>），可是这个方法使用的是IE的<strong>滤镜</strong>，具有一定的局限性。今天在网上看到有人推荐的一个不错的方法，试了一下，效果还是可以的，可以自定义让网页的某一部分变成灰度颜色(<strong>黑白</strong>)，演示效果：<a href="http://james.padolsey.com/demos/grayscale/" target="_blank"><a href="http://james.padolsey.com/demos/grayscale/">http://james.padolsey.com/demos/grayscale/</a></a>。并且支持Firefox，chrome，IE6+。</p>
<p>使用方法：</p>
<ol>
<li>首先在网页中引入<a href="http://james.padolsey.com/demos/grayscale/grayscale.js" target="_blank">grayscale.js</a>文件。</li>
<li>执行grayscale函数即可。</li>
</ol>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>grayscale(document.body);  <span class="comment">//整站变成黑白效果</span>
grayscale(getElementById(el));<span class="comment">//部分变黑白效果</span>
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/04/20/悼念地震，网站变灰css代码/">悼念地震，网站变灰CSS代码</a></h1>
  

      <time datetime="2010-04-19T18:15:07.000Z"><a href="/2010/04/20/悼念地震，网站变灰css代码/">2010年4月20日</a></time>
    </header>
    <div class="entry">
      
        <p>为了悼念地震中遇害的同胞，国家规定明天开始悼念日~下面贴出来使用CSS的IE滤镜代码实现网站变灰白的效果代码，只在IE下有效~<br>首先确定贵网站使用的是标准的doctype头，下面是html开头代码：</p>
<figure class="highlight lang-html"><!DOCTYPE"><figcaption><span>html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</span></figcaption><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>
<span class="tag">&lt;<span class="title">html</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.w3.org/1999/xhtml"</span>&gt;</span>
</pre></td></tr></table></figure>

<p>然后使用下面的CSS代码</p>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="tag">html</span> <span class="rules">{
    <span class="rule"><span class="attribute">filter</span>:<span class="value">progid:DXImageTransform.Microsoft.<span class="function">BasicImage(grayscale=<span class="number">1</span>)</span>;</span></span> 
<span class="rule">}</span></span>
</pre></td></tr></table></figure>

<p>如果贵网站有Flash，那么请在&lt;object&gt;和&lt;&amp;/object&gt;之间插入一下代码：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">param</span> <span class="attribute">value</span>=<span class="value">”false”</span> <span class="attribute">name</span>=<span class="value">”menu”</span>/&gt;</span>
<span class="tag">&lt;<span class="title">param</span> <span class="attribute">value</span>=<span class="value">”opaque”</span> <span class="attribute">name</span>=<span class="value">”wmode”</span>/&gt;</span>
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/03/17/26大实用的jquery技巧和解决方案/">25大实用的jQuery技巧和解决方案</a></h1>
  

      <time datetime="2010-03-17T14:45:42.000Z"><a href="/2010/03/17/26大实用的jquery技巧和解决方案/">2010年3月17日</a></time>
    </header>
    <div class="entry">
      
        <p>jQuery库的发展迅速（刚刚发布的jQuery的1.4），越来越多的人正在使用这个有用的JavaScript库。这意味着，需要越来越多的有用jQuery的提示，技巧和解决方案来提供。这就是为什么我创建了26个实用的jQuery的提示、技巧和解决方案的小清单。</p>
<h3>1. 去除页面的右键菜单</h3>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>$(document).ready(<span class="keyword">function</span>(){  
&gt;     $(document).bind(<span class="string">"contextmenu"</span>,<span class="keyword">function</span>(e){  
&gt;         <span class="keyword">return</span> <span class="literal">false</span>;  
&gt;     });  
&gt; });  
&gt;
</pre></td></tr></table></figure>

</blockquote>
<h3>2、搜索输入框文字的消失</h3>
<p>当鼠标获得焦点、失去焦点的时候，input输入框文字处理：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>$(document).ready(<span class="keyword">function</span>() {  
&gt; $(<span class="string">"input.text1"</span>).val(<span class="string">"Enter your search text here"</span>);  
&gt;    textFill($(<span class="string">'input.text1'</span>));  
&gt; });  
&gt;   <span class="function"><span class="keyword">function</span> <span class="title">textFill</span><span class="params">(input)</span>{</span> <span class="comment">//input focus text function  </span>
&gt;     <span class="keyword">var</span> originalvalue = input.val();  
&gt;     input.focus( <span class="keyword">function</span>(){  
&gt;         <span class="keyword">if</span>( $.trim(input.val()) == originalvalue ){ input.val(<span class="string">''</span>); }  
&gt;     });  
&gt;     input.blur( <span class="keyword">function</span>(){  
&gt;         <span class="keyword">if</span>( $.trim(input.val()) == <span class="string">''</span> ){ input.val(originalvalue); }  
&gt;     });  
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<h3>3、新窗口打开页面</h3>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>$(document).ready(<span class="keyword">function</span>() {  
&gt;    <span class="comment">//Example 1: Every link will open in a new window  </span>
&gt;    $(<span class="string">'a[href^="http://"]'</span>).attr(<span class="string">"target"</span>, <span class="string">"_blank"</span>);  
&gt; 
&gt;    <span class="comment">//Example 2: Links with the rel="external" attribute will only open in a new window  </span>
&gt;    $(<span class="string">'a[@rel$='</span>external<span class="string">']'</span>).click(<span class="keyword">function</span>(){  
&gt;       <span class="keyword">this</span>.target = <span class="string">"_blank"</span>;  
&gt;    });  
&gt; });
</pre></td></tr></table></figure>

<p>// how to use  </p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>[open link](http://www.opensourcehunter.com)
</pre></td></tr></table></figure>

</blockquote>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/03/17/26大实用的jquery技巧和解决方案/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/03/08/jquery插件-wbox发布/">jQuery插件--wBox发布</a></h1>
  

      <time datetime="2010-03-08T13:56:44.000Z"><a href="/2010/03/08/jquery插件-wbox发布/">2010年3月8日</a></time>
    </header>
    <div class="entry">
      
        <p>经过大约一周的时间，wBox终于跟大家见面啦，这是<a href="http://js8.in">断桥残雪</a>写的第一个jQuery插件，开发时间比较急促，所以有不足之处希望大家指出。</p>
<p><strong><a href="http://code.google.com/p/follow5api/downloads/list" target="_blank">wBox</a></strong>——轻量级的弹出窗口<strong>jQuery插件</strong>，基于jQuery1.4开发，主要实现弹出框的效果，并且加入了很多有趣的功能，比如可img灯箱效果，callback函数，显示隐藏层，Ajax页面，iframe嵌入页面……</p>
<ol>
<li>背景透明度可以根据实际情况进行调节，甚至不设置背景</li>
<li>可以根据需要添加wBox标题</li>
<li>支持设置窗口位置，默认为在中心显示</li>
<li>支持callback函数</li>
<li>支持html内容自定义</li>
<li>img灯箱看图功能</li>
<li>支持在wBox显示#ID的内容</li>
<li>支持Ajax页面内容</li>
<li>支持设置背景，不设置背景</li>
<li>支持wBox拖拽功能</li>
<li>ESC键，或者在背景上双击即可关闭wBox</li>
<li>.wBoxClose的内容click可以关闭wBox，无论是组装的html，还是隐藏的html，甚至于iframe的内容中的.wBoxClose<br>下面简单介绍下wBox的使用方法：</li>
</ol>
<h3>最简单的使用方法</h3>
<ol>
<li>首先<a href="http://code.google.com/p/follow5api/downloads/list" title="下载wbox" target="_blank">下载wBox</a>文件，然后将wBox中的</li>
<li>引入wbox.js文件</li>
<li>引入wbox.css文件</li>
<li><span style="color: #ff6600;"><strong>注意</strong></span>：wBox源代码文件夹中的图片要跟js，css放在相同的目录下,loading.gif要跟你页面放在同一个目录<br>html代码如下：</li>
</ol>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>[这是一个隐藏wBox](#nosee)
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"nosee"</span> <span class="attribute">style</span>=<span class="value">"display:none"</span>&gt;</span>这里是个隐藏的id为nosee的DIV<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
[这是一个image wBox](http://js8.in/wbox/001.jpg)
</pre></td></tr></table></figure>

<p>js代码如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>$(<span class="string">".wBox"</span>).wBox();
</pre></td></tr></table></figure>

<p>这样就建立了一个最简单的wBox.</p>
<p><div id="nosee" style="display:none">这里是个隐藏的id为nosee的DIV</div><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/03/08/jquery插件-wbox发布/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/03/08/ie中image-onload失效的问题/">IE中Image.onload失效的问题</a></h1>
  

      <time datetime="2010-03-08T08:43:02.000Z"><a href="/2010/03/08/ie中image-onload失效的问题/">2010年3月8日</a></time>
    </header>
    <div class="entry">
      
        <p>最近在做wBox开发中，需要做一个图片的幻灯片效果，为了方便加载速度，我使用了<strong>new Iamge</strong>的对象方法来<strong>预加载图片</strong>，当图片onLoad就运行一个函数来计算图片的大小尺寸，进行<a href="http://js8.in/451.html" title="jQuery easing动画效果扩展">jQuery动画</a>，以及切换图片src，在firefox下开发完成后，可是到了IE下进行调试总是不会触发<strong>onload</strong>事件，不管是IE8、IE7还是万恶的IE6，都不会触发onload事件，我很迷惑，后来在google上找到了<strong>解决</strong>的方法：一下为引用部分</p>
<p>最初的代码如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> img = <span class="keyword">new</span> Image;
img.src = <span class="string">"test.gif"</span>;
img.onload = <span class="keyword">function</span>(){
    alert ( img.width );
};
</pre></td></tr></table></figure>

<p>这段代码看着没什么问题，但是为什么onload没有被IE调用呢？因为IE会缓存图片，第2次加载的图片，不是从服务器上传过来的，而是从缓冲区里加载的。是不是从缓冲区里加载的图片就不触发onload事件呢？我于是我测试了以下代码，成功了～</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> img = <span class="keyword">new</span> Image;
img.onload = <span class="keyword">function</span>(){
    alert ( img.width );
};
img.src = <span class="string">"test.gif"</span>;
</pre></td></tr></table></figure>

<p>我把onload写到前面去，先告诉浏览器如何处理这张图片，再指定这张图片的源，这样就正常了。所以，不是IE没有触发onload事件，而是因为加载缓冲区的速度太快，以至于没有运行到img.onload的时候，onload事件已经触发了。这让我想到了Ajax，我们在写xmlhttp的时候，都是先指定onstatechange的回调函数，然后再send数据的，道理是一样的。</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/03/05/jquery实现拖拽功能/">jQuery实现拖拽功能</a></h1>
  

      <time datetime="2010-03-04T18:36:59.000Z"><a href="/2010/03/05/jquery实现拖拽功能/">2010年3月5日</a></time>
    </header>
    <div class="entry">
      
        <p>在360开发中，使用了我写的一个jQuery wBox插件，可是这个wBox只是根据项目需要进行的修改，没有加上拖拽功能，而我正在写新的wBox插件加上了简单的拖拽功能，wBox已经进行到最后样式修改、程序调试阶段，基本功能已经实现。言归正传，结合wBox部分源代码说说jQuery的拖拽功能实现。<br><a href="/uploads/2010/03/Snap1.jpg"><img src="/uploads/2010/03/Snap1.jpg" alt="jQuery wBox插件预览" title="jQuery wBox插件预览"></a></p>
<p>要写一个拖拽效果，必须区分开mousedown，mouseup，mousemove 三个鼠标的不同状态，当mousedown的时候激发拖拽，表示拖拽开始，当mouseup的时候自然拖拽就结束，而mousemove的时候是拖拽的过程，这个过程就要不停的获取鼠标的位置，根据鼠标运动到得位置设置要拖拽的目标div的位置，具体就不解释啦，很简单的原理，很简单的代码，放出wBox drag部分的代码，希望对大家有用，C为拖拽的目标对象： 
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/03/05/jquery实现拖拽功能/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/02/21/使用css设置文字反选的背景颜色/">使用CSS设置文字反选的背景颜色</a></h1>
  

      <time datetime="2010-02-21T11:51:39.000Z"><a href="/2010/02/21/使用css设置文字反选的背景颜色/">2010年2月21日</a></time>
    </header>
    <div class="entry">
      
        <p>在计算机操作中经常会有<strong>反选</strong>出现，系统一般会根据选择区域的颜色，显示出补色。但windows默认的文字选择时，背景为蓝色，前景色为白色，如果背景是深色，则文字为蓝色，<strong>背景</strong>变成白色。如下图所示：</p>
<p><a href="/uploads/2010/02/b201022115279.gif"><img src="/uploads/2010/02/b201022115279.gif" alt="反选默认样式" title="反选默认样式"></a></p>
<p>能不能改变选择的默认颜色呢，也许很多人对这个问题不是很在意，也可能你早就见到过这个效果了，但是却忽略了。<a href="http://www.quirksmode.org/css/selection.html" target="_blank">查看示例</a>(<span style="color: #00ccff;">请在非IE浏览器下查看</span>)</p>
<p>从博客里可以看到PPK给出了如下的CSS代码：</p>
<blockquote>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="pseudo">::-moz-selection</span><span class="rules">{    <span class="comment">/*针对Firefox*/</span>
<span class="rule">&gt;     <span class="attribute">background</span>:<span class="value"><span class="hexcolor">#cc0000</span>;</span></span>
<span class="rule">&gt;     <span class="attribute">color</span>:<span class="value"><span class="hexcolor">#fff</span>;</span></span>
<span class="rule">&gt; }</span></span>
&gt; 
&gt; <span class="pseudo">::selection</span> <span class="rules">{
<span class="rule">&gt;     <span class="attribute">background</span>:<span class="value"><span class="hexcolor">#cc0000</span>;</span></span>
<span class="rule">&gt;     <span class="attribute">color</span>:<span class="value"><span class="hexcolor">#fff</span>;</span></span>
<span class="rule">&gt; }</span></span>
&gt; 
&gt; <span class="tag">code</span><span class="pseudo">::-moz-selection</span> <span class="rules">{  <span class="comment">/*code是标签选择器，可以换成p或span等*/</span>
<span class="rule">&gt;     <span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#333333</span>;</span></span>
<span class="rule">&gt; }</span></span>
&gt; 
&gt; <span class="tag">code</span><span class="pseudo">::selection</span> <span class="rules">{
<span class="rule">&gt;     <span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#333333</span>;</span></span>
<span class="rule">&gt; }</span></span>
</pre></td></tr></table></figure>

</blockquote>
<p>通过以上代码可以看出，你完全可以给不同的容器定义不同的反选背景颜色，</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/02/09/javascript事件触发列表与详解/">Javascript事件触发列表与详解</a></h1>
  

      <time datetime="2010-02-09T09:06:53.000Z"><a href="/2010/02/09/javascript事件触发列表与详解/">2010年2月9日</a></time>
    </header>
    <div class="entry">
      
        <p>今天在司徒正美（<a href="http://www.cnblogs.com/rubylouvre/archive/2010/02/09/1632990.html" target="_blank">原文</a>）的博客上看见一个关于javascript事件触发列表的文章，感觉不错，拿来给大家分享一下，本文中涉及到了很多javascript的事件，有不同浏览器差异的事件，大家必要的时候可以做以下参考<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/02/09/javascript事件触发列表与详解/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/02/08/cssjquery实现滑动幻灯片实例详解/">CSS+jQuery实现滑动幻灯片实例详解</a></h1>
  

      <time datetime="2010-02-08T10:18:01.000Z"><a href="/2010/02/08/cssjquery实现滑动幻灯片实例详解/">2010年2月8日</a></time>
    </header>
    <div class="entry">
      
        <p>今天我看见一个比较不错的<strong>jQuery幻灯片</strong>教程，比我之前的文章《<a href="http://js8.in/462.html" title="两个简单的jQuery幻灯片实例">两个简单的jQuery幻灯片实例</a>》写的更为详细，并且有框架布局的演示图片，特地转载来，部分英文不翻译了，很简单的~</p>
<h3>HTML部分代码</h3>
<p>Start with having a wrapping container div called <em>main_view</em>, and two sections nested inside called <em>image_reel</em> and <em>paging.</em> The <em>image_reel _will contain the sliding images, and _paging</em> contains the paging controls. Take a look at the image below for a visual.</p>
<blockquote>
<figure class="highlight lang-html"><div"><figcaption><span>class="main_view</span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre>
&gt;     <span class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"window"</span>&gt;</span>
&gt;         <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"image_reel"</span>&gt;</span>
&gt;             [![](reel_1.jpg)](#)
&gt;             [![](reel_2.jpg)](#)
&gt;             [![](reel_3.jpg)](#)
&gt;             [![](reel_4.jpg)](#)
&gt;         <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
&gt;     <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
&gt;     <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"paging"</span>&gt;</span>
&gt;         [1](#)
&gt;         [2](#)
&gt;         [3](#)
&gt;         [4](#)
&gt;     <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
&gt; <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span>
</pre></td></tr></table></figure>

</blockquote>
<p><a href="http://js8.in/mywork/jq_slider/"><img src="/uploads/2010/02/1.jpg" alt="css+jQuery实现滑动幻灯片实例教程" title="css+jQuery实现滑动幻灯片实例教程"></a><br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/02/08/cssjquery实现滑动幻灯片实例详解/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/02/07/less—让css如此简单/">Less—让CSS如此简单</a></h1>
  

      <time datetime="2010-02-07T09:47:27.000Z"><a href="/2010/02/07/less—让css如此简单/">2010年2月7日</a></time>
    </header>
    <div class="entry">
      
        <p><a href="/uploads/2010/02/less.png"><img src="/uploads/2010/02/less.png" alt="less" title="less"></a></p>
<p>写<strong>CSS</strong> 最痛苦的是要搞定一堆<strong>浏览器兼容</strong>bug ，其次就是要面对CSS 不是programming language 这现实，不存在其他程式语言常见的变数、运算、继承等概念，使原本简单的工作变得冗长，并且使维护工作变得麻烦。<br><strong>less</strong> 的出现便是为了解决这个问题：在现有CSS syntax 的基础上，为CSS 加入程式语言的特性，包括变数、scope、nested rules、运算、继承。<br>看例子你便会明白：</p>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre>@brand_color: #F0F;

#container {
div {
color: @brand_color;
border: none; }
p {
color: @brand_color;
}
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/02/07/less—让css如此简单/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/02/04/javascript正则表达式详解/">Javascript正则表达式详解</a></h1>
  

      <time datetime="2010-02-03T17:57:08.000Z"><a href="/2010/02/04/javascript正则表达式详解/">2010年2月4日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>js正则表达式</strong>是很多js开发人员比较头疼的事情，也很多人不愿意学习，只是必要的时候上网查一下就可以啦~本文中详细的把javascript正则表达式的用法进行了列表，希望对于大家学习<strong>javascript正则</strong>表达式有一定的帮助。</p>
<p><strong>建立正则表达式对象语法
</strong>re = new <span style="color: #008080; padding: 0px; margin: 0px;">RegExp</span>(/pattern/[flags])</p>
<p><strong>flags 参数说明：
</strong><span style="color: #ff6600; padding: 0px; margin: 0px;">g</span> （全文查找出现的所有 <em>pattern</em>）<br><span style="color: #ff6600; padding: 0px; margin: 0px;">i</span> （忽略大小写）<br><span style="color: #ff6600; padding: 0px; margin: 0px;">m</span> （多行查找）</p>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/02/04/javascript正则表达式详解/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/01/29/javascript设置光标位置到结尾并显示出来/">Javascript设置光标位置到结尾并显示出来</a></h1>
  

      <time datetime="2010-01-29T12:58:13.000Z"><a href="/2010/01/29/javascript设置光标位置到结尾并显示出来/">2010年1月29日</a></time>
    </header>
    <div class="entry">
      
        <p>今天同事问一个关于<strong>光标</strong>移动到输入框最后的问题，问题得到了解决（详情请见《<a href="https://developer.mozilla.org/en/DOM/event.initKeyEvent" title="Javascript获取光标位置以及设置光标位置" target="_blank">Javascript获取光标位置以及设置光标位置</a>》），并且兼容IE、Firefox、Opera，可是又有了新问题：假如输入的内容过多，而<strong>Input</strong>已经不能显示最后部分的内容，光标即使移动到了最后，也是不能显示出来的。他要的效果是，类似于输入那种效果，当输入文字之后，内容往左走，这样光标就一直在最后显示，而不会出现光标虽然出现在输入框最后可是不能显示出来的现象。</p>
<h3>原理</h3>
<p>在Firefox我想的方法是模拟一次<strong>键盘事件</strong>：<br>如先建立<strong>document.createEvent(“KeyboardEvent”)</strong>，然后光标移动到输入框最后，然后输入一个空格，在删除空格，这样子光标就会有在输入框最后不出现变为出现了~详细方法请见：<a href="https://developer.mozilla.org/en/DOM/event.initKeyEvent" target="_blank">Mozilla Developer Center</a></p>
<h3>JS代码</h3>
<p>函数setCaretPosition代码如下：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/01/29/javascript设置光标位置到结尾并显示出来/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/01/29/javascript获取光标位置以及设置光标位置/">javascript获取光标位置以及设置光标位置</a></h1>
  

      <time datetime="2010-01-29T11:31:54.000Z"><a href="/2010/01/29/javascript获取光标位置以及设置光标位置/">2010年1月29日</a></time>
    </header>
    <div class="entry">
      
        <p>在项目开发中经常遇到<strong>input</strong>等设置光标位置到最后的问题，今天我查了一下Google，找到了在<strong>IE</strong>、<strong>Firefox</strong>、<strong>Opera</strong>等主流浏览器的获取光标位置（getCursortPosition）以及设置<strong>光标位置</strong>（setCursorPosition）的函数。</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">getCursortPosition</span> <span class="params">(ctrl)</span> {</span><span class="comment">//获取光标位置函数</span>
&gt; 	<span class="keyword">var</span> CaretPos = <span class="number">0</span>;	<span class="comment">// IE Support</span>
&gt; 	<span class="keyword">if</span> (document.selection) {
&gt; 	ctrl.focus ();
&gt; 		<span class="keyword">var</span> Sel = document.selection.createRange ();
&gt; 		Sel.moveStart (<span class="string">'character'</span>, -ctrl.value.length);
&gt; 		CaretPos = Sel.text.length;
&gt; 	}
&gt; 	<span class="comment">// Firefox support</span>
&gt; 	<span class="keyword">else</span> <span class="keyword">if</span> (ctrl.selectionStart || ctrl.selectionStart == <span class="string">'0'</span>)
&gt; 		CaretPos = ctrl.selectionStart;
&gt; 	<span class="keyword">return</span> (CaretPos);
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/01/29/javascript获取光标位置以及设置光标位置/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/01/26/使用hash来实现ajax前进后退/">使用hash来实现Ajax前进后退</a></h1>
  

      <time datetime="2010-01-26T08:22:12.000Z"><a href="/2010/01/26/使用hash来实现ajax前进后退/">2010年1月26日</a></time>
    </header>
    <div class="entry">
      
        <p>Ajax应用中容易导致浏览器的<strong>前进后退</strong>按钮失效，不产生前进后退功能，在本文中断桥残雪就通过改变<strong>location.hash</strong>值来解决Ajax过程中导致的浏览器前进后退按键失效的问题，此方法兼容IE6+，Firefox，chrome，Safari，Opera等浏览器。</p>
<p>在去年断桥残雪已经写了一篇<a href="http://js8.in/311.html" title="关于Ajax在浏览器中产生前进后退的实现方法">使用iframe来解决Ajax前进后退</a>的方法，也提到了通过改变hash的方法来解决这个问题，这也是比较方便的方法，而使用iframe实现Ajax前进后退可以在不改变浏览器地址栏地址的前提下通过iframe地址的变化来“欺骗”浏览器产生前进后退，hash的方法则是直接改变浏览器地址栏地址，从而使浏览器产生前进后退。</p>
<h3>hash导致浏览器产生前进后退原理</h3>
<p>浏览器URL的hash值，指的是URL地址之后的<strong>#hash</strong>部分，我们可以通过JavaScript的location对象的<strong>location.hash</strong>方法来获得或者改变，但是IE中，不能设置，好像是IE中只能通过连接来实现hash的改变，不过我们可以通过jQuery插件hashchange中的$.locationHash函数来解决这个问题。</p>
<p>比如一个页面的地址是：<a href="http://js8.in/#top，那么这个页面的location.hash=&quot;#top&quot;，如果要改变这个地址的hash，可以给location.hash赋值，如：location.hash=&quot;#home&quot;，在IE下可以使用hashchange函数中$.locationHash(hash)给hash赋值。在日常我们常见的使用hash应用中，hash值使用最多的方式是">http://js8.in/#top，那么这个页面的location.hash=&quot;#top&quot;，如果要改变这个地址的hash，可以给location.hash赋值，如：location.hash=&quot;#home&quot;，在IE下可以使用hashchange函数中$.locationHash(hash)给hash赋值。在日常我们常见的使用hash应用中，hash值使用最多的方式是</a> “<strong>返回顶部</strong>” 功能。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/01/26/使用hash来实现ajax前进后退/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/01/25/使用javascript在ie和firefox下进行iframe的dom操作/">使用JavaScript在IE和Firefox下进行iframe的DOM操作</a></h1>
  

      <time datetime="2010-01-25T12:59:38.000Z"><a href="/2010/01/25/使用javascript在ie和firefox下进行iframe的dom操作/">2010年1月25日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天一个新来的同事关于<strong>iframe</strong>中进行<strong>DOM操作</strong>的问题，我说只要是不存在跨域的问题，是可以进行iframe 之间的DOM操作的。并且拿了以前写的两篇文章给新同事进行参考——《<a href="http://js8.in/443.html" title="用document.domain+iframe实现Ajax跨子域">用document.domain+iframe实现Ajax跨子域</a>》、《<a href="http://js8.in/311.html" title="于Ajax在浏览器中产生前进后退的实现方法">于Ajax在浏览器中产生前进后退的实现方法</a>》。其中关于使用iframe进行跨域的<a href="http://js8.in/mywork/crossdomain/index.html" title="iframe跨域演示实例">demo</a>，由于更换了新域名<strong>js8.in</strong>，导致了<a href="http://js8.in/mywork/crossdomain/index.html">demo</a>不能使用了，昨天紧急修改了一下，总算是可以使用啦~窃喜~</p>
<p>今天就写个完整的使用<strong>JavaScript</strong>进行iframe DOM操作的文章啦~跟大家讨论下IE和Firefox下<strong>iframe DOM操作</strong>的差异，然后写一个父窗口操作子窗口DOM，子窗口操作父窗口DOM，子窗口操作子窗口DOM的实例。经测试，断桥残雪写的iframe DOM操作实例，不仅仅只是在IE和Firefox下使用正常，而是可以<strong>兼容所有浏览器的</strong>。本文只是借IE和Firefox在iframe DOM操作的不同，进行分析说明JavaScript在DOM操作中两者的不同。</p>
<h3>IE和Firefox对iframe document对象的差异性</h3>
<p>在IE6、IE7中，我们可以使用 <strong>document.frames[ID].document</strong> 来访问iframe子窗口中的<strong>document对象</strong>，可是这是不符合W3C标准的写法，也是IE下独有的方法，在Firefox下却不可以使用，Firefox下使用的是符合W3C标准的 <strong>document.getElementById(ID).contentDocument </strong>方法，今天我在写实例的时候，通过IE8进行测试，IE8也是使用的符合W3C标准的 document.getElementById(ID).contentDocument 方法。所以我们可以写一个在IE和Firefox下通用的获取iframe document对象的函数—getIFrameDOM：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">getIFrameDOM</span><span class="params">(id)</span>{</span>
&gt; 	<span class="keyword">return</span> document.getElementById(id).contentDocument || document.frames[id].document;
&gt; }
</pre></td></tr></table></figure>

</blockquote>
<p><em>P.S.</em>:如果我们要获取iframe的<strong>window对象</strong>，而不是document对象，可以使用document.getElementById(ID).contentWindow的方法。这样我们就可以使用子窗口中的window对象了，比如子窗口中的函数。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/01/25/使用javascript在ie和firefox下进行iframe的dom操作/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/01/15/jquery-easing-动画效果扩展/">jQuery Easing 动画效果扩展</a></h1>
  

      <time datetime="2010-01-15T10:21:10.000Z"><a href="/2010/01/15/jquery-easing-动画效果扩展/">2010年1月15日</a></time>
    </header>
    <div class="entry">
      
        <p>最近<strong>断桥残雪部落格</strong>的<a href="http://js8.in" title="断桥残雪部落格首页">首页</a>文章添加了“点击展开/关闭”文章功能，并且返回顶部、跳到评论等功能进行了动画效果的修改，此次修改使用了jQuery Easing动画效果扩展插件：<a href="http://gsgd.co.uk/sandbox/jquery/easing/" title="jQuery Easing动画效果插件" target="_blank">jQuery Easing Plugin</a>。在jQuery文档中我们可以看到，自定义动画函数<strong>.animate()</strong>有四个参数：</p>
<blockquote>
<p><strong>params </strong>(Options) : 一组包含作为动画属性和终值的样式属性和及其值的集合<br><strong> duration</strong> (String,Number) : (可选) 三种预定速度之一的字符串(“slow”, “normal”, or “fast”)或表示动画时长的毫秒数值(如：1000)<br><strong> easing</strong> (String) : (可选) 要使用的擦除效果的名称(需要插件支持).默认jQuery提供“linear” 和 “swing”.<br><strong> callback</strong> (Function) : (可选) 在动画完成时执行的函数<br>其中参数<strong>easing</strong>默认有两个效果：“linear”和“swing”，如果需要更多就要插件支持了，也就是今天断桥残雪要跟大家分享的插件：<a href="http://gsgd.co.uk/sandbox/jquery/easing/" title="jQuery Easing动画效果插件" target="_blank">jQuery Easing Plugin</a>.</p>
</blockquote>
<p>在jQuery Easing中设置了easeInElastic、easeOutElastic、easeInOutElastic等共31中不同的效果，应该可以满足大家的需要啦，如果你还想研究下动画移动的效果图，还可以看一下<a href="http://james.padolsey.com/demos/jquery/easing/" target="_blank">这篇文章</a>不仅有动画演示，还有图片分析。
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/01/15/jquery-easing-动画效果扩展/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/01/14/png在ie6下透明的几种方法/">png在IE6下透明的几种方法</a></h1>
  

      <time datetime="2010-01-14T10:47:44.000Z"><a href="/2010/01/14/png在ie6下透明的几种方法/">2010年1月14日</a></time>
    </header>
    <div class="entry">
      
        <p>断桥残雪在《<a href="http://js8.in/380.html" title="IE6 PNG图片不透明问题的解决方法">IE6 PNG图片不透明问题的解决方法</a>》中提到了使用js来解决IE6下PNG图片不透明的问题，今天我总结一下png在IE6下透明的方法：<strong>css方法</strong>、<strong>js方法</strong>、<strong>htc方法</strong>。</p>
<p>png透明针对IE6一直是件挺麻烦的事情，使用的方法也是各有不同，大多的原理是用IE的滤镜来解决的。</p>
<blockquote>
<p>语法：<br>filter : progid:DXImageTransform.Microsoft.AlphaImageLoader ( enabled=bEnabled , sizingMethod=sSize , src=sURL )</p>
<p>enabled : 可选项。布尔值(Boolean)。设置或检索滤镜是否激活。true | false true : 默认值。滤镜激活。<br>false : 滤镜被禁止。<br>sizingMethod : 可选项。字符串(String)。设置或检索滤镜作用的对象的图片在对象容器边界内的显示方式。 crop : 剪切图片以适应对象尺寸。<br>image : 默认值。增大或减小对象的尺寸边界以适应图片的尺寸。scale : 缩放图片以适应对象的尺寸边界。<br>src : 必选项。字符串(String)。使用绝对或相对 url 地址指定背景图像。假如忽略此参数，滤镜将不会作用。<br>现在一般在使用的方法有以下几种：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/01/14/png在ie6下透明的几种方法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2010/01/09/用document-domainiframe实现ajax跨子域/">用document.domain+iframe实现Ajax跨子域</a></h1>
  

      <time datetime="2010-01-08T17:03:36.000Z"><a href="/2010/01/09/用document-domainiframe实现ajax跨子域/">2010年1月9日</a></time>
    </header>
    <div class="entry">
      
        <p>Ajax跨域一直是个比较麻烦的问题，例如：断桥残雪在一个项目中使用了open打开一个跟父窗口不同域名的新页面，结果子窗口就不能传值给父窗口了；再如：我在www.2fool.cn下不可以获取love.2fool.cn域名下的页面内容。<strong>浏览器的跨域</strong>限制是为了安全，可是当我们想要在一个域名下请求另外一个域名的内容的时候就感觉不那么爽了。</p>
<p>我在<a href="http://js8.in/wordpress-weather" title="wordpress来访者天气预报插件">WordPress天气插件</a>、<a href="http://js8.in/441.html" title="使用滔滔给WordPress添加博主状态">滔滔API接口</a>处理上都使用了<strong>JSONP</strong>的方法来实现的跨域。而今天我要通过使用JS的<a href="http://js8.in/443.html" title="用document.domain+iframe实现Ajax跨子域">document.domain和iframe来解决Ajax跨子域的问题</a>。</p>
<h3>原理</h3>
<p>通过给主页面跟请求页面设置相同的document.domain来，欺骗浏览器，达到<strong>Ajax跨子域</strong>的效果，此方法在IE，chrome，Firefox，Safari，Opera下测试通过。</p>
<p><strong>缺点：</strong>无法实现不同主域名之间的通讯。并且当在一个页面中还包含有其它的iframe时，会产生安全性异常，拒绝访问。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2010/01/09/用document-domainiframe实现ajax跨子域/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/27/jquery选择器使用详解/">jQuery选择器使用详解</a></h1>
  

      <time datetime="2009-12-27T10:46:56.000Z"><a href="/2009/12/27/jquery选择器使用详解/">2009年12月27日</a></time>
    </header>
    <div class="entry">
      
        <p>随着jQuery的风靡，有很多关于<strong>jQuery选择器</strong>的文章，可是很多人没有系统的学过或者总结过jQuery的选择器使用方法，本文主要跟大家讨论一下jQuery的选择器的用法，针对于不同的jQuery用户，从基础说起，带您领略jQuery强大的选择器。</p>
<p>在跟大家分享自己的jQuery选择器的使用方法之前，我想跟大家说一个Tip，当你使用jQuery选择器的时候，有时候我们却不一定使用jQuery的选择器里面的函数，而是要简单的返回HTML对象，如果使用getElementById之类选择出HTML对象，就比较麻烦了，再说我们强大的jQuery选择器就浪费了，在这里我通过Firebug查看了jQuery选择器返回的对象，发现原来<strong>$(“#id”)[0]</strong>就是我们要的HTML对象，比如我们要取其中的innerHTML就可以使用$()[0].innerHTML。</p>
<h3>关于jQuery选择器</h3>
<p>通过<a href="http://jquery-api-zh-cn.googlecode.com/svn/trunk/index.html" title="jQuery参考手册" target="_blank">jQuery的参考手册</a> 我们可以看见jQuery的选择器分为：基本、层次、简单筛选、内容、可见性筛选、属性筛选、子元素、表单以及表单及其属性，共九种选择器类型，本文主要介绍基本选择器、属性、简单筛选、内容筛选这几个常用的选择器。如果能熟练掌握这几个选择器，那么我们的<strong>jQuery选择器</strong>就已经很熟练了</p>
<h3>jQuery基本选择器</h3>
<p>jQuery的选择器跟CSS的选择器很接近，甚至于跟CSS的选择器统一，这样就比较容易学习，简单选择器就是我们常用的CSS的ID和Class选择器，例如下面的代码把id为world的html内容改为“Hello World!”<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/12/27/jquery选择器使用详解/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/25/javascript跨浏览器的添加删除事件绑定函数/">JavaScript跨浏览器的添加删除事件绑定函数</a></h1>
  

      <time datetime="2009-12-25T10:31:13.000Z"><a href="/2009/12/25/javascript跨浏览器的添加删除事件绑定函数/">2009年12月25日</a></time>
    </header>
    <div class="entry">
      
        <p>现在浏览器太多了也使我们前端开发人员慌了手脚，今天<a href="http://oncoding.cn" target="_blank">刘洋</a>在写《<a href="http://www.oncoding.cn/2009/translate-tool-bookmark/" target="_blank">教程：编写放在收藏夹里的网页划词翻译工具</a>》的时候，问起来绑定事件的函数，由于一直使用<strong>jQuery</strong>开发，我都差点忘记了最原始的<strong>js添加绑定事件</strong>的方法啦~抽空立马写两个函数，以备不时之需。</p>
<h3>javascript跨浏览器添加事件绑定 bind()</h3>
<p>IE 的<strong>事件绑定</strong>函数是<strong> attachEvent</strong>；而 Firefox, Safari 是 <strong>addEventListener</strong>；Opera 则两种都支持。使用jQuery就可以使用简单的bind()，或者$().click()之类的函数解决，而如果不使用JavaScript框架的时候，大家可是使用下面的封装bind()函数。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="comment">/************************************
 * 添加事件绑定
 * @param obj   : 要绑定事件的元素
 * @param type : 事件名称。不加 "on". 如 : "click" 而不是 "onclick".
 * @param fn    : 事件处理函数
 ************************************/</span>
<span class="function"><span class="keyword">function</span> <span class="title">bind</span><span class="params">( obj, type, fn )</span> {</span>
    <span class="keyword">if</span> ( obj.attachEvent ) {
        obj[<span class="string">'e'</span>+type+fn] = fn;
        obj[type+fn] = <span class="keyword">function</span>(){obj[<span class="string">'e'</span>+type+fn]( window.event );}
        obj.attachEvent( <span class="string">'on'</span>+type, obj[type+fn] );
    } <span class="keyword">else</span>
        obj.addEventListener( type, fn, <span class="literal">false</span> );
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/12/25/javascript跨浏览器的添加删除事件绑定函数/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/24/使用zeroclipboard解决跨浏览器复制到剪贴板的问题/">使用ZeroClipboard解决跨浏览器复制到剪贴板的问题</a></h1>
  

      <time datetime="2009-12-23T17:48:06.000Z"><a href="/2009/12/24/使用zeroclipboard解决跨浏览器复制到剪贴板的问题/">2009年12月24日</a></time>
    </header>
    <div class="entry">
      
        <h3>导言</h3>
<p>之前在开发<a href="http://www.pujia.com" target="_blank">普加</a>09年国庆中秋祝福页面复制链接功能时，遇见在Firefox，Chrome，Opera，Safari能复制链接的<strong>兼容性</strong>问题，而在近期上线的<a href="http://ditu.pujia.com/preview" target="_blank">普加地图</a>产品中使用的是Flash的<strong>flashvars</strong>来传入参数来解决了这个问题。其实开发中经常会用到复制的功能，在 IE 下通过JavaScript的<strong>window.clipboardData.setData</strong>可以简单实现复制到剪贴板功能。最后终于找到了终极解决方式：使用jhuckaby写的Zero Clipboard的js类库。此方法利用 Flash完成进行复制内容到剪贴板，所以只要浏览器装有Flash 就可以复制内容。</p>
<h3>Zero Clipboard的实现原理</h3>
<p><strong>Zero Clipboard </strong>利用透明的Flash让其漂浮在复制按钮之上，这样其实点击的不是按钮而是 Flash ，这样将需要的内容传入Flash，再通过Flash的复制功能把传入的内容复制到<strong>剪贴板</strong>。</p>
<h3>Zero Clipboard的安装方法</h3>
<p>其实也不算安装啦，就是使用前的准备工作。<br>首先需要下载 Zero Clipboard的压缩包，解压后把文件夹中两个文件：ZeroClipboard.js 和 ZeroClipboard.swf 放入到你的项目中。</p>
<blockquote>
<p>Zero Clipboard : <a href="http://code.google.com/p/zeroclipboard/" target="_blank">[项目主页</a>] <a href="http://code.google.com/p/zeroclipboard/downloads/list" target="_blank">[zip下载</a>] <a href="http://bowser.macminicolo.net/~jhuckaby/zeroclipboard/" target="_blank">[在线演示</a>]<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/12/24/使用zeroclipboard解决跨浏览器复制到剪贴板的问题/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/18/ie6-png图片不透明问题的解决方法/">IE6 PNG图片不透明问题的解决方法</a></h1>
  

      <time datetime="2009-12-17T18:16:33.000Z"><a href="/2009/12/18/ie6-png图片不透明问题的解决方法/">2009年12月18日</a></time>
    </header>
    <div class="entry">
      
        <p>IE6真是前端开发人员的噩梦，就像<a href="http://oncoding.cn" target="_blank">刘洋</a>说的:IE6一次又一次的阻碍了互联网的发展。在前几天开发的<a href="http://js8.in/wordpress-weather">WordPress天气预报插件</a>中使用的图片都是png格式的透明图片，由于png格式的图片比较漂亮美观，可是在<strong>IE6</strong>中png的透明效果是没有的，这样子本来设计很漂亮的页面在IE6就歇菜了，让人感觉很不爽~本文使用js的方法来解决IE6下<strong>PNG图片不透明</strong>的问题，简单实用。<a href="http://js8.in/448.html" title="png在IE6下透明的几种方法">更多解决方法点击此处</a>。</p>
<p>如果我们在页面中使用的透明PNG图片不是很多，可以使用下面的代码来解决问题：</p>
<blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">setPng</span><span class="params">(img, w, h)</span>{</span>
&gt;                 ua = window.navigator.userAgent.toLowerCase();
&gt;                 <span class="keyword">if</span> (!<span class="regexp">/msie/</span>.test(ua))
&gt;                     <span class="keyword">return</span>;
&gt;                 imgStyle = <span class="string">"display:inline-block;"</span> + img.style.cssText;
&gt;                 strNewHTML = <span class="string">""</span>;
&gt;                 img.outerHTML = strNewHTML;
&gt; }
</pre></td></tr></table></figure>

<p>使用方法，在img上添加onload=“setPng(this,宽度,高度)”，如&lt;img onload=“setPng(this,98,78)” src=“” /&gt;<br>如果您觉得这样的方法比较麻烦，或者页面中使用的<strong>透明png图片</strong>比较多如果手动添加很不方便的时候，可是使用下面的代码来解决问题。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/12/18/ie6-png图片不透明问题的解决方法/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/17/主流浏览器的css-hack方法整理/">主流浏览器的CSS Hack方法整理</a></h1>
  

      <time datetime="2009-12-17T08:28:06.000Z"><a href="/2009/12/17/主流浏览器的css-hack方法整理/">2009年12月17日</a></time>
    </header>
    <div class="entry">
      
        <p>由于不同的浏览器，比如IE6、IE7、Firefox等，对CSS的解析不一样，因此会导致生成的页面效果不一样，得不到我们所需要的页面效果。我在写<a href="http://js8.in/374.html">WordPress天气预报插件</a>的时候就碰见了一个<strong>CSS hack</strong>的问题：在IE6下不能显示正常。本来一个很好的<a href="http://js8.in/wordpress-weather">WordPress天气预报插件</a>就因为IE6给推迟了发布时间。所以对于前端开发人员<strong>CSS兼容性</strong>是个比较棘手的问题，当然对于不同浏览器也有不同的CSS hack的方法，此处本人就整理了一些常用到CSS hack方法，分享给大家，希望对大家有用。</p>
<h3>CSS Hack浏览器的顺序</h3>
<p>对于不同浏览器的CSS hack是有顺序区分的，一般的书写hack的顺序是：<strong>Firefox -&gt; IE7 -&gt; IE6 -&gt; 其他</strong>，<br>当然推荐大家使用Firefox+Firebug来进行调试，注意书写的时候要尽量标准，记住封口，很多时候不封口在FF，IE7下显示正常，可是在IE6下就全部乱了~</p>
<h3>CSS Hack整理汇总</h3>
<p>这些方法相信很多人已经很熟悉了：比如 <strong>IE6</strong>能识别下划线&quot;<strong><span style="color: #ff00ff;">_</span></strong>“和星号” <span style="color: #ff00ff;"><strong>* </strong></span>&quot;，<strong>IE7</strong>能识别星号&quot;<span style="color: #ff00ff;"><strong> *</strong></span> “，但不能识别下划线”<span style="color: #ff00ff;"><strong>_</strong></span>&quot;，而<strong>firefox</strong>两个都不能认识。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/12/17/主流浏览器的css-hack方法整理/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/16/使用if-ie-hack注释解决css以及js的兼容问题/">使用if IE hack注释解决CSS以及JS的兼容问题</a></h1>
  

      <time datetime="2009-12-16T15:39:55.000Z"><a href="/2009/12/16/使用if-ie-hack注释解决css以及js的兼容问题/">2009年12月16日</a></time>
    </header>
    <div class="entry">
      
        <p>在<strong>IE CSS hack</strong>(<a href="http://js8.in/382.html">更多方法</a>)当中常用到if IE 来判断浏览器的类型，解决CSS甚至于JS的<strong>兼容</strong>性问题，之前大家可能知道if IE来解决<strong>CSS的兼容</strong>性问题，其实if IE不仅仅是用于CSS hack的使用，我们在前端开发中甚至可以使用<strong>if IE</strong>来做JS的处理，如下面的代码：</p>
<blockquote>
<p>&lt;!—[if IE 5]&gt; &lt;script&gt;document.write(“仅IE5.0与IE5.5可以识别”);&lt;/script&gt; &lt;![endif]—&gt;</p>
<p>&lt;!—[if gte IE 5.0]&gt;&lt;script&gt;document.write(“IE5.0以及IE5.0以上版本都可以识别”);&lt;/script&gt;&lt;![endif]—&gt;</p>
<p>&lt;!—[if IE 6]&gt;&lt;script&gt;document.write(“仅IE6可识别”);&lt;/script&gt;&lt;![endif]—&gt;</p>
<p>&lt;!—[if lt IE 6]&gt;&lt;script&gt;document.write(“IE6以下版本可识别”);&lt;/script&gt;&lt;![endif]—&gt;</p>
<p>&lt;!—[if gte IE 6]&gt;&lt;script&gt;document.write(&quot;<strong>IE6</strong>以及IE6以上版本可识别&quot;);&lt;/script&gt;&lt;![endif]—&gt;</p>
<p>&lt;!—[if IE 7]&gt;&lt;script&gt;document.write(“仅IE7可识别”);&lt;/script&gt; &lt;![endif]—&gt;</p>
<p>&lt;!—[if lt IE 7]&gt;&lt;script&gt;document.write(“IE7以下版本可识别”);&lt;/script&gt;&lt;![endif]—&gt;</p>
<p>&lt;!—[if gte IE 7]&gt;&lt;script&gt;document.write(“IE7以及IE7以上版本可识别”);&lt;/script&gt;&lt;![endif]—&gt;<br>下面对<strong>if IE</strong>做一下详细的解释：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/12/16/使用if-ie-hack注释解决css以及js的兼容问题/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/11/对引用外部javascript页面编码处理/">UTF-8页面引用外部编码为GBK的JS文件编码的处理</a></h1>
  

      <time datetime="2009-12-11T14:13:47.000Z"><a href="/2009/12/11/对引用外部javascript页面编码处理/">2009年12月11日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天写的一个根据来访者IP返回来访者所在地区的天气情况的<a href="http://js8.in/wordpress-weather" title="WordPress 天气插件">WordPress天气插件</a>侧边栏，效果见本<a href="http://js8.in" title="断桥残雪部落格">博客的首页</a>侧边栏“天气预报”。其中根据<strong>IP</strong>返回来访者城市地理位置的方法是采用了QQ的一个接口：<a href="http://fw.qq.com/ipaddress,而这个接口提供的js为GBK编码的，由于[我的博客](http://js8.in" target="_blank">http://fw.qq.com/ipaddress,而这个接口提供的js为GBK编码的，由于[我的博客](http://js8.in</a> “断桥残雪部落格”)是UTF-8编码的，所以再次使用返回的城市名称在我页面显示的是<strong>乱码</strong>，而且不能引用的。</p>
<p>上网找了很多关于JavaScript把<strong>GBK编码转换为UTF-8编码</strong>的js函数，可是都无济于事，并且如果单单为了编码问题就单独写一个js函数来处理GBK转UTF-8编码，这是很不合理的~由于本来我引用的是QQ的根据IP返回城市接口，我自己是不能够改变QQ官方的<strong>数据编码格式</strong>的，解决的方法唯有我在我的程序中把<strong>GBK编码</strong>的js强制转换为utf-8的格式，怎么转换是个比较难的方式，既然不能通过写js函数，那就只用用其他的方式了。</p>
<p>最后我在网上找到了一个很好的解决方法，<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/12/11/对引用外部javascript页面编码处理/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/04/css清除浏览器默认样式注意点/">CSS清除浏览器默认样式注意点</a></h1>
  

      <time datetime="2009-12-04T10:15:20.000Z"><a href="/2009/12/04/css清除浏览器默认样式注意点/">2009年12月4日</a></time>
    </header>
    <div class="entry">
      
        <p>今天看了岁月如歌的一片文章《<a href="http://lifesinger.org/blog/2009/12/kissy-css-reset/" target="_blank">KISSY CSS Reset 1.0</a>》其中写到了<strong>css重置</strong>的代码</p>
<blockquote>
<p>/<em><br>KISSY CSS Reset<br>理念：1. reset 的目的不是清除浏览器的默认样式，这仅是部分工作。清除和重置是紧密不可分的。<br>2. reset 的目的不是让默认样式在所有浏览器下一致，而是减少默认样式有可能带来的问题。<br>3. reset 期望提供一套普适通用的基础样式。但没有银弹，推荐根据具体需求，裁剪和修改后再使用。<br>特色：1. 适应中文；2. 基于最新主流浏览器。<br>维护：玉伯, 正淳<br>Revision: 276
</em>/</p>
<p>/<strong> 清除内外边距 </strong>/<br>body, h1, h2, h3, h4, h5, h6, hr, p, blockquote, /<em> structural elements 结构元素 </em>/<br>dl, dt, dd, ul, ol, li, /<em> list elements 列表元素 </em>/<br>pre, /<em> text formatting elements 文本格式元素 </em>/<br>form, fieldset, legend, button, input, textarea, /<em> form elements 表单元素 </em>/<br>th, td /<em> table elements 表格元素 </em>/ {<br>margin: 0;<br>padding: 0;<br>}</p>
<p>/<strong> 设置默认字体 </strong>/<br>body,<br>button, input, select, textarea /<em> for ie </em>/ {<br>font: 12px/1.5 tahoma, arial, simsun, sans-serif;<br>}<br>h1, h2, h3, h4, h5, h6 { font-size: 100%; }<br>address, cite, dfn, em, var { font-style: normal; } /<em> 将斜体扶正 </em>/<br>code, kbd, pre, samp { font-family: courier new, courier, monospace; } /<em> 统一等宽字体 </em>/<br>small { font-size: 12px; } /<em> 小于 12px 的中文很难阅读，让 small 正常化 </em>/</p>
<p>/<strong> 重置列表元素 </strong>/<br>ul, ol { list-style: none; }</p>
<p>/<strong> 重置文本格式元素 </strong>/<br>a { text-decoration: none; }<br>a:hover { text-decoration: underline; }</p>
<p>sup { vertical-align: text-top; } /<em> 重置，减少对行高的影响 </em>/<br>sub { vertical-align: text-bottom; }</p>
<p>/<strong> 重置表单元素 </strong>/<br>legend { color: #000; } /<em> for ie6 </em>/<br>fieldset, img { border: 0; } /<em> img 搭车：让链接里的 img 无边框 </em>/<br>button, input, select, textarea { font-size: 100%; } /<em> 使得表单元素在 ie 下能继承字体大小 </em>/<br>/<em> 注：optgroup 无法扶正 </em>/</p>
<p>/<strong> 重置表格元素 </strong>/<br>table { border-collapse: collapse; border-spacing: 0; }<br>而我在腾讯webteam中看到一篇文章《<a href="http://webteam.tencent.com/?p=1481" target="_blank">border:none;与border:0;的区别</a>》中提到<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/12/04/css清除浏览器默认样式注意点/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/12/01/使用css控制打印页面格式/">使用CSS控制打印页面格式</a></h1>
  

      <time datetime="2009-11-30T17:12:39.000Z"><a href="/2009/12/01/使用css控制打印页面格式/">2009年12月1日</a></time>
    </header>
    <div class="entry">
      
        <p>之前做<a href="http://ditu.pujia.com/preview" target="_blank">地图</a>打印页面的时候，经理要求打印时候把打印的按钮去掉。这个时候就用到了控制<strong>打印</strong>的<strong>样式表</strong>了。<br>&lt;link rel=“stylesheet” type=“text/css” media=“print” href=“print.css” /&gt;</p>
<p>正因为xhtml和css是分离的，所以我们可以在print.css里自由书写需要打印显示的内容和表现形式。那么这也要求我们在书写xhtml的时候更多考虑到打印显示效果的需求，良好的扩展标记和结构嵌套，使得我们轻松的使用display:none将内容设置为不显示。然后就是去书写 print.css内容的时候了，你象设置word一样去写你想打印的页面吧。<br>后来想了想，其实单独写一个css增加了请求次数，就想到<strong>了@media print</strong>{}的作用，代码如下</p>
<figure class="highlight lang-css"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span class="at_rule">@<span class="keyword">media</span> print</span>{
 <span class="class">.printdesc</span>
<span class="rules">{
    <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">0</span>;</span></span>
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">685</span>px;</span></span>
    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">69</span>px;</span></span>
    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> <span class="hexcolor">#FFFFFF</span>;</span></span>
    <span class="rule"><span class="attribute">float</span>:<span class="value">left;</span></span>
    <span class="rule"><span class="attribute">overflow</span>:<span class="value">auto;</span></span>
    <span class="rule"><span class="attribute">border</span>:<span class="value"><span class="number">0</span>px;</span></span>
<span class="rule">}</span></span>
<span class="class">.text</span><span class="rules">{
    <span class="rule"><span class="attribute">float</span>:<span class="value">right;</span></span>
    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">688</span>px;</span></span>
    <span class="rule"><span class="attribute">margin-top</span>:<span class="value"><span class="number">20</span>px;</span></span>
<span class="rule">}</span></span>
<span class="class">.printlink</span><span class="rules">{
    <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">0</span>px;</span></span>
    <span class="rule"><span class="attribute">display</span>:<span class="value">none;</span></span>
    <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">0</span>px;</span></span>
    <span class="rule"><span class="attribute">z-index</span>:<span class="value">-<span class="number">10</span>;</span></span>

<span class="rule">}</span></span>
<span class="class">.printlink</span> <span class="tag">a</span><span class="rules">{
    <span class="rule"><span class="attribute">display</span>:<span class="value">none;</span></span>
<span class="rule">}</span></span>
}
</pre></td></tr></table></figure>

<p>后来想到如果打印页面的某一部分，可以使用iframe来进行操作，现在的打印页面的局部内容基本上就是使用iframe进行处理的~特此记录一下</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2009/11/28/javascript高效简洁代码的编写及优化技巧/">javascript高效简洁代码的编写及优化技巧</a></h1>
  

      <time datetime="2009-11-27T22:46:59.000Z"><a href="/2009/11/28/javascript高效简洁代码的编写及优化技巧/">2009年11月28日</a></time>
    </header>
    <div class="entry">
      
        <h3>前言</h3>
<p>随着互联网前端技术的革新，<strong>javascript</strong>越来越重要，并且js的轻便，非严格的写法，使越来越多的人掌握了js，可是谈到js的写法，很多人都觉得自己很熟悉，很了解，但是笔者在实践中发现js并非大家想象的那么简单，就像同事一句话：php会的很多，一抓一大把，而真正会js的却不多。仔细想想，原因很简单，js的加载到客户端运行的，不像php可以一个include就可以搞定，而且引入的文件中不用的函数可以放着不动，而js不同，如果加入很多很多无用的函数会大大的占有带宽，不利于用户体验。下面结合笔者实际开发过程中遇到的问题，以及自己收集的技巧，谈谈js高效简洁代码的编写及其优化的技巧。当然网上也有很多类似的文章，不过建议大家还是不要人云亦云，真正适合自己的技巧跟编写习惯才是最好的！</p>
<h3>真假的判断</h3>
<p>Javascript中有null、undefined、string、number、boolean五种基本的类型，一般判断真假或者为空的时候大家会使用下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre>
<span class="keyword">if</span>(a==<span class="literal">true</span>){
    <span class="comment">//doSomeTing();</span>
}```但是这种方法很不简洁，我们完全可以使用<span class="number">1</span>，<span class="number">0</span>来判断，比如我们设定一个a，如果a为假，我们就改成真，而a在程序后面可能用于判断，最简单也是最好理解的方法就是下面的写法
```javascript

<span class="keyword">var</span> a=<span class="literal">false</span>;
<span class="keyword">if</span>(a==<span class="literal">false</span>){
    a=<span class="literal">true</span>;
}
```既然提到了<span class="number">0</span>，<span class="number">1</span>，肯定有人想到了第二种写法：
```javascript

<span class="keyword">var</span> a=<span class="number">0</span>;
<span class="keyword">if</span>(!a){
    a=<span class="number">1</span>;
}
```这个代码还可以进一步简写优化，就是使用js的三元运算符，也就是三目运算符：
```javascript

<span class="keyword">var</span> a=<span class="number">0</span>;
!a?a=<span class="number">1</span>?<span class="literal">null</span>;
</pre></td></tr></table></figure>

<p>还有一点，对于空字符串的判断，往往采用<strong>if（a==“”）</strong>,其实对于空字符本身就是false，下面我总结了下Javascript中的真假值，希望对大家有用<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2009/11/28/javascript高效简洁代码的编写及优化技巧/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  
</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/乱七八糟/">乱七八糟</a><small>30</small></li>
  
    <li><a href="/categories/前端开发/">前端开发</a><small>116</small></li>
  
    <li><a href="/categories/后端运维/">后端运维</a><small>27</small></li>
  
    <li><a href="/categories/王婆卖瓜/">王婆卖瓜</a><small>4</small></li>
  
    <li><a href="/categories/读书笔记/">读书笔记</a><small>5</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签</h3>
  <ul class="entry clearfix">
  
    <li><a href="/tags/DOM/">DOM<sup>2</sup></a></li>
  
    <li><a href="/tags/IE/">IE<sup>1</sup></a></li>
  
    <li><a href="/tags/IE6/">IE6<sup>2</sup></a></li>
  
    <li><a href="/tags/PPT/">PPT<sup>3</sup></a></li>
  
    <li><a href="/tags/VPS/">VPS<sup>1</sup></a></li>
  
    <li><a href="/tags/ajax/">ajax<sup>5</sup></a></li>
  
    <li><a href="/tags/apache/">apache<sup>1</sup></a></li>
  
    <li><a href="/tags/audio/">audio<sup>2</sup></a></li>
  
    <li><a href="/tags/a标签/">a标签<sup>1</sup></a></li>
  
    <li><a href="/tags/canvas/">canvas<sup>1</sup></a></li>
  
    <li><a href="/tags/chrome/">chrome<sup>3</sup></a></li>
  
    <li><a href="/tags/css/">css<sup>15</sup></a></li>
  
    <li><a href="/tags/eAccelerator/">eAccelerator<sup>1</sup></a></li>
  
    <li><a href="/tags/ecmascript/">ecmascript<sup>3</sup></a></li>
  
    <li><a href="/tags/escape/">escape<sup>1</sup></a></li>
  
    <li><a href="/tags/event/">event<sup>1</sup></a></li>
  
    <li><a href="/tags/express/">express<sup>1</sup></a></li>
  
    <li><a href="/tags/grunt/">grunt<sup>1</sup></a></li>
  
    <li><a href="/tags/handleEvent/">handleEvent<sup>1</sup></a></li>
  
    <li><a href="/tags/html5/">html5<sup>3</sup></a></li>
  
    <li><a href="/tags/iframe/">iframe<sup>1</sup></a></li>
  
    <li><a href="/tags/iptables/">iptables<sup>1</sup></a></li>
  
    <li><a href="/tags/javascript/">javascript<sup>79</sup></a></li>
  
    <li><a href="/tags/linux/">linux<sup>4</sup></a></li>
  
    <li><a href="/tags/livereload/">livereload<sup>1</sup></a></li>
  
    <li><a href="/tags/memcached/">memcached<sup>1</sup></a></li>
  
    <li><a href="/tags/mixjs/">mixjs<sup>1</sup></a></li>
  
    <li><a href="/tags/mysql/">mysql<sup>2</sup></a></li>
  
    <li><a href="/tags/name/">name<sup>1</sup></a></li>
  
    <li><a href="/tags/nginx/">nginx<sup>2</sup></a></li>
  
    <li><a href="/tags/nodejs/">nodejs<sup>7</sup></a></li>
  
    <li><a href="/tags/php/">php<sup>19</sup></a></li>
  
    <li><a href="/tags/session/">session<sup>1</sup></a></li>
  
    <li><a href="/tags/storage/">storage<sup>1</sup></a></li>
  
    <li><a href="/tags/svn/">svn<sup>1</sup></a></li>
  
    <li><a href="/tags/this/">this<sup>1</sup></a></li>
  
    <li><a href="/tags/ueditor/">ueditor<sup>1</sup></a></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs<sup>1</sup></a></li>
  
    <li><a href="/tags/webbench/">webbench<sup>1</sup></a></li>
  
    <li><a href="/tags/websocket/">websocket<sup>1</sup></a></li>
  
    <li><a href="/tags/web前端开发/">web前端开发<sup>5</sup></a></li>
  
    <li><a href="/tags/windows7技巧/">windows7技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/wordpress/">wordpress<sup>3</sup></a></li>
  
    <li><a href="/tags/xss/">xss<sup>3</sup></a></li>
  
    <li><a href="/tags/严格模式/">严格模式<sup>1</sup></a></li>
  
    <li><a href="/tags/位运算/">位运算<sup>1</sup></a></li>
  
    <li><a href="/tags/作用域/">作用域<sup>3</sup></a></li>
  
    <li><a href="/tags/前端优化/">前端优化<sup>1</sup></a></li>
  
    <li><a href="/tags/前端工具/">前端工具<sup>4</sup></a></li>
  
    <li><a href="/tags/加速器/">加速器<sup>1</sup></a></li>
  
    <li><a href="/tags/压力测试/">压力测试<sup>1</sup></a></li>
  
    <li><a href="/tags/右键/">右键<sup>1</sup></a></li>
  
    <li><a href="/tags/安全/">安全<sup>1</sup></a></li>
  
    <li><a href="/tags/性能/">性能<sup>3</sup></a></li>
  
    <li><a href="/tags/我也八卦/">我也八卦<sup>1</sup></a></li>
  
    <li><a href="/tags/执行环境/">执行环境<sup>1</sup></a></li>
  
    <li><a href="/tags/技巧/">技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/播放器/">播放器<sup>1</sup></a></li>
  
    <li><a href="/tags/数组/">数组<sup>1</sup></a></li>
  
    <li><a href="/tags/标签/">标签<sup>1</sup></a></li>
  
    <li><a href="/tags/模块化/">模块化<sup>2</sup></a></li>
  
    <li><a href="/tags/算法/">算法<sup>1</sup></a></li>
  
    <li><a href="/tags/网络技术/">网络技术<sup>73</sup></a></li>
  
    <li><a href="/tags/虚拟主机/">虚拟主机<sup>1</sup></a></li>
  
    <li><a href="/tags/解耦/">解耦<sup>1</sup></a></li>
  
    <li><a href="/tags/语法限制/">语法限制<sup>1</sup></a></li>
  
    <li><a href="/tags/跨域/">跨域<sup>3</sup></a></li>
  
    <li><a href="/tags/路径/">路径<sup>1</sup></a></li>
  
    <li><a href="/tags/软件心得/">软件心得<sup>3</sup></a></li>
  
  </ul>
</div>



  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 三水清
  
</div>
<div class="clearfix"></div></footer>
  <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


    
        <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6635976" ></script>
        <script type="text/javascript" id="bdshell_js"></script>
        <script type="text/javascript">
        document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
        </script>
    
    



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1c76f5cc8274a56106b13b9c9b1fb046' type='text/javascript'%3E%3C/script%3E"));
    </script>


</body>
</html>