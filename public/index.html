<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>三水清</title>
  <meta name="author" content="三水清">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="三水清"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="atom.xml" title="三水清" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">三水清</a></h1>
  <h2><a href="/">专注前端开发,分享Javascript/CSS/PHP等Web前端开发技巧</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/about">关于</a></li>
    
      <li><a href="https://github.com/ksky521">Github</a></li>
    
      <li><a href="http://weibo.com/sanshuiqing">新浪微博</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/04/16/gruntjs——前端任务管理工具/">Gruntjs——前端任务管理工具</a></h1>
  

      <time datetime="2013-04-16T13:09:34.000Z"><a href="/2013/04/16/gruntjs——前端任务管理工具/">2013年4月16日</a></time>
    </header>
    <div class="entry">
      
        <p><a href="http://www.gruntjs.com" target="_blank">Gruntjs</a>是前端项目构建工具，基于node的命令行工具。很多公司或者js项目都是用<strong>gruntjs</strong>来搭建，例如jQuery，twitter，Qunit等。主要功能有：</p>
<ul>
<li>合并文件</li>
<li>压缩html/js/css/图片文件</li>
<li>语法检测</li>
<li>单元测试（基于Qunit）</li>
<li>watch功能</li>
</ul>
<p>相对于Ant的打包工具，grunt更加灵活，语法采用json，比xml语法更加简洁，作为前端工程师可能更喜欢写json。</p>
<h2>GruntJS的安装</h2>
<p>Grunt是基于nodejs的，所以安装GruntJS之前，需要保证你的电脑有<a href="http://nodejs.org/" target="_blank">nodejs环境</a>，node环境比之前安装简单多了，现在windows平台只需要下载node安装程序，一路next就可以了。</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/04/16/gruntjs——前端任务管理工具/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/04/07/双屏切图：使用livereload实现自动刷新/">双屏切图：使用livereload实现自动刷新</a></h1>
  

      <time datetime="2013-04-07T12:49:27.000Z"><a href="/2013/04/07/双屏切图：使用livereload实现自动刷新/">2013年4月7日</a></time>
    </header>
    <div class="entry">
      
        <p><strong>livereload</strong>是一个web开发辅助工具，当我们修改完html、css和js的时候会自动刷新浏览器，解放码农的双手。这样在双屏切图、写js代码的时候会提高很多效率。livereload有很多版本，比如基于ruby的版本，我们今天介绍的是node+grunt+chrome插件一体化方案。</p>
<p>我们使用的这个livereload的基本原理是试用node开启一个websocket服务，并且检测文件变化，浏览器打开一个页面时候，引入固定的livereload.js（chrome插件会帮忙加上）会建立ws请求，当node检测到文件变化，则自动推送消息给浏览器，实现刷新。</p>
<h2>livereload环境搭建</h2>
<ul>
<li>nodejs安装</li>
<li>grunt安装</li>
<li>grunt-contrib-watch：npm install grunt-contrib-watch —save-dev</li>
<li>grunt-livereload：npm install grunt-livereload —save-dev</li>
<li>chrome插件：<a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei" target="_blank">安装</a></li>
</ul>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/04/07/双屏切图：使用livereload实现自动刷新/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/04/02/javascript实现比较相似图片算法/"> javascript实现比较相似图片算法</a></h1>
  

      <time datetime="2013-04-02T13:14:44.000Z"><a href="/2013/04/02/javascript实现比较相似图片算法/">2013年4月2日</a></time>
    </header>
    <div class="entry">
      
        <p>昨天看了阮一峰老师的文章：《<a href="http://www.ruanyifeng.com/blog/2013/03/similar_image_search_part_ii.html" target="_blank">相似图片搜索原理</a>》，于是把直方图和向量那块算法用js实现了一下，</p>
<p>源码如下：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">getHistogram</span><span class="params">(imageData)</span> {</span>
    <span class="keyword">var</span> arr = [];
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++) {
        arr[i] = <span class="number">0</span>;
    }
    <span class="keyword">var</span> data = imageData.data;
    <span class="keyword">var</span> pow4 = Math.pow(<span class="number">4</span>, <span class="number">2</span>);
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = data.length; i &lt; len; i += <span class="number">4</span>) {
        <span class="keyword">var</span> red = (data[i] / <span class="number">64</span>) | <span class="number">0</span>;
        <span class="keyword">var</span> green = (data[i + <span class="number">1</span>] / <span class="number">64</span>) | <span class="number">0</span>;
        <span class="keyword">var</span> blue = (data[i + <span class="number">2</span>] / <span class="number">64</span>) | <span class="number">0</span>;
        <span class="keyword">var</span> index = red * pow4 + green * <span class="number">4</span> + blue;
        arr[index]++;
    }

    <span class="keyword">return</span> arr;
}

<span class="function"><span class="keyword">function</span> <span class="title">cosine</span><span class="params">(arr1, arr2)</span> {</span>
    <span class="keyword">var</span> axb = <span class="number">0</span>,
        a = <span class="number">0</span>,
        b = <span class="number">0</span>;
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr1.length; i &lt; len; i++) {
        axb += arr1[i] * arr2[i];
        a += arr1[i] * arr1[i];
        b += arr2[i] * arr2[i];
    }
    <span class="keyword">return</span> axb / (Math.sqrt(a) * Math.sqrt(b));
}
<span class="function"><span class="keyword">function</span> <span class="title">gray</span><span class="params">(imgData)</span> {</span>
    <span class="keyword">var</span> data = imgData.data;
    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = data.length; i &lt; len; i += <span class="number">4</span>) {
        <span class="keyword">var</span> gray = parseInt((data[i] + data[i + <span class="number">1</span>] + data[i + <span class="number">2</span>]) / <span class="number">3</span>);
        data[i + <span class="number">2</span>] = data[i + <span class="number">1</span>] = data[i] = gray;
    }
    <span class="keyword">return</span> imgData;
}
</pre></td></tr></table></figure>

<p>有个问题，假如图片是灰色的跟原图进行比较，那么要比较相似度，需要将图片都转成灰色的，即使用上面代码的gray函数来处理</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/01/17/怎么清空javascript数组/">怎么清空javascript数组</a></h1>
  

      <time datetime="2013-01-17T14:04:08.000Z"><a href="/2013/01/17/怎么清空javascript数组/">2013年1月17日</a></time>
    </header>
    <div class="entry">
      
        <p>这是一个很基础的问题，但是我们往往经常做错。</p>
<p>当一个数组需要清空的时候，很多人使用下面的方法：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>a = [];
</pre></td></tr></table></figure>

<p>我们知道javascript变量存储方式分为引用类型和直接量。数组属于对象，即引用类型，引用的是变量指针地址，之所以这样设计也是为了节省内存。</p>
<p>再说到上面的请空数组的方式，如果采用直接赋值一个新数组的方式，那么之前引用的数组可能不会被释放（有其他的引用），例如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="keyword">var</span> a = [<span class="number">2</span>,<span class="number">3</span>];
<span class="keyword">var</span> b = a;
a = [];
console.log(b);
</pre></td></tr></table></figure>

<p>这时候a和b就不是同一个数组了，清空了a而b还是指到之前的引用地址，除非你是故意的，否则这将会有隐患。</p>
<p>所以最佳的请空数组方式是：将length设置为0，即：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>a.length = <span class="number">0</span>;
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/01/05/javascript的类型数组（typed-array）/">javascript的类型数组（Typed Array）</a></h1>
  

      <time datetime="2013-01-04T21:59:29.000Z"><a href="/2013/01/05/javascript的类型数组（typed-array）/">2013年1月5日</a></time>
    </header>
    <div class="entry">
      
        <p>在《<a href="/2013/01/02/html5-canvas-%E5%9B%BE%E7%89%87%E5%83%8F%E7%B4%A0/">javascript canvas图片像素</a>》中提到了类型数组（Typed Array），javascript这是一种快速操作二进制数据的解决方案。</p>
<p>随着web发展和html5的推进，javascript来处理音视频、二进制文件和网络协议等都成为了可能，这时候原生的数组Array已经不能够满足需求，需要一种快速操作二进制流的东东产生，于是ArrayBuffer类型和Typed Array诞生了。</p>
<h2>类型数组介绍</h2>
<p>类型化数组类型表示可编制索引和操纵的<a href="http://www.javascripture.com/ArrayBuffer" target="_blank">ArrayBuffer</a>对象的各种识图。所有数组类型的长度固定不变。如下表所示：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>大小（以字节为单位）</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Int8Array</td>
<td>1</td>
<td>8 位二补码有符号整数</td>
</tr>
<tr>
<td>Uint8Array</td>
<td>1</td>
<td>8 位无符号整数</td>
</tr>
<tr>
<td>Int16Array</td>
<td>2</td>
<td>16 位二补码有符号整数</td>
</tr>
<tr>
<td>Uint16Array</td>
<td>2</td>
<td>16 位无符号整数</td>
</tr>
<tr>
<td>Int32Array</td>
<td>4</td>
<td>32 位二补码有符号整数</td>
</tr>
<tr>
<td>Uint32Array</td>
<td>4</td>
<td>32 位无符号整数</td>
</tr>
<tr>
<td>Float32Array</td>
<td>4</td>
<td>32 位 IEEE 浮点数</td>
</tr>
<tr>
<td>Float64Array</td>
<td>8</td>
<td>64 位 IEEE 浮点数</td>
</tr>
</tbody>
</table>
<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/01/05/javascript的类型数组（typed-array）/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/01/02/html5-canvas-图片像素/">html5 canvas 图片像素</a></h1>
  

      <time datetime="2013-01-02T13:36:00.000Z"><a href="/2013/01/02/html5-canvas-图片像素/">2013年1月2日</a></time>
    </header>
    <div class="entry">
      
        <h2>html5 canvas图像转换成数组</h2>
<p>html5的canvas可以进行图片处理，图片是由像素组成的。我们知道canvas有方法<code>getImageData</code>，返回的对象中可以取出，image的data 数组（类似数组的Type Array类型数组，Uint8ClampedArray）。</p>
<p>假设canvas宽高是500*400，那么应该有200000个像素点，而通过<code>getImageData().data</code>获取的data数组的<code>length</code>是800000。</p>
<p>我们还知道rgba表示颜色的方法：<br><em> r=red
</em> g=green<br><em> b=blue
</em> a=alpha</p>
<p>即红绿蓝三原色和透明值。</p>
<p>所以这个data数组是每四个数组值代表一个像素点。这样一来，一个图像就转化成了数据表示的数组。如下面的代码：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> canvas = document.getElementById(<span class="string">'canvas'</span>);
<span class="keyword">var</span> ctxt = canvas.getContext(<span class="string">'2d'</span>);
<span class="keyword">var</span> img = <span class="keyword">new</span> Image;
img.onload = <span class="keyword">function</span>(){
    ctxt.drawImage(img, <span class="number">0</span>, <span class="number">0</span>);
    <span class="keyword">var</span> data = ctxt.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">480</span>, <span class="number">480</span>).data;
    console.log(data, data.toString());
}
img.src = <span class="string">'img/pic.jpg'</span>;
</pre></td></tr></table></figure>

<h2>图像数组的遍历</h2>
<p>如上面的代码，我们可以看到数组data就是图片转换成的数组，那么遍历这个数组就可以取得图片的像素点内容：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="keyword">var</span> data = ctxt.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="number">480</span>, <span class="number">480</span>).data;
<span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span>,len = data.length; i&lt;len;i+=<span class="number">4</span>){
    <span class="keyword">var</span> red = data[i],
    green = data[i+<span class="number">1</span>],
    blue = data[i+<span class="number">2</span>],
    alpha = data[i+<span class="number">3</span>];

}
</pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/01/02/html5-canvas-图片像素/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2013/01/01/ecmascript-262-5th-：执行环境一些概念解释/">ECMAScript 262 5th ：执行环境一些概念解释</a></h1>
  

      <time datetime="2012-12-31T19:12:37.000Z"><a href="/2013/01/01/ecmascript-262-5th-：执行环境一些概念解释/">2013年1月1日</a></time>
    </header>
    <div class="entry">
      
        <h2>可执行代码</h2>
<p><strong>ECMAScript 5th</strong>规定了3种<strong>可执行代码</strong>：Global code、Eval code和Function code。</p>
<p>根据名字就已经知道，<code>Global code</code>和<code>Eval code</code>分别对应全局代码和<code>eval</code>函数中执行的代码。</p>
<p>三种可执行代码中最为复杂的就是<code>Function code</code>，即函数代码。因为javascript的特性，所以<code>Function code</code>中还可以嵌入<code>Function code</code>，导致了<code>Function</code>的执行环境会较为复杂。</p>
<h2>执行环境（执行上下文）</h2>
<p>当javascript引擎开始执行（进入）一段可执行代码时，就会生成一个<strong>执行环境</strong>（<code>Execution Context</code>，或称<strong>执行上下文</strong>）。</p>
<p>javascript引擎通过一个栈（<code>Stack</code>）来维护执行环境，当进入一个执行环境，则将当前运行的执行环境压入到这个栈的顶部，代码表示：</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> ECStack = [];<span class="comment">//维护执行环境的栈</span>
<span class="function"><span class="keyword">function</span> <span class="title">enterExecutabCode</span><span class="params">()</span>{</span>
    <span class="keyword">var</span> ec = <span class="keyword">new</span> ExecutionContext();
    ECStack.push(ec);
}
</pre></td></tr></table></figure>

<p>一个执行环境是由：<code>LexicalEnvironment</code>、<code>VariableEvironment</code>和<code>ThisBinding</code>组成的。</p>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">ExecutionContext</span><span class="params">()</span>{</span>
    <span class="keyword">return</span> {
        LexicalEnvironment,
        VariableEnvironment,
        ThisBinding
    }
}
</pre></td></tr></table></figure>

<h2>词法环境（Lexical Environments）注意是复数哦~</h2>
<p>一个词法环境对象包括：环境数据（<code>Environment  Record</code>）和外部环境（<code>outer Lexical Environment</code>）。</p>
<h3>外部环境（outer Lexical Environment）</h3>
<p>表示外层函数的词法环境，有两种：<code>null</code>（<code>global</code>环境），或者外层函数的词法环境（嵌套函数）</p>
<h3>环境数据(记录)（Environment Record）</h3>
<p>有两种环境数据：<code>declarative environment records</code> 和 <code>object environment records</code>，因为存在两种类型的环境数据，所以词法环境的实现类型包括了两种：<code>DecarativeEnvironment</code>和<code>ObjectEnvironment</code>。</p>
<h4>Declarative environment records</h4>
<p>常见标识符绑定基本都是这个类型，例如函数定义，<code>var</code>声明，<code>try</code>的<code>catch</code>子句</p>
<h4>Object environment records</h4>
<p>包括两种一种是程序级别的（<code>Program</code>），另外一种是with语句，因为这两种绑定标识符过程需要传入一个对象做为环境数据的属性值。</p>
<p>继续说环境数据，环境数据存在于词法环境或者变量环境中，它包含了一个绑定对象（<code>bindingObject</code>），这个对象是一种键值对象，即有<code>name</code>和value一一对应关系，其中<code>name</code>就是标识符，<code>value</code>则为对应的变量值。</p>
<p>既然环境数据是保存数据的地方，必然有一些方法用于存储数据和读取数据。所以环境数据常见的方法有：<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2013/01/01/ecmascript-262-5th-：执行环境一些概念解释/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/12/31/js模块并行加载器：mixjs/">js模块并行加载器：MixJS</a></h1>
  

      <time datetime="2012-12-30T16:49:27.000Z"><a href="/2012/12/31/js模块并行加载器：mixjs/">2012年12月31日</a></time>
    </header>
    <div class="entry">
      
        <p>自己写了一个js模块加载器，所谓的并行其实也不完全是并行的，只是依赖关系模块是并行的。当然我知道现在有很多类似的js框架，而且MixJS也没有做更加全面的浏览器测试，只是跟我的意识写的一个加载器。</p>
<p>项目放在github上面：<a href="https://github.com/ksky521/MixJS" target="_blank"><a href="https://github.com/ksky521/MixJS">https://github.com/ksky521/MixJS</a></a><br>算是给2012年的一个总结。</p>
<h2>简单说下功能</h2>
<p>跟玉伯的Seajs不同，也跟CMD和AMD不同，我使用的是依赖关系明确的声明模块方式，这样减少了扫描代码读取依赖关系的方式，开发者虽然有了一定的束缚，但是总体来说，后期的维护成本，代码效率和实时combo、上线打包都会大大的降低成本。</p>
<h2>MixJS介绍</h2>
<p>轻量级前端模块化解决方案，提供模块管理、php实时合并、打包工具等方案。可以用于提供给第三方开发者使用的小组件，核心文件可以单独拿出来作为框架core，在此基础上可以开发出一整套的前端框架</p>
<p>MixJS还在开发完善阶段，未作完整兼容性测试，多数代码是出于解决问题的想法而写的，当然也copy了很多牛人的代码，比如cssload回调借鉴了seajs，Deferred来自于jQuery。。。。</p>
<p>。。。。鉴于最近前端圈比较乱，我的小手都开始颤抖，造轮子必然会被喷，我只能说我是根据自己的意识码了这些的代码，据此操作后果自负。。。。</p>
<p>0.2开发完成，现在开发基于0.2模块的开放平台部分代码，主要包括：Deferred（延迟队列）、API（API接口调用）、Widget（小组件）和XDomain（跨域）</p>
<p>模块加载不是单纯的文件加载，需要根据模块规范来写模块哦~</p>
<h2>MixJS代码示例</h2>
<p>参考github项目readme文件。</p>
<h2>用途</h2>
<p>关于MixJS的用途，主要解决是模块开发中的管理、加载。</p>
<p>我赞成使用MixJS是：细模块，粗文件。总体来看MixJS适合Widget开发、开放平台开放js开发，也适合作为模块管理器来打造更加强大的前端架构。</p>
<p>不多说了，吹嘘会被喷的，哈哈~</p>
<h2>感谢</h2>
<p>MixJS也借鉴了不少大牛的代码（嗯，你可以说是抄袭），感谢seajs，jQuery，mass，curl.js等作者。</p>

      
    </div>
    <footer>
      
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/12/25/再探javascript作用域/">再探javascript作用域</a></h1>
  

      <time datetime="2012-12-25T09:30:37.000Z"><a href="/2012/12/25/再探javascript作用域/">2012年12月25日</a></time>
    </header>
    <div class="entry">
      
        <p>对于javascript作用域的理解，之前整理过两篇文章：《<a href="/2011/10/25/javascript%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/">javascript作用域和作用域链</a>》《<a href="/2011/08/15/javascript%E7%9A%84%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F/">javascript的词法作用域</a>》。最近读了周爱民老师的《javascript语言精髓》，对<strong>javascript作用域</strong>有了新的认识，特地整理下思路。</p>
<p>javascript的作用域广义来分：<strong>语法作用域</strong>和<strong>变量作用域</strong>。</p>
<h2>javascript语法作用域</h2>
<p><strong>javascript语法作用域</strong>是讨论代码的组织结构上抽象，可以理解为讨论的是“圈地”问题，也有书籍中对纯粹的语法作用域称为“静态作用域”。</p>
<p>语法作用域分四级，下标依次增高</p>
<table>
<thead>
<tr>
<th>级别</th>
<th>作用域</th>
</tr>
</thead>
<tbody>
<tr>
<td>级别一</td>
<td>表达式</td>
</tr>
<tr>
<td>级别二</td>
<td>语句/批语句</td>
</tr>
<tr>
<td>级别三</td>
<td>函数</td>
</tr>
<tr>
<td>级别四</td>
<td>全局（宿主）</td>
</tr>
</tbody>
</table>
<blockquote>
<ol>
<li>同级别可以平行也可以相互嵌套（包含）</li>
<li>高级别可以嵌套（包含）低级别</li>
<li>低级别不可以嵌套（包含）高级别作用域；假如低级别嵌套高u别，可以理解成相互平行，例如下面的代码是完全等效的</li>
</ol>
</blockquote>
<figure class="highlight lang-javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="keyword">if</span>(<span class="literal">true</span>){
    <span class="comment">//</span>
    <span class="function"><span class="keyword">function</span> <span class="title">fn</span><span class="params">()</span>{</span>
        <span class="comment">//</span>
    }
}

<span class="keyword">if</span>(<span class="literal">true</span>){
    <span class="comment">//</span>
}
<span class="function"><span class="keyword">function</span> <span class="title">fn</span><span class="params">()</span>{</span>
    <span class="comment">//</span>
}
</pre></td></tr></table></figure>

<p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/12/25/再探javascript作用域/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
      
      
  
    <h1 class="title"><a href="/2012/11/08/开源个html5播放器/">开源个html5播放器</a></h1>
  

      <time datetime="2012-11-07T20:53:15.000Z"><a href="/2012/11/08/开源个html5播放器/">2012年11月8日</a></time>
    </header>
    <div class="entry">
      
        <p>前言：人家都说没有几个项目在github，都不好意思说自己混前端的……</p>
<p>好吧，看见越来越多的人都推自己的github主页，我也把自己的之前写的一些东西整理下，从sae的svn迁移到github上，开了几个项目，虽然说代码的确乱糟糟的，但是也凑凑数吧，今天开源的是html5音乐播放器</p>
<h2>html5音乐播放器</h2>
<ul>
<li>github地址：<a href="https://github.com/ksky521/player" target="_blank"><a href="https://github.com/ksky521/player">https://github.com/ksky521/player</a></a></li>
<li>在线演示地址：<a href="http://4.qdemo.sinaapp.com/html5/chrome/" target="_blank"><a href="http://4.qdemo.sinaapp.com/html5/chrome/">http://4.qdemo.sinaapp.com/html5/chrome/</a></a></li>
</ul>
<p>截图如下：<br><img src="http://ww2.sinaimg.cn/bmiddle/796f423btw1dvbr7xm7xdj.jpg" alt="" title="html5 player"></p>
<p>之前放出的是jquery版本的，见文章《<a href="http://js8.in/1023.html">写了一个html5音乐播放器</a>》也整理到了<a href="https://github.com/ksky521/player" target="_blank">这个项目</a>中，文件夹是<code>withjQuery</code>内。<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2012/11/08/开源个html5播放器/#more" class="more-link">全文</a>
          </div>
        
        
      
      

      <div class="clearfix"></div>
    </footer>
  </div>
</article>





</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/乱七八糟/">乱七八糟</a><small>30</small></li>
  
    <li><a href="/categories/前端开发/">前端开发</a><small>116</small></li>
  
    <li><a href="/categories/后端运维/">后端运维</a><small>27</small></li>
  
    <li><a href="/categories/王婆卖瓜/">王婆卖瓜</a><small>4</small></li>
  
    <li><a href="/categories/读书笔记/">读书笔记</a><small>5</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签</h3>
  <ul class="entry clearfix">
  
    <li><a href="/tags/DOM/">DOM<sup>2</sup></a></li>
  
    <li><a href="/tags/IE/">IE<sup>1</sup></a></li>
  
    <li><a href="/tags/IE6/">IE6<sup>2</sup></a></li>
  
    <li><a href="/tags/PPT/">PPT<sup>3</sup></a></li>
  
    <li><a href="/tags/VPS/">VPS<sup>1</sup></a></li>
  
    <li><a href="/tags/ajax/">ajax<sup>5</sup></a></li>
  
    <li><a href="/tags/apache/">apache<sup>1</sup></a></li>
  
    <li><a href="/tags/audio/">audio<sup>2</sup></a></li>
  
    <li><a href="/tags/a标签/">a标签<sup>1</sup></a></li>
  
    <li><a href="/tags/canvas/">canvas<sup>1</sup></a></li>
  
    <li><a href="/tags/chrome/">chrome<sup>3</sup></a></li>
  
    <li><a href="/tags/css/">css<sup>15</sup></a></li>
  
    <li><a href="/tags/eAccelerator/">eAccelerator<sup>1</sup></a></li>
  
    <li><a href="/tags/ecmascript/">ecmascript<sup>3</sup></a></li>
  
    <li><a href="/tags/escape/">escape<sup>1</sup></a></li>
  
    <li><a href="/tags/event/">event<sup>1</sup></a></li>
  
    <li><a href="/tags/express/">express<sup>1</sup></a></li>
  
    <li><a href="/tags/grunt/">grunt<sup>1</sup></a></li>
  
    <li><a href="/tags/handleEvent/">handleEvent<sup>1</sup></a></li>
  
    <li><a href="/tags/html5/">html5<sup>3</sup></a></li>
  
    <li><a href="/tags/iframe/">iframe<sup>1</sup></a></li>
  
    <li><a href="/tags/iptables/">iptables<sup>1</sup></a></li>
  
    <li><a href="/tags/javascript/">javascript<sup>79</sup></a></li>
  
    <li><a href="/tags/linux/">linux<sup>4</sup></a></li>
  
    <li><a href="/tags/livereload/">livereload<sup>1</sup></a></li>
  
    <li><a href="/tags/memcached/">memcached<sup>1</sup></a></li>
  
    <li><a href="/tags/mixjs/">mixjs<sup>1</sup></a></li>
  
    <li><a href="/tags/mysql/">mysql<sup>2</sup></a></li>
  
    <li><a href="/tags/name/">name<sup>1</sup></a></li>
  
    <li><a href="/tags/nginx/">nginx<sup>2</sup></a></li>
  
    <li><a href="/tags/nodejs/">nodejs<sup>7</sup></a></li>
  
    <li><a href="/tags/php/">php<sup>19</sup></a></li>
  
    <li><a href="/tags/session/">session<sup>1</sup></a></li>
  
    <li><a href="/tags/storage/">storage<sup>1</sup></a></li>
  
    <li><a href="/tags/svn/">svn<sup>1</sup></a></li>
  
    <li><a href="/tags/this/">this<sup>1</sup></a></li>
  
    <li><a href="/tags/ueditor/">ueditor<sup>1</sup></a></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs<sup>1</sup></a></li>
  
    <li><a href="/tags/webbench/">webbench<sup>1</sup></a></li>
  
    <li><a href="/tags/websocket/">websocket<sup>1</sup></a></li>
  
    <li><a href="/tags/web前端开发/">web前端开发<sup>5</sup></a></li>
  
    <li><a href="/tags/windows7技巧/">windows7技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/wordpress/">wordpress<sup>3</sup></a></li>
  
    <li><a href="/tags/xss/">xss<sup>3</sup></a></li>
  
    <li><a href="/tags/严格模式/">严格模式<sup>1</sup></a></li>
  
    <li><a href="/tags/位运算/">位运算<sup>1</sup></a></li>
  
    <li><a href="/tags/作用域/">作用域<sup>3</sup></a></li>
  
    <li><a href="/tags/前端优化/">前端优化<sup>1</sup></a></li>
  
    <li><a href="/tags/前端工具/">前端工具<sup>4</sup></a></li>
  
    <li><a href="/tags/加速器/">加速器<sup>1</sup></a></li>
  
    <li><a href="/tags/压力测试/">压力测试<sup>1</sup></a></li>
  
    <li><a href="/tags/右键/">右键<sup>1</sup></a></li>
  
    <li><a href="/tags/安全/">安全<sup>1</sup></a></li>
  
    <li><a href="/tags/性能/">性能<sup>3</sup></a></li>
  
    <li><a href="/tags/我也八卦/">我也八卦<sup>1</sup></a></li>
  
    <li><a href="/tags/执行环境/">执行环境<sup>1</sup></a></li>
  
    <li><a href="/tags/技巧/">技巧<sup>1</sup></a></li>
  
    <li><a href="/tags/播放器/">播放器<sup>1</sup></a></li>
  
    <li><a href="/tags/数组/">数组<sup>1</sup></a></li>
  
    <li><a href="/tags/标签/">标签<sup>1</sup></a></li>
  
    <li><a href="/tags/模块化/">模块化<sup>2</sup></a></li>
  
    <li><a href="/tags/算法/">算法<sup>1</sup></a></li>
  
    <li><a href="/tags/网络技术/">网络技术<sup>73</sup></a></li>
  
    <li><a href="/tags/虚拟主机/">虚拟主机<sup>1</sup></a></li>
  
    <li><a href="/tags/解耦/">解耦<sup>1</sup></a></li>
  
    <li><a href="/tags/语法限制/">语法限制<sup>1</sup></a></li>
  
    <li><a href="/tags/跨域/">跨域<sup>3</sup></a></li>
  
    <li><a href="/tags/路径/">路径<sup>1</sup></a></li>
  
    <li><a href="/tags/软件心得/">软件心得<sup>3</sup></a></li>
  
  </ul>
</div>



  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 三水清
  
</div>
<div class="clearfix"></div></footer>
  <script src="http://libs.baidu.com/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


    
        <script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=6635976" ></script>
        <script type="text/javascript" id="bdshell_js"></script>
        <script type="text/javascript">
        document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
        </script>
    
    



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F1c76f5cc8274a56106b13b9c9b1fb046' type='text/javascript'%3E%3C/script%3E"));
    </script>


</body>
</html>